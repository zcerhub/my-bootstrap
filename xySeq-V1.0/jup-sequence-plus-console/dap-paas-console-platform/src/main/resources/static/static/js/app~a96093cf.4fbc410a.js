(window["jsonpPaas4"]=window["jsonpPaas4"]||[]).push([["app~a96093cf"],{"4319e":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:e.isEdit?"设置":"新增",visible:e.show,size:"medium","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",attrs:{model:e.form,"label-width":"200px",size:"mini"}},[t("el-card",{staticStyle:{"margin-bottom":"20px"}},[t("el-form-item",{attrs:{label:"方式"}},[t("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:e.form.appendonly,callback:function(t){e.$set(e.form,"appendonly",t)},expression:"form.appendonly"}},[e._v("AOF")])],1),t("el-form-item",{attrs:{label:"aof文件同步策略"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.appendfsync,callback:function(t){e.$set(e.form,"appendfsync",t)},expression:"form.appendfsync"}},[t("el-option",{attrs:{label:"always(每次写入操作均同步到AOF文件中)",value:"always"}}),t("el-option",{attrs:{label:"everysec(每秒将缓冲区中的指令同步到AOF文件中)",value:"everysec"}}),t("el-option",{attrs:{label:"no(由操作系统控制每次到AOF文件中)",value:"no"}})],1)],1),t("el-form-item",{attrs:{label:"aof恢复最后一条问题指令配置"}},[t("el-radio",{attrs:{label:"yes"},model:{value:e.form.aofLoadtruncated,callback:function(t){e.$set(e.form,"aofLoadtruncated",t)},expression:"form.aofLoadtruncated"}},[e._v("yes")]),t("el-radio",{attrs:{label:"no"},model:{value:e.form.aofLoadtruncated,callback:function(t){e.$set(e.form,"aofLoadtruncated",t)},expression:"form.aofLoadtruncated"}},[e._v("no")])],1),t("el-form-item",{attrs:{label:"改写aof文件同步函数策略"}},[t("el-radio",{attrs:{label:"yes"},model:{value:e.form.aofRewriteIncrementalFsync,callback:function(t){e.$set(e.form,"aofRewriteIncrementalFsync",t)},expression:"form.aofRewriteIncrementalFsync"}},[e._v("yes")]),t("el-radio",{attrs:{label:"no"},model:{value:e.form.aofRewriteIncrementalFsync,callback:function(t){e.$set(e.form,"aofRewriteIncrementalFsync",t)},expression:"form.aofRewriteIncrementalFsync"}},[e._v("no")])],1),t("el-form-item",{attrs:{label:"自动重写超过上次aof文件大小增长比的aof"}},[t("el-input",{model:{value:e.form.autoAofRewritePercentage,callback:function(t){e.$set(e.form,"autoAofRewritePercentage",t)},expression:"form.autoAofRewritePercentage"}},[t("template",{slot:"append"},[e._v("%")])],2)],1),t("el-form-item",{attrs:{label:"自动重写aof文件的最小文件大小"}},[t("el-input",{model:{value:e.form.autoAofRewriteMinSize,callback:function(t){e.$set(e.form,"autoAofRewriteMinSize",t)},expression:"form.autoAofRewriteMinSize"}},[t("template",{slot:"append"},[e._v("MB")])],2)],1)],1),t("el-card",[t("el-form-item",{attrs:{label:"方式"}},[t("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.form.rdb,callback:function(t){e.$set(e.form,"rdb",t)},expression:"form.rdb"}},[e._v(" RDB ")])],1),t("span",{attrs:{slot:"header"},slot:"header"},[e._v(" 快照规则 ")]),t("el-form-item",{attrs:{label:"save"}},e._l(e.saveRuleList,(function(a,o){return t("el-row",{key:o,staticStyle:{"margin-bottom":"10px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{placeholder:"N秒内"},model:{value:a.numberOfSeconds,callback:function(t){e.$set(a,"numberOfSeconds",t)},expression:"item.numberOfSeconds"}})],1),t("el-col",{attrs:{span:8}},[t("el-input",{attrs:{placeholder:"M个改动"},model:{value:a.theNumberOf,callback:function(t){e.$set(a,"theNumberOf",t)},expression:"item.theNumberOf"}})],1),t("el-col",{attrs:{span:6}},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:0===o,expression:"index === 0"}],attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.addSavlist()}}}),t("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==o,expression:"index !== 0"}],attrs:{type:"primary",icon:"el-icon-delete-solid",size:"mini"},on:{click:function(t){return e.delSavlist(o)}}})],1)],1)})),1),t("el-form-item",[t("div",[e._v(" 注："),t("span",{staticStyle:{color:"red"}},[e._v(" save N M”，表示N秒内数据项中有M个改动时这一条件被满足时，自动保存一次数据集")])])]),t("el-form-item",{attrs:{label:"是否启用rdb文件压缩"}},[t("el-radio",{attrs:{label:"yes"},model:{value:e.form.rdbcompression,callback:function(t){e.$set(e.form,"rdbcompression",t)},expression:"form.rdbcompression"}},[e._v("yes")]),t("el-radio",{attrs:{label:"no"},model:{value:e.form.rdbcompression,callback:function(t){e.$set(e.form,"rdbcompression",t)},expression:"form.rdbcompression"}},[e._v("no")])],1),4!=e.rowData.redisVersion?t("el-form-item",{attrs:{label:"rdb递增保存数据的fsync函数"}},[t("el-radio",{attrs:{label:"yes"},model:{value:e.form.rdbSaveIncrementalFsync,callback:function(t){e.$set(e.form,"rdbSaveIncrementalFsync",t)},expression:"form.rdbSaveIncrementalFsync"}},[e._v("yes")]),t("el-radio",{attrs:{label:"no"},model:{value:e.form.rdbSaveIncrementalFsync,callback:function(t){e.$set(e.form,"rdbSaveIncrementalFsync",t)},expression:"form.rdbSaveIncrementalFsync"}},[e._v("no")])],1):e._e(),t("el-form-item",{attrs:{label:"rdb文件传输从节点快速持久化函数"}},[t("el-radio",{attrs:{label:"yes"},model:{value:e.form.replDisklessSync,callback:function(t){e.$set(e.form,"replDisklessSync",t)},expression:"form.replDisklessSync"}},[e._v("yes")]),t("el-radio",{attrs:{label:"no"},model:{value:e.form.replDisklessSync,callback:function(t){e.$set(e.form,"replDisklessSync",t)},expression:"form.replDisklessSync"}},[e._v("no")])],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},n=[],i=(a("14d9"),a("a434"),a("b64b"),a("d3b7"),a("159b"),a("62d9")),l=a("5c8a");function r(e){var t={id:"",clusterId:"",appendonly:"",appendfsync:"",rdb:"",saveRuleList:[],rdbcompression:"yes",aofLoadtruncated:"",aofRewriteIncrementalFsync:"",autoAofRewritePercentage:"",autoAofRewriteMinSize:"",rdbSaveIncrementalFsync:"",replDisklessSync:""};return e&&Object.keys(t).forEach((function(a){t[a]=e[a]})),t}var s={name:"SetAndEdit",components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:function(){return{}}},refresh:Function},data:function(){return{labelPosition:"right",form:r(),rules:{},saveRuleList:[{numberOfSeconds:"",theNumberOf:""}],loading:!1}},computed:{isEdit:function(){var e;return Boolean(null===(e=this.rowData)||void 0===e?void 0:e.id)}},watch:{"form.appendonly":{handler:function(e,t){},deep:!0},"form.rdb":{handler:function(e,t){e||(this.form.rdbcompression="no")},deep:!0}},created:function(){},mounted:function(){this.isEdit&&this.getDetail()},methods:{addSavlist:function(){this.saveRuleList.push({numberOfSeconds:"",theNumberOf:""})},delSavlist:function(e){this.saveRuleList.splice(e,1)},getDetail:function(){var e=this;Object(i["a"])(this.rowData.id).then((function(t){e.form=r(t.data[0]),e.saveRuleList=t.data[0].saveRuleList.length>0?t.data[0].saveRuleList:[{numberOfSeconds:"",theNumberOf:""}]}))},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this;this.form.saveRuleList=Object(l["a"])(this.saveRuleList),this.form.clusterId=this.rowData.id,this.loading=!0,Object(i["b"])(this.form).then((function(t){200===t.code&&(e.$message({type:"success",message:"设置成功"}),e.$emit("change",!1),e.refresh())})).finally((function(){e.loading=!1}))}}},c=s,f=a("2877"),u=Object(f["a"])(c,o,n,!1,null,"653c8b78",null);t["default"]=u.exports},"4f2e":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("search-form",{attrs:{searchConfig:e.searchModel},on:{onSearch:e.onSearch}}),t("tableView",{ref:"tableView",attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,total:e.tableConfig.pagination.total,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage,operate:e.getIndex}}),e.showDialog?t("SetAndEdit",{attrs:{rowData:e.rowData,refresh:e.getList},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e()],1)},n=[],i=a("5530"),l=(a("d3b7"),a("a0db")),r=a("6034"),s=a("ff51"),c=a("ec41"),f=a("cfcc"),u={filters:{},components:{SetAndEdit:r["default"]},data:function(){this.$createElement;return{showDialog:!1,rowData:null,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"clusterName",label:"名称",align:"center"},{prop:"redisVersion",label:"版本",align:"center"},{prop:"clusterType",label:"模式",align:"center",render:function(e,t){var a=t.row,o=Object(f["f"])(a.clusterType,"clusterTypeOptions");return e("span",[o])}},{prop:"eliminationPolicy",label:"淘汰策略",render:function(e,t){var a=t.row,o=Object(f["f"])(a.eliminationPolicy,f["h"]);return e("span",[o])},align:"center"}],operate:{width:220,list:[{label:"设置",id:"setting",btnPermCode:"edit"}]}},searchModel:{searchData:{clusterName:""},searchItem:[{type:"input",label:"名称",prop:"clusterName"}],rules:{}}}},mounted:function(){this.getList()},methods:{onSearch:function(){this.tableConfig.pagination.pageNo=1,this.getList()},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},getList:function(){var e=this,t={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:Object(i["a"])({},this.searchModel.searchData)};this.tableConfig.loading=!0,Object(l["a"])(t).then((function(t){Object(s["a"])(null===t||void 0===t?void 0:t.data.data)&&(e.tableConfig.tableData=t.data.data),e.tableConfig.pagination.total=Object(c["a"])(t,"data.totalCount")||0})).finally((function(){e.tableConfig.loading=!1}))},getIndex:function(e){var t=this,a=(e.index,e.row),o=e.operate;"delete"===o.id?this.$confirm("确定要删除【".concat(a.applicationName,"】吗?"),{type:"warning"}).then((function(){t.showDialog=!1,ApiDeleteOne(a.id).then((function(e){200===e.code?(t.$message.success("删除成功"),t.getList()):t.$message.error(e.msg)})).catch((function(e){}))})).catch((function(e){})):"setting"===o.id&&(this.rowData=a,this.showDialog=!0)}}},d=u,m=a("2877"),p=Object(m["a"])(d,o,n,!1,null,"5584c32e",null);t["default"]=p.exports},6034:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:e.isEdit?"设置":"新增",visible:e.show,size:"medium",sizeConfig:{medium:"1000px"},"append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[t("el-form-item",{attrs:{label:"淘汰策略",prop:"eliminationPolicy"}},e._l(e.replacementPolicyOptions,(function(a){return t("el-row",{key:a.value},[t("el-radio",{attrs:{label:a.value},model:{value:e.form.eliminationPolicy,callback:function(t){e.$set(e.form,"eliminationPolicy",t)},expression:"form.eliminationPolicy"}},[e._v(" "+e._s(a.label))])],1)})),1),t("el-form-item",{attrs:{label:"最大内存",prop:"maxmemory"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{type:"number"},model:{value:e.form.maxmemory,callback:function(t){e.$set(e.form,"maxmemory",t)},expression:"form.maxmemory"}})],1),t("el-col",{attrs:{span:4}},[t("span",[e._v("字节")])])],1),t("span",{staticStyle:{"font-size":"12px"}},[e._v("设置为 0, 则表示不进行内存限制")])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:function(t){return e.clickCancel()}}},[e._v("取消")])],1)],1)},n=[],i=(a("b64b"),a("d3b7"),a("159b"),a("a0db")),l=a("cfcc");function r(e){var t={id:"",clusterId:"",eliminationPolicy:"",maxmemory:"0"};return e&&Object.keys(t).forEach((function(a){t[a]=e[a]})),t}var s={name:"SetAndEdit",components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:function(){return{}}},refresh:Function},data:function(){return{replacementPolicyOptions:l["h"],labelPosition:"right",form:r(),rules:{eliminationPolicy:[{required:!0,message:"请选择淘汰策略",trigger:"blur"}],maxmemory:[{required:!0,message:"请输入最大内存",trigger:"blur"}]},loading:!1}},computed:{isEdit:function(){var e;return Boolean(null===(e=this.rowData)||void 0===e?void 0:e.id)}},watch:{},created:function(){},mounted:function(){this.isEdit&&this.getDetail()},methods:{getDetail:function(){var e=this;Object(i["b"])(this.rowData.id).then((function(t){e.form=r(t.data[0])}))},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this;this.$refs.formRef.validate((function(t){t&&(e.form.clusterId=e.rowData.id,e.loading=!0,Object(i["c"])(e.form).then((function(t){200===t.code&&(e.$message.success("设置成功"),e.$emit("change",!1),e.refresh())})).finally((function(){e.loading=!1})))}))}}},c=s,f=a("2877"),u=Object(f["a"])(c,o,n,!1,null,"450063aa",null);t["default"]=u.exports},"621b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("search-form",{attrs:{searchConfig:e.searchModel},on:{onSearch:e.onSearch}}),t("tableView",{ref:"tableView",attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,total:e.tableConfig.pagination.total,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage,operate:e.getIndex}}),e.showDialog?t("SetAndEdit",{attrs:{rowData:e.rowData,refresh:e.getList},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e()],1)},n=[],i=a("5530"),l=(a("d3b7"),a("62d9")),r=a("4319e"),s=a("ff51"),c=a("ec41"),f=a("cfcc"),u={filters:{},components:{SetAndEdit:r["default"]},data:function(){this.$createElement;return{showDialog:!1,showAddDialog:!1,rowData:null,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"clusterName",label:"集群名称",align:"center"},{prop:"redisVersion",label:"版本",align:"center"},{prop:"clusterType",label:"模式",align:"center",render:function(e,t){var a=t.row,o=Object(f["f"])(a.clusterType,"clusterTypeOptions");return e("span",[o])}},{prop:"appendonlyRdb",label:"持久化方式",render:function(e,t){var a=t.row,o="",n="";return o="yes"===a.appendonly?"AOF":"",n=1===a.rdb?"RDB":"",e("span",[o+"".concat(""!=o&&""!=n?",":"")+n])},align:"center"}],operate:{width:220,list:[{label:"设置",id:"setting",btnPermCode:"edit"}]}},searchModel:{searchData:{clusterName:""},searchItem:[{type:"input",label:"集群名称",prop:"clusterName"}],rules:{}}}},mounted:function(){this.getList()},methods:{addInfo:function(){this.showAddDialog=!0,this.rowData=null},onSearch:function(){this.tableConfig.pagination.pageNo=1,this.getList()},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},getList:function(){var e=this,t={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:Object(i["a"])({},this.searchModel.searchData)};this.tableConfig.loading=!0,Object(l["c"])(t).then((function(t){Object(s["a"])(null===t||void 0===t?void 0:t.data.data)&&(e.tableConfig.tableData=t.data.data),e.tableConfig.pagination.total=Object(c["a"])(t,"data.totalCount")||0})).finally((function(){e.tableConfig.loading=!1}))},getIndex:function(e){var t=this,a=(e.index,e.row),o=e.operate;"delete"===o.id?this.$confirm("确定要删除【".concat(a.applicationName,"】吗?"),{type:"warning"}).then((function(){t.showDialog=!1,ApiDeleteOne(a.id).then((function(e){200===e.code?(t.$message.success("删除成功"),t.getList()):t.$message.error(e.msg)})).catch((function(e){}))})).catch((function(e){})):"setting"===o.id&&(this.rowData=a,this.showDialog=!0)}}},d=u,m=a("2877"),p=Object(m["a"])(d,o,n,!1,null,"578eff70",null);t["default"]=p.exports}}]);