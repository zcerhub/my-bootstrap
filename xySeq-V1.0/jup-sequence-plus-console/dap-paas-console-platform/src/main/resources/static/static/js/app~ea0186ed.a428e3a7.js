(window["jsonpPaas4"]=window["jsonpPaas4"]||[]).push([["app~ea0186ed"],{"072a":function(t,e,i){"use strict";var n=i("53c8"),r=i("bfb1"),a=i("8937"),o=i("7c8a"),s=i("e897"),c=i("effd"),h=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(){return d=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},d.apply(this,arguments)},l=Math.max,p=s["a"].transform,u="default",g="keyShape",f="delegate",v="svg",y=function(t){function e(e){var i=t.call(this,e)||this;return i.handleUpdateCanvas=Object(a["debounce"])((function(t){var e=i;e.destroyed||e.updateCanvas()}),100,!1),i}return h(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,i=e.size,n=e.graph;if(!this.destroyed){var r=this.get("canvas"),s=r.get("container"),c=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,h=navigator.userAgent.toLowerCase().indexOf("safari")>-1,d=Object(o["b"])("\n      <div\n        class=".concat(e.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=").concat(!h&&!c,"\n      </div>")),l=0,p=0,u=!1,g=0,f=0,v=0,y=0,m=0,x=0,b=h||c?"mousedown":"dragstart";d.addEventListener(b,(function(r){var a,o;if(r.dataTransfer){var s=new Image;s.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(o=(a=r.dataTransfer).setDragImage)||void 0===o||o.call(a,s,0,0);try{r.dataTransfer.setData("text/html","view-port-minimap")}catch(h){r.dataTransfer.setData("text","view-port-minimap")}}if(e.refresh=!1,r.target===d){var c=d.style;g=parseInt(c.left,10),f=parseInt(c.top,10),v=parseInt(c.width,10),y=parseInt(c.height,10),v>i[0]||y>i[1]||(x=n.getZoom(),m=t.get("ratio"),u=!0,l=r.clientX,p=r.clientY)}}),!1);var k=function(t){if(u&&!Object(a["isNil"])(t.clientX)&&!Object(a["isNil"])(t.clientY)){var e=l-t.clientX,r=p-t.clientY;(g-e<0||g-e+v>=i[0])&&(e=0),(f-r<0||f-r+y>=i[1])&&(r=0),g-=e,f-=r,Object(o["c"])(d,{left:"".concat(g,"px"),top:"".concat(f,"px")}),n.translate(e*x/m,r*x/m),l=t.clientX,p=t.clientY}};h||c||d.addEventListener("drag",k,!1);var S=function(){u=!1,e.refresh=!0},w=h||c?"mouseup":"dragend";d.addEventListener(w,S,!1),s.addEventListener("mouseleave",S),s.addEventListener("mouseup",S),(h||c)&&s.addEventListener("mousemove",k,!1),this.set("viewport",d),s.appendChild(d)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("totaldx"),i=this.get("totaldy"),n=this.get("graph"),r=this.get("size"),a=n.get("canvas").get("el"),s=n.get("width")||a.scrollWidth||500,c=n.get("height")||a.scrollHeight||500,h=n.getPointByCanvas(0,0),d=n.getPointByCanvas(s,c),l=this.get("viewport");l||this.initViewport();var p=(d.x-h.x)*t,u=(d.y-h.y)*t,g=h.x*t+e,f=h.y*t+i,v=g+p,y=f+u;g<0&&(p+=g,g=0),v>r[0]&&(p-=v-r[0]),f<0&&(u+=f,f=0),y>r[1]&&(u-=y-r[1]),this.set("ratio",t);var m="".concat(g,"px"),x="".concat(f,"px");Object(o["c"])(l,{left:m,top:x,width:"".concat(p,"px"),height:"".concat(u,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),i=t.get("group");if(!i.destroyed){var n;e.clear(),this.get("hideEdge")?(n=e.addGroup(),i.get("children").forEach((function(t){t.get("id").includes("-edge")||n.add(t.clone())}))):(n=i.clone(),n.resetMatrix(),e.add(n));var r=t.get("renderer");r===v&&this.updateVisible(n)}},e.prototype.updateVisible=function(t){var e=this;if(t.isGroup()||t.get("visible")){var i=t.get("children");if(!i||!i.length)return;i.forEach((function(t){t.get("visible")||t.hide(),e.updateVisible(t)}))}else t.hide()},e.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph,i=this.get("canvas"),n=i.get("children")[0]||i.addGroup();this.get("hideEdge")||Object(a["each"])(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,n)})),Object(a["each"])(e.getNodes(),(function(e){t.updateOneNodeKeyShape(e,n)}));var r=e.getCombos();if(r&&r.length){var o=n.find((function(t){return"comboGroup"===t.get("name")}))||n.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||(Object(a["each"])(r,(function(e){t.updateOneComboKeyShape(e,o)})),null===o||void 0===o||o.sort(),null===o||void 0===o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,e){if(!this.destroyed){var i=this.get("itemMap")||{},n=i[t.get("id")],r=t.getBBox(),a=t.get("keyShape").clone(),o=a.attr(),s={x:r.centerX,y:r.centerY};n?s=Object.assign(o,s):(n=a,e.add(n));var c=n.get("type");"rect"!==c&&"image"!==c||(s.x=r.minX,s.y=r.minY),n.attr(s),t.isVisible()?n.show():n.hide(),n.exist=!0;var h=t.getModel().depth;isNaN(h)||n.set("zIndex",h),i[t.get("id")]=n,this.set("itemMap",i)}},e.prototype.updateOneNodeKeyShape=function(t,e){var i=this.get("itemMap")||{},n=i[t.get("id")],r=t.getBBox(),a=t.get("keyShape").clone(),o=a.attr(),s={x:r.centerX,y:r.centerY};n?(s=Object.assign(o,s),n.toFront()):(n=a,e.add(n));var c=n.get("type");"rect"!==c&&"image"!==c||(s.x=r.minX,s.y=r.minY),n.attr(s),t.isVisible()?n.show():n.hide(),n.exist=!0;var h=t.getModel().depth;isNaN(h)||n.set("zIndex",h),i[t.get("id")]=n,this.set("itemMap",i)},e.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph,i=this.get("canvas"),n=i.get("children")[0]||i.addGroup();this.get("hideEdge")||Object(a["each"])(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e,n)})),Object(a["each"])(e.getNodes(),(function(e){t.updateOneNodeDelegateShape(e,n)}));var r=e.getCombos();if(r&&r.length){var o=n.find((function(t){return"comboGroup"===t.get("name")}))||n.addGroup({name:"comboGroup"});setTimeout((function(){t.destroyed||(Object(a["each"])(r,(function(e){t.updateOneComboKeyShape(e,o)})),null===o||void 0===o||o.sort(),null===o||void 0===o||o.toBack(),t.updateCanvas())}),250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(e&&0!==e.length)for(var i=e.length-1;i>=0;i--){var n=t[e[i]],r=n.exist;n.exist=!1,r||(n.remove(),delete t[e[i]])}},e.prototype.updateOneEdgeKeyShape=function(t,e){var i=this.get("itemMap")||{},n=i[t.get("id")];if(n){var r=t.get("keyShape").attr("path");n.attr("path",r)}else n=t.get("keyShape").clone(),e.add(n);t.isVisible()?n.show():n.hide(),n.exist=!0,i[t.get("id")]=n,this.set("itemMap",i)},e.prototype.updateOneNodeDelegateShape=function(t,e){var i=this.get("delegateStyle"),n=this.get("itemMap")||{},r=n[t.get("id")],a=t.getBBox();if(r){var o={x:a.minX,y:a.minY,width:a.width,height:a.height};r.attr(o),r.toFront()}else r=e.addShape("rect",{attrs:d({x:a.minX,y:a.minY,width:a.width,height:a.height},i),name:"minimap-node-shape"});t.isVisible()?r.show():r.hide(),r.exist=!0,n[t.get("id")]=r,this.set("itemMap",n)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,e=t.get("graph"),i=t.get("size"),s=t.get("className"),c=t.get("container"),h=Object(o["b"])("<div class='".concat(s,"' style='width: ").concat(i[0],"px; height: ").concat(i[1],"px; overflow: hidden'></div>"));Object(a["isString"])(c)&&(c=document.getElementById(c)),c?c.appendChild(h):e.get("container").appendChild(h),t.set("container",h);var d,l=Object(o["b"])('<div class="g6-minimap-container" style="position: relative;"></div>');h.appendChild(l),l.addEventListener("dragenter",(function(t){t.preventDefault()})),l.addEventListener("dragover",(function(t){t.preventDefault()}));var p=e.get("renderer");d=p===v?new r["Canvas"]({container:l,width:i[0],height:i[1]}):new n["Canvas"]({container:l,width:i[0],height:i[1]}),t.set("canvas",d),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var i=this.get("size"),n=this.get("canvas"),r=this.get("type"),a=this.get("padding");if(!n.destroyed){switch(r){case u:this.updateGraphShapes();break;case g:this.updateKeyShapes();break;case f:this.updateDelegateShapes();break;default:break}var o=n.get("children")[0];if(o){o.resetMatrix();var s=o.getCanvasBBox(),c=e.get("canvas").getCanvasBBox(),h=e.getZoom()||1,d=c.width/h,v=c.height/h;Number.isFinite(s.width)&&(d=l(s.width,d),v=l(s.height,v)),d+=2*a,v+=2*a;var y=Math.min(i[0]/d,i[1]/v),m=[1,0,0,0,1,0,0,0,1],x=0,b=0;Number.isFinite(s.minX)&&(x=-s.minX),Number.isFinite(s.minY)&&(b=-s.minY);var k=(i[0]-(d-2*a)*y)/2,S=(i[1]-(v-2*a)*y)/2;m=p(m,[["t",x,b],["s",y,y],["t",k,S]]),o.setMatrix(m),this.set("ratio",y),this.set("totaldx",k+x*y),this.set("totaldy",S+b*y),this.set("dx",k),this.set("dy",S),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;null===(t=this.get("canvas"))||void 0===t||t.destroy();var e=this.get("container");(null===e||void 0===e?void 0:e.parentNode)&&e.parentNode.removeChild(e)},e}(c["a"]);e["a"]=y},"205d":function(t,e,i){"use strict";var n=i("7c8a"),r=i("8937"),a=i("1aef"),o=i.n(a),s=i("effd"),c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();"undefined"!==typeof document&&o()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var h=function(t){function e(e){return t.call(this,e)||this}return c(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return"\n          <h4 class='tooltip-type'>类型：".concat(t.item.getType(),"</h4>\n          <span class='tooltip-id'>ID：").concat(t.item.getID(),"</span>\n        ")},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,e=t.get("className")||"g6-component-tooltip",i=Object(n["b"])("<div class='".concat(e,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),Object(r["isString"])(a)&&(a=document.getElementById(a)),Object(n["c"])(i,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(i),"click"!==t.get("trigger")&&(i.addEventListener("mouseenter",(function(t){Object(n["c"])(i,{visibility:"visible",display:"unset"})})),i.addEventListener("mouseleave",(function(e){t.hideTooltip()}))),t.set("tooltip",i)},e.prototype.onClick=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var i=t.item,n=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),n.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(t),n.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var i=t.item,n=this.get("graph");this.currentTarget=i,this.showTooltip(t),n.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&-1===e.indexOf(t.item.getType())||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var e=this.get("itemTypes");if(!t.item.getType||-1!==e.indexOf(t.item.getType())){var i=this.get("tooltip"),n=this.get("getContent"),a=n(t);Object(r["isString"])(a)?i.innerHTML=a:(this.clearContainer(),i.appendChild(a)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Object(n["c"])(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),i=this.get("tooltip");if(e(t)){var a=this.get("graph"),o=a.get("width"),s=a.get("height"),c=this.get("offsetX")||0,h=this.get("offsetY")||0,d=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),p=t.item;if(p.getType&&"node"===p.getType()&&l&&Object(r["isArray"])(l)&&l.length>=2){var u=p.getBBox();d={x:u.minX+u.width*l[0],y:u.minY+u.height*l[1]}}var g=a.getCanvasByPoint(d.x,d.y),f=g.x,v=g.y,y=a.getContainer(),m={x:f+y.offsetLeft+c,y:v+y.offsetTop+h};Object(n["c"])(i,{visibility:"visible",display:"unset"});var x=i.getBoundingClientRect();f+x.width+c>o&&(m.x-=x.width+c),v+x.height+h>s&&(m.y-=x.height+h,m.y<0&&(m.y=0)),Object(n["c"])(i,{left:"".concat(m.x,"px"),top:"".concat(m.y,"px")})}else Object(n["c"])(i,{visibility:"hidden",display:"none"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),Object(r["isString"])(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(s["a"]);e["a"]=h},"2d10":function(t,e,i){"use strict";var n=i("7c8a"),r=i("effd"),a=i("8937"),o=i("3822"),s=i("53c8"),c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),h=function(){return h=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},h.apply(this,arguments)},d=["click","mouseenter"],l=function(t){function e(e){return t.call(this,e)||this}return c(e,t),e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},e=t.multiple;e&&"mouseenter"===t.trigger&&this.set("multiple",!1);var i=this.get("align");if(!i){var r=this.get("position").split("-");r.includes("left")&&(i="left"),i=r.includes("right")?"right":"center",this.set("align",i)}var a=this.get("graph"),o=a.get("container"),s=Object(n["b"])("<div class='g6-legend-container' style=\"position: absolute;\"></div>");o.appendChild(s),this.set("container",s);var c=this.render();Object(n["c"])(s,this.getContainerPos(c)),this.bindEvents()},e.prototype.getContainerPos=function(t){void 0===t&&(t=[0,0]);var e=this,i=e.get("graph"),n=this.get("offsetX"),r=this.get("offsetY"),a=this.get("margin"),o=this.get("position").split("-"),s={top:0,right:1,bottom:2,left:3},c=0,h=0,d={left:(i.getWidth()-t[0])/2+c,top:(i.getHeight()-t[1])/2+h};return o.forEach((function(e){var n=a[s[e]],r=e;switch(e){case"top":n+=h;break;case"left":n+=c;break;case"bottom":n=i.getHeight()-t[1]-n+h,r="top";break;default:n=i.getWidth()-t[0]-n+c,r="left";break}d[r]=n})),d.top+=r+i.getContainer().offsetTop,d.left+=n+i.getContainer().offsetLeft,Object.keys(d).forEach((function(t){d[t]="".concat(d[t],"px")})),d},e.prototype.bindEvents=function(){var t=this,e=t.get("filter");if(e&&e.enable){var i=e.trigger||"click";d.includes(i)||(i="click");var n=t.get("legendCanvas");"mouseenter"===i?(n.on("node-container:mouseenter",(function(e){return t.filterData(e)})),n.on("node-container:mouseleave",(function(e){t.clearFilter(),t.clearActiveLegend()}))):(n.on("node-container:click",(function(e){return t.filterData(e)})),n.on("click",(function(e){e.target&&e.target.isCanvas&&e.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())})))}},e.prototype.changeData=function(t){this.set("data",t);var e=this.render();Object(n["c"])(this.get("container"),this.getContainerPos(e))},e.prototype.activateLegend=function(t){var e=this.get("filter"),i=null===e||void 0===e?void 0:e.multiple;i||this.clearActiveLegend();var n=t.get("parent");n.get("active")?(n.set("active",!1),this.findLegendItemsByState("active").length&&n.set("inactive",!0)):(n.set("inactive",!1),n.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach((function(t){t.set("inactive",!0)})):this.clearActiveLegend();var r=(null===e||void 0===e?void 0:e.legendStateStyles)||{},a=(null===r||void 0===r?void 0:r.inactive)||{opacity:.5,"text-shape":{opacity:.5}},o=a["text-shape"]||{};this.findLegendItemsByState("inactive").forEach((function(t){var e=t.get("children"),i=e[0],n=e[1];i.attr(h(h({},i.get("oriAttrs")),a)),n.attr(h(h({},n.get("oriAttrs")),o))}));var s=(null===r||void 0===r?void 0:r.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=s["text-shape"]||{};this.findLegendItemsByState("active").forEach((function(t){var e=t.get("children"),i=e[0],n=e[1];i.attr(h(h({},i.get("oriAttrs")),s)),n.attr(h(h({},n.get("oriAttrs")),c))}))},e.prototype.findLegendItemsByState=function(t,e,i){void 0===e&&(e="all"),void 0===i&&(i=!0);var n=this.get("legendCanvas").find((function(t){return"root"===t.get("name")})),r=n.find((function(t){return"node-group"===t.get("name")})),a=n.find((function(t){return"edge-group"===t.get("name")}));return"node"===e?r.get("children").filter((function(e){return!!e.get(t)===i})):"edge"===e?a.get("children").filter((function(e){return!!e.get(t)===i})):r.get("children").filter((function(e){return!!e.get(t)===i})).concat(a.get("children").filter((function(e){return!!e.get(t)===i})))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),e=t.find((function(t){return"root"===t.get("name")})),i=[e.find((function(t){return"node-group"===t.get("name")})),e.find((function(t){return"edge-group"===t.get("name")}))];i.forEach((function(t){t.get("children").forEach((function(t){t.set("active",!1),t.set("inactive",!1);var e=t.get("children"),i=e[0],n=e[1];i.attr(i.get("oriAttrs")),n.attr(n.get("oriAttrs"))}))}))},e.prototype.filterData=function(t){var e=this.get("filter"),i=null===e||void 0===e?void 0:e.filterFunctions;if(e&&i){var n=this.get("legendCanvas"),r=this.get("graph"),a=e.graphActiveState||"active",o=e.graphInactiveState||"inactive",s=e.multiple;this.clearFilter(),s||this.clearActiveLegend(),this.activateLegend(t.target);var c=n.find((function(t){return"root"===t.get("name")})),h=c.find((function(t){return"node-group"===t.get("name")})),d=c.find((function(t){return"edge-group"===t.get("name")})),l=h.get("children").filter((function(t){return t.get("active")})),p=d.get("children").filter((function(t){return t.get("active")})),u=0,g=["getNodes","getEdges"];g.forEach((function(t){r[t]().forEach((function(e){var n=!1,s="getNodes"===t?l:p;s.forEach((function(t){var r=i[t.get("id")];n=n||r(e.getModel())})),n?(r.setItemState(e,o,!1),r.setItemState(e,a,!0),u++):(r.setItemState(e,a,!1),r.setItemState(e,o,!0))}))})),u||g.forEach((function(t){r[t]().forEach((function(t){r.clearItemStates(t,[o])}))}))}},e.prototype.clearFilter=function(){var t=this.get("graph"),e=this.get("filter");if(e){var i=e.graphActiveState||"active",n=e.graphInactiveState||"inactive";t.getNodes().forEach((function(e){t.clearItemStates(e,[i,n])})),t.getEdges().forEach((function(e){t.clearItemStates(e,[i,n])}))}},e.prototype.render=function(){var t=this;this.processData();var e=this.get("legendCanvas");e?e.clear():e=new s["Canvas"]({container:this.get("container"),width:200,height:200});var i=e.addGroup({name:"root"}),n=i.addGroup({name:"node-group"}),r=i.addGroup({name:"edge-group"});this.set("legendCanvas",e);var a=this.get("itemsData"),c=["nodes","edges"],d=[n,r];c.forEach((function(e,i){a[e].forEach((function(n){var r,a,s=d[i].addGroup({id:n.id,name:"node-container"}),c=n.type,l=t.getShapeSize(n),p=l.width,u=l.height,g=l.r,f=t.getStyle(e.substr(0,4),n);switch(n.type){case"circle":a={r:g,x:0,y:0};break;case"rect":a={width:p,height:u,x:-p/2,y:-u/2};break;case"ellipse":a={rx:p,ry:u,x:0,y:0},c="ellipse";break;case"line":a={x1:-p/2,y1:0,x2:p/2,y2:0},c="line";break;case"quadratic":a={path:[["M",-p/2,0],["Q",0,p/2,p/2,0]]},c="path";break;case"cubic":a={path:[["M",-p/2,0],["C",-p/6,p/2,p/6,-p/2,p/2,0]]},c="path";break;case"diamond":a={path:[["M",0,-u],["L",p,0],["L",0,u],["L",-p,0],["Z"]]},c="path";break;case"triangle":a={path:[["M",-p,u],["L",0,-u],["L",p,u],["Z"]]},c="path";break;case"star":a={path:o["h"].getStarPath(3*g,1.2*g)},c="path";break;default:a={r:g,x:0,y:0};break}var v=s.addShape(c,{attrs:h(h({},a),f),name:"".concat(n.type,"-node-keyShape"),oriAttrs:h({opacity:1},f)});if(n.label){var y=v.getBBox(),m=(null===(r=n.labelCfg)||void 0===r?void 0:r.style)||{},x=h({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},m);s.addShape("text",{attrs:h({x:y.maxX+4,y:0,text:n.label},x),className:"legend-label",name:"".concat(n.type,"-node-text"),oriAttrs:x})}}))}));var l,p=this.get("padding"),u=i.find((function(t){return"title-container"===t.get("name")})),g={height:0,maxY:0,width:0};if(this.get("title")){u||(u=i.addGroup({name:"title-container"}));var f={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:p[0]},v=this.get("titleConfig")||{},y=Object.assign(f,v.style||{});l=u.addShape("text",{attrs:h({text:this.get("title")},y)}),g=u.getCanvasBBox(),u.setMatrix([1,0,0,0,1,0,v.offsetX,v.offsetY,1])}this.layoutItems();var m=i.getCanvasBBox(),x=n.getCanvasBBox(),b=x.minX<0?Math.abs(x.minX)+p[3]:p[3],k=g.maxY<x.minY?Math.abs(g.maxY-x.minY)+p[0]:g.maxY+p[0],S=[1,0,0,0,1,0,b,k,1];n.setMatrix(S),m=i.getCanvasBBox();var w=[m.minX+m.width+p[1],m.minY+m.height+p[2]];if(l){v=h({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));g=u.getCanvasBBox();var C=u.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===v.position?C[6]=w[0]/2+v.offsetX:"right"===v.position?(C[6]=w[0]-p[3]+v.offsetX,l.attr({textAlign:"right"})):(C[6]=p[3]+v.offsetX,l.attr({textAlign:"left"})),u.setMatrix(C),g=u.getCanvasBBox(),b=x.minX<0?Math.abs(x.minX)+p[3]:p[3],k=x.minY<g.maxY?Math.abs(g.maxY-x.minY)+p[0]:g.maxY+p[0],S=[1,0,0,0,1,0,b,k,1],n.setMatrix(S);var O=[1,0,0,0,1,0,b,k,1];"vertical"===this.get("layout")?O[6]+=x.maxX+this.get("horiSep"):O[7]+=x.maxY+this.get("vertiSep"),r.setMatrix(O)}else{x=n.getCanvasBBox();var M=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?M[6]+=S[6]+x.maxX+this.get("horiSep"):M[7]+=S[7]+x.maxY+this.get("vertiSep"),r.setMatrix(M)}m=i.getCanvasBBox(),x=n.getCanvasBBox(),S=n.getMatrix()||[1,0,0,0,1,0,0,0,1];var T=r.getMatrix()||[1,0,0,0,1,0,0,0,1],L=r.getCanvasBBox();w=[Math.max(x.width+S[6],L.width+T[6])+p[1],Math.max(x.height+S[7],L.height+T[7])+p[2]],e.changeSize(w[0],w[1]);var E=this.get("containerStyle"),j=i.getMatrix()||[1,0,0,0,1,0,0,0,1],B=o["h"].invertMatrix({x:0,y:0},j),A=i.addShape("rect",{attrs:h({x:B.x+(E.lineWidth||1),y:B.y+(E.lineWidth||1),width:w[0]-2*(E.lineWidth||1),height:w[1]-2*(E.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},E),name:"legend-back-rect",capture:!1});return A.toBack(),w},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),e=this.get("horiSep"),i=this.get("vertiSep"),n=this.get("layout"),r=this.get("align"),a=[0,0],o=t.find((function(t){return"root"===t.get("name")})),s=o.find((function(t){return"node-group"===t.get("name")})),c=o.find((function(t){return"edge-group"===t.get("name")})),h={min:0,max:-1/0},d=-1/0;s.get("children").forEach((function(t,r){0===r&&(h.min=a[0]);var o=t.get("children")[0],s=t.getCanvasBBox(),c=o.getBBox(),l=c.width,p=c.height,u=0,g=0,f=0;"vertical"===n?(g=a[1],f=a[0]+l/2,a[0]=f+s.height+i,u=s.maxX+g+l/2):(g=a[0]+l/2,f=a[1],a[0]=g+s.width+e,u=s.maxY+f+p/2),a[0]>h.max&&(h.max=a[0]),u>d&&(d=u),t.setMatrix([1,0,0,0,1,0,g,f,1])}));var l=h.max-h.min,p={min:0,max:-1/0},u=s.getCanvasBBox();a[0]=0,a[1]="vertical"===n?u.maxX+e:u.maxY+i,c.get("children").forEach((function(t,r){0===r&&(p.min=a[0]);var o=t.get("children")[0],s=t.getCanvasBBox(),c=o.getBBox(),h=c.width,d=c.height,l=0,u=0;"vertical"===n?(l=a[1],u=a[0],a[0]=u+s.height+i,t.setMatrix([1,0,0,0,1,0,0,u+d/2,1])):(l=a[0],u=a[1],a[0]=l+s.width+e,t.setMatrix([1,0,0,0,1,0,l+h/2,0,1])),a[0]>p.max&&(p.max=a[0])}));var g=p.max-p.min;if(r&&""!==r&&"left"!==r){var f=l-g,v="center"===r?Math.abs(f)/2:Math.abs(f),y=f<0?s:c;y.get("children").forEach((function(t){var e=t.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===n?e[7]+=v:e[6]+=v,t.setMatrix(e)}))}},e.prototype.processData=function(){var t=this.get("data"),e={nodes:[],edges:[]};t.nodes&&(t.nodes.sort((function(t,e){return t.order-e.order})),t.nodes.forEach((function(t){var i,n,r,o,s,c=t.size||[(null===(i=t.style)||void 0===i?void 0:i.width)||(null===(n=t.style)||void 0===n?void 0:n.r)||8,(null===(r=t.style)||void 0===r?void 0:r.height)||(null===(o=t.style)||void 0===o?void 0:o.r)||8],d=(null===(s=t.labelCfg)||void 0===s?void 0:s.style)||{};e.nodes.push({id:t.id||Object(a["uniqueId"])(),type:t.type||"circle",style:h({},t.style),order:t.order,label:t.label,itemType:"node",size:c,labelCfg:{position:"right",style:h({fontFamily:"Arial"},d)}})}))),t.edges&&(t.edges.sort((function(t,e){return t.order-e.order})),t.edges.forEach((function(t){var i,n,r=t.type||"line";"cubic-horizontal"===t.type&&(r="cubic");var o=(null===(i=t.labelCfg)||void 0===i?void 0:i.style)||{},s=t.size||[(null===(n=t.style)||void 0===n?void 0:n.width)||8,1];e.edges.push({id:t.id||Object(a["uniqueId"])(),type:r,size:s,style:h({lineWidth:Object(a["isArray"])(s)?s[1]:1},t.style),order:t.order,label:t.label,itemType:"edge",labelCfg:{position:"right",style:h({fontFamily:"Arial"},o)}})}))),this.set("itemsData",e)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var e=this.get(t);if(Object(a["isNumber"])(e))this.set(t,[e,e,e,e]);else if(Object(a["isArray"])(e))switch(e.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[e[0],e[0],e[0],e[0]]);break;case 2:this.set(t,[e[0],e[1],e[0],e[1]]);break;case 3:this.set(t,[e[0],e[1],e[2],e[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var e,i,n;return t.size&&(Object(a["isArray"])(t.size)?(e=t.size[0],i=t.size[1]||t.size[0],n=t.size[0]/2):Object(a["isNumber"])(t.size)&&(e=t.size,i=t.size,n=t.size/2)),t.style&&(t.style.width&&(e=t.style.width),t.style.height&&(i=t.style.height),t.style.r&&(n=t.style.r)),n||(n=5),e||(e=n),i||(i=n),{width:e,height:i,r:n}},e.prototype.getStyle=function(t,e){var i="node"===t?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return h(h({},i),e.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");null===t||void 0===t||t.destroy();var e=this.get("graph"),i=e.get("container"),n=this.get("container");i.removeChild(n)},e}(r["a"]);e["a"]=l},"6b09":function(t,e,i){"use strict";var n=i("7c8a"),r=i("53c8"),a=i("bfb1"),o=i("8937"),s=i("effd"),c="timebarstartplay",h="timebarendplay",d="valuechange",l="timebarConfigChanged",p="playPauseBtn",u="nextStepBtn",g="preStepBtn",f=i("e897"),v=function(){function t(t){var e=t.x,i=void 0===e?0:e,n=t.y,r=void 0===n?0:n,a=t.container,o=t.text,s=t.padding,c=void 0===s?[4,4,4,4]:s,h=t.className,d=void 0===h?"g6-component-timebar-tooltip":h,l=t.backgroundColor,p=void 0===l?"#000":l,u=t.textColor,g=void 0===u?"#fff":u,f=t.opacity,v=void 0===f?.8:f,y=t.fontSize,m=void 0===y?12:y;this.container=a,this.className=d,this.backgroundColor=p,this.textColor=g,this.x=i,this.y=r,this.text=o,this.padding=c,this.opacity=v,this.fontSize=m,this.render()}return t.prototype.render=function(){var t=this,e=t.className,i=(t.x,t.y,t.backgroundColor),r=t.textColor,a=t.text,s=t.padding,c=t.opacity,h=t.fontSize,d=t.container,l=Object(n["b"])("<div class='".concat(e,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(c,'"></div>'));Object(o["isString"])(d)&&(d=document.getElementById(d)),d.appendChild(l),t.parentHeight=d.offsetHeight,t.parentWidth=d.offsetWidth,Object(n["c"])(l,{visibility:"hidden",top:0,left:0});var p=Object(n["b"])("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(i,"; font-size: ").concat(h,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(r,"; padding: ").concat(s[0],"px ").concat(s[1],"px ").concat(s[2],"px ").concat(s[3],"px'></div>"));p.innerHTML=a,l.appendChild(p),t.backgroundDOM=p;var u=Object(n["b"])("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(i,"'></div>"));l.appendChild(u),t.arrowDOM=u,t.container=l},t.prototype.show=function(t){var e=this,i=t.text,r=t.x;t.y,t.clientX,t.clientY;e.backgroundDOM.innerHTML=i;var a=e.backgroundDOM.offsetWidth,o=e.backgroundDOM.offsetHeight,s=e.arrowDOM.offsetWidth,c=e.arrowDOM.offsetHeight;Object(n["c"])(e.container,{top:"".concat(-o-c,"px"),left:"".concat(r,"px"),visibility:"visible"}),Object(n["c"])(e.backgroundDOM,{marginLeft:"".concat(-a/2,"px")}),Object(n["c"])(e.arrowDOM,{marginLeft:"".concat(-s/2,"px"),top:"".concat(o,"px")});var h=r-a/2,d=r+a/2;h<0?Object(n["c"])(e.backgroundDOM,{marginLeft:"".concat(-a/2-h,"px")}):d>e.parentWidth&&Object(n["c"])(e.backgroundDOM,{marginLeft:"".concat(-a/2-d+e.parentWidth+12,"px")})},t.prototype.hide=function(){Object(n["c"])(this.container,{top:0,left:0,visibility:"hidden"})},t}(),y=v,m=function(){return m=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},m.apply(this,arguments)},x=function(){function t(t){this.config=Object(o["deepMix"])({},t),this.init()}return t.prototype.update=function(t){this.config=Object(o["deepMix"])({},this.config,t),this.updateElement(),this.renderMarker()},t.prototype.init=function(){this.initElement(),this.renderMarker()},t.prototype.initElement=function(){var t=this.config,e=t.group,i=t.style,n=i.scale,r=void 0===n?1:n,a=i.offsetX,o=void 0===a?0:a,s=i.offsetY,c=void 0===s?0:s,h=this.config.x+o,d=this.config.y+c,l=e.addGroup({name:p});this.startMarkerGroup=l.addGroup({name:p}),this.circle=e.addShape("circle",{attrs:m({x:h,y:d,r:this.config.r*r},i),name:p}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(h,d,r),fill:i.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=l.addGroup({name:p});var u=.25*this.config.r*r,g=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:h-.375*this.config.r*r,y:d-g/2,width:u,height:g,fill:i.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:h+1/8*this.config.r*r,y:d-g/2,width:u,height:g,fill:i.stroke||"#aaa",lineWidth:0}})},t.prototype.updateElement=function(){var t=this.config.style,e=t.scale,i=void 0===e?1:e,n=t.offsetX,r=void 0===n?0:n,a=t.offsetY,o=void 0===a?0:a,s=this.config.x+r,c=this.config.y+o;this.circle.attr("x",s),this.circle.attr("y",c),this.circle.attr("r",this.config.r*i),this.startMarker.attr("path",this.getStartMarkerPath(s,c,i));var h=.25*this.config.r*i,d=.5*this.config.r*Math.sqrt(3)*i;this.pauseLeftMarker.attr("x",s-.375*this.config.r*i),this.pauseLeftMarker.attr("y",c-d/2),this.pauseLeftMarker.attr("width",h),this.pauseLeftMarker.attr("height",d),this.pauseRightMarker.attr("x",s+1/8*this.config.r*i),this.pauseRightMarker.attr("y",c-d/2),this.pauseRightMarker.attr("width",h),this.pauseRightMarker.attr("height",d)},t.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},t.prototype.getStartMarkerPath=function(t,e,i){var n=.5*this.config.r*Math.sqrt(3)*i;return[["M",t-n/Math.sqrt(3)/2,e-n/2],["L",t+n/Math.sqrt(3),e],["L",t-n/Math.sqrt(3)/2,e+n/2]]},t}(),b=x,k=function(){return k=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},k.apply(this,arguments)},S=f["a"].transform,w="#aaa",C="green",O={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},M={fill:"#fff"},T={fill:"green"},L={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},E={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},j={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:L,timeTypeControllerStyle:E},B=110,A=50,I={SINGLE:"single",RANGE:"range"},G=function(){function t(t){this.controllerCfg=Object(o["deepMix"])({},j,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||I.RANGE,this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return t.prototype.init=function(){this.renderPlayButton()},t.prototype.getNextMarkerPath=function(t,e,i){return[["M",t,e-i],["L",t+i,e],["L",t,e+i],["Z",t,e-i],["M",t,e],["L",t-i,e-i],["L",t-i,e+i],["Z"]]},t.prototype.getPreMarkerPath=function(t,e,i){return[["M",t,e-i],["L",t-i,e],["L",t,e+i],["L",t,e-i],["M",t,e],["L",t+i,e-i],["L",t+i,e+i],["Z"]]},t.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,i=t.height,n=t.x,r=t.y,a=t.hideTimeTypeController,o=t.fill,s=void 0===o?w:o,c=t.stroke,h=void 0===c?C:c,d=t.containerStyle,l=void 0===d?{}:d,p=k(k({},O),t.playBtnStyle||{}),f=k(k({},M),t.preBtnStyle||{}),v=k(k({},T),t.nextBtnStyle||{}),y=i/2-5,m=r+10,x=this.controllerGroup.addShape("rect",{attrs:k({x:n,y:m,width:e,height:i,stroke:h,fill:s},l),name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:m,r:y}):this.playButton=new b({group:this.controllerGroup,x:e/2,y:m+y+5,r:y,isPlay:this.isPlay,style:p});var L=f.offsetX||0,E=f.offsetY||0,j=(f.scale||1)*y;this.controllerGroup.addShape("path",{attrs:k({path:this.getPreMarkerPath(e/2-5*y+L,m+y+5+E,.5*j)},f),name:g});var B=v.offsetX||0,A=v.offsetY||0,I=(v.scale||1)*y;this.controllerGroup.addShape("path",{attrs:k({path:this.getNextMarkerPath(e/2+5*y+B,m+y+5+A,.5*I)},v),name:u}),x.toBack(),this.renderSpeedBtn(),a||this.renderToggleTime(),this.bindEvent();var G=this.controllerCfg.scale,P=void 0===G?1:G,Y=this.controllerGroup.getCanvasBBox(),X=(Y.maxX+Y.minX)/2,H=(Y.maxY+Y.minY)/2,D=S([1,0,0,0,1,0,0,0,1],[["t",-X,-H],["s",P,P],["t",X,H]]);this.controllerGroup.setMatrix(D)},t.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,i=t.width,n=t.hideTimeTypeController,r=k(k({},L),this.controllerCfg.speedControllerStyle||{}),a=r.scroller,o=void 0===a?{}:a,s=r.text,c=void 0===s?{}:s,h=r.pointer,d=void 0===h?{}:h,l=r.scale,p=void 0===l?1:l,u=r.offsetX,g=void 0===u?0:u,f=r.offsetY,v=void 0===f?0:f,y=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=y;var m=[],x=5;this.speedAxisY=[19,22,26,32,39];for(var b=0;b<5;b++){var w=e+this.speedAxisY[b],C=i-(n?A:B);y.addShape("line",{attrs:k({x1:C,x2:C+15,y1:w,y2:w},o),speed:x,name:"speed-rect"}),this.speedAxisY[b]=w,m.push(x),x-=1}this.speedText=y.addShape("text",{attrs:k({x:i-(n?A:B)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},c),name:"speed-text"}),this.speedPoint=y.addShape("path",{attrs:k({path:this.getPointerPath(i-(n?A:B),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},d),name:"speed-pointer"});var O=this.speedGroup.getCanvasBBox(),M=(O.maxX+O.minX)/2,T=(O.maxY+O.minY)/2,E=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];E=S(E,[["t",-M,-T],["s",p,p],["t",M+g*p,T+v*p]]),this.speedGroup.setMatrix(E)},t.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},t.prototype.renderToggleTime=function(){var t,e,i=this.controllerCfg,n=i.width,r=i.defaultTimeType,a=k(k({},E),this.controllerCfg.timeTypeControllerStyle||{}),o=a.scale,s=void 0===o?1:o,c=a.offsetX,h=void 0===c?0:c,d=a.offsetY,l=void 0===d?0:d,p=a.box,u=void 0===p?{}:p,g=a.check,f=void 0===g?{}:g,v=a.text,y=void 0===v?{}:v;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var m=r===I.SINGLE;this.toggleGroup.addShape("rect",{attrs:k({x:n-A,y:this.speedAxisY[0]+3.5},u),isChecked:m,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:k({path:[["M",n-A+3,this.speedAxisY[1]+6],["L",n-A+7,this.speedAxisY[1]+10],["L",n-A+12,this.speedAxisY[1]+4]]},f),capture:!1,name:"check-icon"}),m||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:k({text:m?(null===(t=this.controllerCfg)||void 0===t?void 0:t.timeRangeControllerText)||"时间范围":(null===(e=this.controllerCfg)||void 0===e?void 0:e.timePointControllerText)||"单一时间",x:n-A+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!==typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},y),name:"checked-text"});var x=this.toggleGroup.getCanvasBBox(),b=(x.maxX+x.minX)/2,w=(x.maxY+x.minY)/2,C=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];C=S(C,[["t",-b,-w],["s",s,s],["t",b+h*s,w+l*s]]),this.toggleGroup.setMatrix(C)},t.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",(function(e){var i=e.target.attr("y1"),n=t.speedPoint.attr("matrix"),r=t.speedAxisY.indexOf(n[7]||0),a=t.speedAxisY.indexOf(i),o=t.speedAxisY[a]-t.speedAxisY[r];n=S(n,[["t",0,o]]),t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-a,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(l,{speed:t.currentSpeed,type:t.currentType})})),this.speedGroup.on("mousewheel",(function(e){e.preventDefault();var i=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=i[7],r=t.speedAxisY.indexOf(n);if(-1===r){var a=1/0;t.speedAxisY.forEach((function(t,e){var i=Math.abs(t-n);a>i&&(a=i,r=e)}))}r=e.originalEvent.deltaY>0?Math.max(0,r-1):Math.min(t.speedAxisY.length-1,r+1);var o=t.speedAxisY[r]-n;i=S(i,[["t",0,o]]),t.speedPoint.setMatrix(i),t.currentSpeed=t.speedAxisY.length-r,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(l,{speed:t.currentSpeed,type:t.currentType})})),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",(function(e){var i,n,r=e.target.get("isChecked");r?(t.checkedIcon.hide(),t.checkedText.attr("text",(null===(n=t.controllerCfg)||void 0===n?void 0:n.timePointControllerText)||"单一时间"),t.currentType=I.RANGE):(t.checkedIcon.show(),t.checkedText.attr("text",(null===(i=t.controllerCfg)||void 0===i?void 0:i.timeRangeControllerText)||"时间范围"),t.currentType=I.SINGLE),e.target.set("isChecked",!r),t.group.emit(l,{type:t.currentType,speed:t.currentSpeed})}))},t.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},t}(),P=G,Y=function(){return Y=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Y.apply(this,arguments)},X=f["a"].transform,H={fill:"#5B8FF9"},D={fill:"#e6e8e9"},z=function(){function t(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,i=t.canvas,n=t.group,r=t.width,a=t.height,o=t.padding,s=t.data,c=t.start,h=t.end,d=t.x,l=void 0===d?0:d,p=t.y,u=void 0===p?0:p,g=t.tickLabelFormatter,f=t.selectedTickStyle,v=void 0===f?H:f,y=t.unselectedTickStyle,m=void 0===y?D:y,x=t.tooltipBackgroundColor,b=t.tooltipFomatter,k=t.tickLabelStyle,S=t.controllerCfg,w=void 0===S?{speed:1}:S;this.graph=e,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=i,this.width=r,this.height=a,this.padding=o,this.data=s,this.start=c,this.end=h,this.tickLabelFormatter=g,this.tickLabelStyle=k||{},this.selectedTickStyle=v,this.unselectedTickStyle=m,this.controllerCfg=w,this.currentSpeed=w.speed||1,this.x=l,this.y=u,this.tooltipBackgroundColor=x,this.tooltipFomatter=b,this.fontFamily="undefined"!==typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return t.prototype.renderSlices=function(){var t=this,e=this,i=e.width,n=e.height,r=e.padding,a=e.data,s=e.start,c=e.end,h=e.tickLabelFormatter,d=e.selectedTickStyle,l=e.unselectedTickStyle,p=e.tickLabelStyle,u=i-2*r,g=10,f=4,v=3*r+f+g,y=n-v-2*r,m=2,x=a.length,b=(u-m*(x-1))/x;this.tickWidth=b;var k=this.sliceGroup,S=[],w=[],C=Math.round(x*s),O=Math.round(x*c);this.startTickRectId=C,this.endTickRectId=O;var M=p.rotate;delete p.rotate,a.forEach((function(e,n){var a=n>=C&&n<=O,s=a?d:l,c=k.addShape("rect",{attrs:Y({x:r+n*(b+m),y:r,width:b,height:y},s),draggable:!0,name:"tick-rect-".concat(n)}),u=k.addShape("rect",{attrs:{x:r+n*b+m*(2*n-1)/2,y:r,width:0===n||n===x-1?b+m/2:b+m,height:y,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(n)});u.toFront();var g,v=c.getBBox(),T=(v.minX+v.maxX)/2;if(S.push({rect:c,pickRect:u,value:e.date,x:T,y:v.minY}),h?(g=h(e),!Object(o["isString"])(g)&&g&&(g=e.date)):n%Math.round(x/10)===0&&(g=e.date),g){w.push(g);var L=v.maxY+2*r;k.addShape("line",{attrs:{stroke:"#BFBFBF",x1:T,y1:L,x2:T,y2:L+f},name:"tick-line"});var E=L+f+r,j=k.addShape("text",{attrs:Y({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:T,y:E,textAlign:"center",text:g,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},p),capture:!1,name:"tick-label"}),B=j.getBBox();if(B.maxX>i?j.attr("textAlign","right"):B.minX<0&&j.attr("textAlign","left"),Object(o["isNumber"])(M)&&10!==w.length){var A=X([1,0,0,0,1,0,0,0,1],[["t",-T,-E],["r",M],["t",T-5,E+2]]);j.attr({textAlign:"left",matrix:A})}1===w.length?j.attr({textAlign:"left"}):10===w.length&&j.attr({textAlign:"right"})}})),this.tickRects=S;var T=this.group;this.currentSpeed=1,this.controllerBtnGroup=new P(Y({group:T,x:this.x,y:this.y+n+5,width:i,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},t.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",(function(e){var i=e.target;if("rect"===i.get("type")&&i.get("name")){var n=parseInt(i.get("name").split("-")[2],10);if(!isNaN(n)){var r=t.tickRects,a=t.unselectedTickStyle;r.forEach((function(t){t.rect.attr(a)}));var o=t.selectedTickStyle;r[n].rect.attr(o),t.startTickRectId=n,t.endTickRectId=n;var s=r.length,c=n/s;t.graph.emit(d,{value:[c,c]})}}})),e.on("dragstart",(function(e){var i=t.tickRects,n=t.unselectedTickStyle;i.forEach((function(t){t.rect.attr(n)}));var r=e.target,a=parseInt(r.get("name").split("-")[2],10),o=t.selectedTickStyle;i[a].rect.attr(o),t.startTickRectId=a;var s=i.length,c=a/s;t.graph.emit(d,{value:[c,c]}),t.dragging=!0})),e.on("dragover",(function(e){if(t.dragging&&"rect"===e.target.get("type")){for(var i=parseInt(e.target.get("name").split("-")[2],10),n=t.startTickRectId,r=t.tickRects,a=t.selectedTickStyle,o=t.unselectedTickStyle,s=0;s<r.length;s++){var c=s>=n&&s<=i?a:o;r[s].rect.attr(c)}var h=r.length;t.endTickRectId=i;var l=n/h,p=i/h;t.graph.emit(d,{value:[l,p]})}})),e.on("drop",(function(e){if(t.dragging&&(t.dragging=!1,"rect"===e.target.get("type"))){var i=t.startTickRectId,n=parseInt(e.target.get("name").split("-")[2],10);if(!(n<i)){var r=t.selectedTickStyle,a=t.tickRects;a[n].rect.attr(r),t.endTickRectId=n;var o=a.length,s=i/o,c=n/o;t.graph.emit(d,{value:[s,c]})}}}));var i=this,n=i.tooltipBackgroundColor,r=i.tooltipFomatter,a=i.canvas,o=new y({container:a.get("container"),backgroundColor:n}),s=this.tickRects;s.forEach((function(t){var e=t.pickRect;e.on("mouseenter",(function(t){var e=t.target;if("rect"===e.get("type")){var i=parseInt(e.get("name").split("-")[2],10),n=a.getClientByPoint(s[i].x,s[i].y);o.show({x:s[i].x,y:s[i].y,clientX:n.x,clientY:n.y,text:r?r(s[i].value):s[i].value})}})),e.on("mouseleave",(function(t){o.hide()}))}));var c=this.group;c.on("".concat(p,":click"),(function(){t.isPlay=!t.isPlay,t.changePlayStatus()})),c.on("".concat(u,":click"),(function(){t.updateStartEnd(1)})),c.on("".concat(g,":click"),(function(){t.updateStartEnd(-1)})),c.on(l,(function(e){e.type;var i=e.speed;t.currentSpeed=i}))},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(c,null)):this.playHandler&&("undefined"!==typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(h,null))},t.prototype.startPlay=function(){var t=this;return"undefined"!==typeof window?window.requestAnimationFrame((function(){var e=t.currentSpeed;t.frameCount%(60/e)===0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.updateStartEnd=function(t){var e=this,i=this.tickRects,n=i.length,r=this.unselectedTickStyle,a=this.selectedTickStyle,o=e.endTickRectId;if(t>0?e.endTickRectId++:(i[e.endTickRectId].rect.attr(r),e.endTickRectId--),o!==e.startTickRectId)e.endTickRectId<e.startTickRectId&&(e.startTickRectId=e.endTickRectId);else{for(var s=e.startTickRectId;s<=e.endTickRectId-1;s++)i[s].rect.attr(r);e.startTickRectId=e.endTickRectId}if(i[e.endTickRectId]){i[e.endTickRectId].rect.attr(a);var c=e.startTickRectId/n,h=e.endTickRectId/n;this.graph.emit(d,{value:[c,h]})}},t.prototype.destory=function(){var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach((function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")})),this.tickRects.length=0,t.off("".concat(p,":click")),t.off("".concat(u,":click")),t.off("".concat(g,":click")),t.off(l),this.sliceGroup.destroy()},t}(),F=z,_=i("2ef1"),R=i("f2fb"),N=function(t,e,i){if(i||2===arguments.length)for(var n,r=0,a=e.length;r<a;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};function W(t){return Object(o["map"])(t,(function(t,e){var i=0===e?"M":"L",n=t[0],r=t[1];return[i,n,r]}))}function V(t){return W(t)}function U(t){if(t.length<=2)return V(t);var e=[];Object(o["each"])(t,(function(t){Object(o["isEqual"])(t,e.slice(e.length-2))||e.push(t[0],t[1])}));var i=_["a"](e,!1),n=Object(o["head"])(t),r=n[0],a=n[1];return i.unshift(["M",r,a]),i}function Z(t,e,i,n){void 0===n&&(n=!0);var r=new R["b"]({values:t}),a=new R["a"]({values:Object(o["map"])(t,(function(t,e){return e}))}),s=Object(o["map"])(t,(function(t,n){return[a.scale(n)*e,i-r.scale(t)*i]}));return n?U(s):V(s)}function q(t,e,i,n){void 0===n&&(n=5);for(var r=new R["b"]({values:t}),a=new R["a"]({values:Object(o["map"])(t,(function(t,e){return e}))}),s=Object(o["map"])(t,(function(t,n){return[a.scale(n)*e,i-r.scale(t)*i]})),c=[],h=0;h<s.length;h++){var d=s[h],l={x:d[0],y:d[1],y0:i,size:n},p=J(l);c.push.apply(c,p)}return $(c)}function K(t,e){var i=new R["b"]({values:t}),n=Math.max(0,i.min);return e-i.scale(n)*e}function Q(t,e,i,n){var r=N([],t,!0),a=K(n,i);return r.push(["L",e,a]),r.push(["L",0,a]),r.push(["Z"]),r}function J(t){var e,i,n,r,a=t.x,s=t.y,c=t.y0,h=t.size;Object(o["isArray"])(s)?(e=s[0],i=s[1]):(e=c,i=s),Object(o["isArray"])(a)?(n=a[0],r=a[1]):(n=a-h/2,r=a+h/2);var d=[{x:n,y:e},{x:n,y:i}];return d.push({x:r,y:i},{x:r,y:e}),d}function $(t,e){void 0===e&&(e=!0);var i=[],n=t[0];i.push(["M",n.x,n.y]);for(var r=1,a=t.length;r<a;r++)i.push(["L",t[r].x,t[r].y]);return e&&(i.push(["L",n.x,n.y]),i.push(["z"])),i}var tt=function(){return tt=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},tt.apply(this,arguments)},et={stroke:"#C5C5C5",strokeOpacity:.85},it={fill:"#CACED4",opacity:.85},nt=function(){function t(t){var e=t.x,i=void 0===e?0:e,n=t.y,r=void 0===n?0:n,a=t.width,o=void 0===a?200:a,s=t.height,c=void 0===s?26:s,h=t.smooth,d=void 0===h||h,l=t.isArea,p=void 0!==l&&l,u=t.data,g=void 0===u?[]:u,f=t.lineStyle,v=t.areaStyle,y=t.group,m=t.interval,x=void 0===m?null:m;this.group=y,this.x=i,this.y=r,this.width=o,this.height=c,this.data=g,this.smooth=d,this.isArea=p,this.lineStyle=Object.assign({},et,f),this.areaStyle=Object.assign({},it,v),this.intervalConfig=x,this.renderLine()}return t.prototype.renderLine=function(){var t=this,e=t.x,i=t.y,n=t.width,r=t.height,a=(t.barWidth,t.data),o=t.smooth,s=t.isArea,c=t.lineStyle,h=t.areaStyle,d=this.group.addGroup({name:"trend-group"});if(a){var l=Z(a,n,r,o);if(d.addShape("path",{attrs:tt({path:l},c),name:"trend-line"}),s){var p=Q(l,n,r,a);d.addShape("path",{attrs:tt({path:p},h),name:"trend-area"})}}this.intervalConfig&&d.addShape("path",{attrs:tt({path:q(this.intervalConfig.data,n,r,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),d.move(e,i)},t.prototype.destory=function(){this.group.destroy()},t}(),rt=nt,at=function(){return at=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},at.apply(this,arguments)},ot={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},st={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},ct=function(){function t(t){var e=t.group,i=t.name,n=t.type,r=t.x,a=void 0===r?0:r,o=t.y,s=void 0===o?0:o,c=t.width,h=void 0===c?2:c,d=t.height,l=void 0===d?24:d,p=t.style,u=void 0===p?{}:p;this.group=e,this.name=i,this.handleType=n,this.x=a,this.y=s,this.width=h,this.height=l,"trend"===n?this.style=at(at({},ot),u):"simple"===n&&(this.style=at(at({},st),u)),this.renderHandle()}return t.prototype.setX=function(t){this.setXY(t,void 0)},t.prototype.setY=function(t){this.setXY(void 0,t)},t.prototype.setXY=function(t,e){Object(o["isNumber"])(t)&&(this.x=t),Object(o["isNumber"])(e)&&(this.y=e),this.updateXY()},t.prototype.renderHandle=function(){var t=this,e=t.width,i=t.height,n=t.style,r=t.name,a=n.fill,o=n.stroke,s=n.radius,c=n.opacity,h=n.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:i,fill:a,stroke:o,radius:s,opacity:c,cursor:h},name:"".concat(r,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:a,stroke:o,radius:s,opacity:c,cursor:h,lineAppendWidth:12},name:"".concat(r,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:i,r:2*e,fill:a,stroke:o,radius:s,opacity:c,cursor:h},name:"".concat(r,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:i/2,r:2*e,fill:a,stroke:o,radius:s,opacity:c,cursor:h,lineWidth:2},name:"".concat(r,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},t.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),(function(){var e=t.style.highLightFill;t.topCircle.attr("fill",e)})),this.handleGroup.on("".concat(e,"-handler:mouseleave"),(function(){var e=t.style.fill;t.topCircle.attr("fill",e)}))},t.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),(function(){var e=t.style.highLightFill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)})),this.handleGroup.on("".concat(e,"-handler:mouseleave"),(function(){var e=t.style.fill;t.verticalLine.attr("fill",e),t.topCircle.attr("fill",e),t.bottomCircle.attr("fill",e)}))},t.prototype.show=function(){this.handleGroup.show()},t.prototype.hide=function(){this.handleGroup.hide()},t.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t}(),ht=ct,dt=function(){return dt=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},dt.apply(this,arguments)},lt=f["a"].transform,pt={fill:"#416180",opacity:.05},ut={fill:"#416180",opacity:.15,radius:5},gt={fill:"#5B8FF9",opacity:.3,cursor:"grab"},ft=2,vt={width:ft,height:24},yt={textBaseline:"middle",fill:"#000",opacity:.45},mt={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},xt={lineWidth:1,stroke:"#ccc"},bt=function(){function t(t){var e=this;this.prevX=0,this.onMouseDown=function(t){return function(i){e.currentHandler=t;var n=i.originalEvent;n.stopPropagation(),n.preventDefault(),e.prevX=Object(o["get"])(n,"touches.0.pageX",n.pageX);var r=e.canvas.get("container");r.addEventListener("mousemove",e.onMouseMove),r.addEventListener("mouseup",e.onMouseUp),r.addEventListener("mouseleave",e.onMouseUp),r.addEventListener("touchmove",e.onMouseMove),r.addEventListener("touchend",e.onMouseUp),r.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(t){t.stopPropagation(),t.preventDefault();var i=Object(o["get"])(t,"touches.0.pageX",t.pageX),n=i-e.prevX,r=e.adjustOffsetRange(n/e.width);e.updateStartEnd(r),e.updateUI(),e.prevX=i},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var t=e.canvas.get("container");t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))};var i=t.x,n=void 0===i?0:i,r=t.y,a=void 0===r?0:r,s=t.width,c=void 0===s?100:s,h=t.height,d=t.padding,l=void 0===d?10:d,p=t.trendCfg,u=t.controllerCfg,g=void 0===u?{speed:1}:u,f=t.backgroundStyle,v=void 0===f?{}:f,y=t.foregroundStyle,m=void 0===y?{}:y,x=t.handlerStyle,b=void 0===x?{}:x,k=t.textStyle,S=void 0===k?{}:k,w=t.start,C=void 0===w?0:w,O=t.end,M=void 0===O?1:O,T=t.minText,L=void 0===T?"":T,E=t.maxText,j=void 0===E?"":E,B=t.group,A=t.graph,G=t.canvas,P=t.tick,Y=void 0===P?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(t){return t},ticks:[]}:P,X=t.type;this.graph=A,this.canvas=G,this.group=B,this.timeBarType=X,this.x=n,this.y=a,this.width=c,this.height=h,this.padding=l,this.ticks=Y.ticks,this.trendCfg=p,this.controllerCfg=g,this.currentSpeed=g.speed||1,this.tickLabelFormatter=Y.tickLabelFormatter,"trend"===X?this.backgroundStyle=dt(dt({},pt),v):"simple"===X&&(this.backgroundStyle=dt(dt({},ut),v)),this.foregroundStyle=dt(dt({},gt),m),this.handlerStyle=dt(dt({},vt),b),this.textStyle=dt(dt({},yt),S),this.tickLabelStyle=dt(dt({},mt),Y.tickLabelStyle),this.tickLineStyle=dt(dt({},xt),Y.tickLineStyle),this.currentMode=g.defaultTimeType||I.RANGE,this.start=C,this.end=M,this.minText=L,this.maxText=j,this.fontFamily="undefined"!==typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return t.prototype.update=function(t){var e=t.x,i=t.y,n=t.width,r=t.height,a=t.minText,s=t.maxText,c=t.start,h=t.end;this.start=Math.min(1,Math.max(c,0)),this.end=Math.min(1,Math.max(h,0)),Object(o["assign"])(this,{x:e,y:i,width:n,height:r,minText:a,maxText:s}),this.updateUI()},t.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},t.prototype.renderSlider=function(){var t=this,e=this,i=e.width,n=e.height,r=e.timeBarType;if("trend"===r&&Object(o["size"])(Object(o["get"])(this.trendCfg,"data"))){var a=new rt(dt(dt({x:this.x,y:this.y,width:i,height:n},this.trendCfg),{group:this.group}));this.trendComponent=a}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:dt({x:0,y:0,width:i,height:n},this.backgroundStyle),name:"background"});var c=this.group.addGroup();"trend"===r?(this.minTextShape=c.addShape("text",{attrs:dt({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=c.addShape("text",{attrs:dt({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=c.addShape("text",{attrs:dt({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=c.addShape("text",{attrs:dt({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:dt({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",(function(t){t.target.attr("cursor","grabbing")})),this.foregroundShape.on("mouseup",(function(e){e.target.attr("cursor",t.foregroundStyle.cursor||"grab")}));var h=Object(o["get"])(this.handlerStyle,"width",2),d=Object(o["get"])(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new ht({name:"minHandlerShape",group:l,type:r,x:this.x,y:this.y,width:h,height:d,style:this.handlerStyle});var p=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new ht({name:"maxHandlerShape",group:p,type:r,x:this.x,y:this.y,width:h,height:d,style:this.handlerStyle});var u=this.ticks,g=i/(u.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach((function(t){t.destroy()}));var f=-1/0,v=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=u.map((function(e,i){var r;t.tickPosList.push(t.x+i*g),t.tickLabelFormatter?(r=t.tickLabelFormatter(e),!Object(o["isString"])(r)&&r&&(r=e.date)):r=e.date;var a=t.x+i*g,s=t.y+n+5,c=t.group.addShape("text",{attrs:dt({x:a,y:s,text:r,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle),name:"tick-label"});if(Object(o["isNumber"])(v)&&i!==u.length-1){var h=lt([1,0,0,0,1,0,0,0,1],[["t",-a,-s],["r",v],["t",a-5,s+2]]);c.attr({textAlign:"left",matrix:h})}0===i?c.attr({textAlign:"left"}):i!==u.length-1&&c.attr({textAlign:"right"});var d=t.group.addShape("line",{attrs:dt({x1:t.x+i*g,y1:t.y+n+2,x2:t.x+i*g,y2:t.y+n+6},t.tickLineStyle),name:"tick-line"});d.toBack();var l=c.getBBox();return l.minX>f?(c.show(),d.show(),f=l.minX+l.width+10):(c.hide(),d.hide()),c})),this.controllerBtnGroup=new P(dt({group:this.group,x:this.x,y:this.y+n+25,width:i,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===I.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},t.prototype.bindEvents=function(){var t=this,e=this.group.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var i=this.group.find((function(t){return"maxHandlerShape"===t.get("name")}));i&&(i.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),i.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(p,":click"),(function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()})),this.group.on("".concat(u,":click"),(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()})),this.group.on("".concat(g,":click"),(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()})),this.group.on(l,(function(e){var i=e.type,n=e.speed;t.currentSpeed=n,t.currentMode=i,i===I.SINGLE?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):i===I.RANGE&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())}))},t.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},t.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,i=1-this.start;return Math.min(i,Math.max(e,t));case this.maxHandlerShape:e=0-this.end,i=1-this.end;return Math.min(i,Math.max(e,t));case this.foregroundShape:e=0-this.start,i=1-this.end;return Math.min(i,Math.max(e,t));default:return 0}},t.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],i=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):null===e||void 0===e?void 0:e.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(i):null===i||void 0===i?void 0:i.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(i):i.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(i):i.date;break;default:break}},t.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var e=this.x+this.start*this.width,i=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",i-e);var n=Object(o["get"])(this.handlerStyle,"width",ft);this.setText(this.minText,this.maxText);var r=this.dodgeText([e,i]),a=r[0],s=r[1];this.minHandlerShape.setX(e-n/2),Object(o["each"])(a,(function(e,i){return t.minTextShape.attr(i,e)})),this.maxHandlerShape.setX(i-n/2),Object(o["each"])(s,(function(e,i){return t.maxTextShape.attr(i,e)})),this.currentMode===I.RANGE?this.graph.emit(d,{value:[this.start,this.end].sort()}):this.currentMode===I.SINGLE&&this.graph.emit(d,{value:[this.end,this.end]})},t.prototype.dodgeText=function(t){var e,i,n=2,r=Object(o["get"])(this.handlerStyle,"width",ft),a=this.minTextShape,s=this.maxTextShape,c=t[0],h=t[1],d=!1;c>h&&(e=[h,c],c=e[0],h=e[1],i=[s,a],a=i[0],s=i[1],d=!0);var l=a.getBBox(),p=s.getBBox(),u=null,g=null;return"trend"===this.timeBarType?(u=c-l.width<this.x+n?{x:c+r/2+n,textAlign:"left"}:{x:c-r/2-n,textAlign:"right"},g=h+p.width>this.x+this.width?{x:h-r/2-n,textAlign:"right"}:{x:h+r/2+n,textAlign:"left"}):"simple"===this.timeBarType&&(u=a.attr("x")>l.width?{x:c,textAlign:"center"}:{x:c,textAlign:"left"},g=s.attr("x")>this.width-p.width?{x:h,textAlign:"right"}:{x:h,textAlign:"center"}),d?[g,u]:[u,g]},t.prototype.startPlay=function(){var t=this;return"undefined"!==typeof window?window.requestAnimationFrame((function(){var e=t,i=e.ticks,n=e.width,r=t.currentSpeed,a=n/i.length,o=a/(1e3*(10-r)/60),s=t.adjustOffsetRange(o/t.width);t.updateStartEnd(s),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())})):void 0},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(c,null)):this.playHandler&&("undefined"!==typeof window&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(h,null))},t.prototype.destory=function(){this.graph.off(d,(function(){}));var t=this.group,e=t.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var i=t.find((function(t){return"maxHandlerShape"===t.get("name")}));i&&(i.off("maxHandlerShape-handler:mousedown"),i.off("maxHandlerShape-handler:touchstart"),i.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("".concat(p,":click")),t.off("".concat(u,":click")),t.off("".concat(g,":click")),t.off(l),t.destroy(),this.trendComponent&&this.trendComponent.destory()},t}(),kt=bt,St=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wt=function(){return wt=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},wt.apply(this,arguments)},Ct=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i},Ot=4,Mt=26,Tt=function(t){function e(e){var i=t.call(this,e)||this;return i.afterrenderListener=function(t){return i.filterData({})},i.valueChangeListener=Object(o["throttle"])((function(t){return i.filterData(t)}),200,{trailing:!0,leading:!0}),i.changeData=function(t){var e=i.get("graph");i.cacheGraphData=e.get("data"),i.filterData({})},i}return St(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t,e,i=this.get("graph"),s=this._cfgs,c=s.width,h=s.height,d=s.putInGraphContainer,l=this.get("className")||"g6-component-timebar",p=this.get("container");if(p?(Object(o["isString"])(p)&&(p=document.getElementById(p)),t=p):(t=Object(n["b"])("<div class='".concat(l,"'></div>")),Object(n["c"])(t,{position:"relative"})),d){var u=this.get("graph").get("container");u.appendChild(t)}this.set("timeBarContainer",t);var g=i.get("renderer");e="SVG"===g?new a["Canvas"]({container:t,width:c,height:h}):new r["Canvas"]({container:t,width:c,height:h}),this.get("containerCSS")&&Object(n["c"])(t,this.get("containerCSS")),this.set("canvas",e)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),e=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent();var i="undefined"!==typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",i)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var e=this.get("timebar");e&&(e.isPlay=!!t,e.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,e=this._cfgs,i=e.width,n=e.x,r=e.y,a=e.padding,o=e.type,s=e.trend,c=e.slider,h=e.controllerCfg,d=e.textStyle,l=e.tick,p=e.backgroundStyle,u=e.foregroundStyle,g=s.data,f=Ct(s,["data"]),v=i-2*a,y="trend"===o?Mt:Ot,m=this.get("graph"),x=this.get("timeBarGroup"),b=this.get("canvas"),k=null;if("trend"===o||"simple"===o){var S=this.get("getValue");k=new kt(wt(wt({graph:m,canvas:b,group:x,type:o,x:n+a,y:"trend"===o?r+a:r+a+15,width:v,height:y,padding:a,backgroundStyle:p,foregroundStyle:u,trendCfg:wt(wt({},f),{data:g.map((function(t){return(null===S||void 0===S?void 0:S(t))||t.value}))})},c),{tick:{ticks:g,tickLabelFormatter:l.tickLabelFormatter,tickLabelStyle:l.tickLabelStyle,tickLineStyle:l.tickLineStyle},handlerStyle:wt(wt({},c.handlerStyle),{height:c.height||y}),controllerCfg:h,textStyle:d}))}else"tick"===o&&(k=new F(wt({graph:m,canvas:b,group:x,x:n+a,y:r+a,width:i,height:42,padding:2,controllerCfg:h},l)));var w=function e(){var i=t.get("timebar");i.draggingHandler=!1,i.isPlay&&(i.isPlay=!1,i.currentHandler=i.maxHandlerShape,i.changePlayStatus()),document.removeEventListener("mouseup",e)};b.on("mousedown",(function(t){"maxHandlerShape-handler"!==t.target.get("name")&&"minHandlerShape-handler"!==t.target.get("name")&&t.target!==k.foregroundShape||document.addEventListener("mouseup",w)})),this.set("timebar",k)},e.prototype.filterData=function(t){var e,i=t.value;if(!i){i=[];var n=this._cfgs.type;n&&"trend"!==n&&"simple"!==n?"tick"===n&&(i[0]=this._cfgs.tick.start,i[1]=this._cfgs.tick.end):(i[0]=this._cfgs.slider.start,i[1]=this._cfgs.slider.end)}var r=null,a=this._cfgs.type;if("trend"===a||"simple"===a?r=this._cfgs.trend.data:"tick"===a&&(r=this._cfgs.tick.data),r&&0!==r.length){var o=this.get("rangeChange"),s=this.get("graph"),c=Math.round(r.length*i[0]),h=Math.round(r.length*i[1]);h=h>=r.length?r.length-1:h,c=c>=r.length?r.length-1:c;var d=null===(e=this._cfgs.tick)||void 0===e?void 0:e.tickLabelFormatter,l=d?d(r[c]):r[c].date,p=d?d(r[h]):r[h].date;if("tick"!==a){var u=this.get("timebar");u.setText(l,p)}if(o)o(s,l,p);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=s.get("data"));var g=this.get("filterItemTypes"),f=this.get("changeData"),v=this.get("getDate"),y=this.get("shouldIgnore"),m=r[c].date,x=r[h].date;if(f||void 0===f){var b=this.cacheGraphData.nodes,k=this.cacheGraphData.edges,S={},w={};s.getNodes().forEach((function(t){return S[t.getID()]=!0})),s.getEdges().forEach((function(t){return w[t.getID()]=!0})),g.includes("node")&&(null===b||void 0===b||b.forEach((function(t){var e=+((null===v||void 0===v?void 0:v(t))||t.date),i=e>=m&&e<=x||(null===y||void 0===y?void 0:y("node",t,{min:m,max:x})),n=S[t.id];n&&!i?(s.removeItem(t.id),S[t.id]=!1):!n&&i&&(s.addItem("node",t),S[t.id]=!0)})),null===k||void 0===k||k.forEach((function(t){var e=S[t.source]&&S[t.target]||(null===y||void 0===y?void 0:y("edge",t,{min:m,max:x})),i=!!s.findById(t.id);i&&!e?(s.removeItem(t.id),w[t.id]=!1):!i&&e?(s.addItem("edge",t),w[t.id]=!0):i||(w[t.id]=!1)}))),(this.get("filterEdge")||g.includes("edge"))&&(null===k||void 0===k||k.filter((function(t){var e=+((null===v||void 0===v?void 0:v(t))||t.date),i=e>=m&&e<=x||(null===y||void 0===y?void 0:y("edge",t,{min:m,max:x})),n=S[t.source]&&S[t.target],r=i&&n,a=w[t.id];a&&!r?(w[t.id]=!1,s.removeItem(t.id)):!a&&r&&(w[t.id]=!0,s.addItem("edge",t))})))}else g.includes("node")&&s.getNodes().forEach((function(t){var e=t.getModel();if(!(null===y||void 0===y?void 0:y("node",e,{min:m,max:x}))){var i=+((null===v||void 0===v?void 0:v(e))||e.date);i<m||i>x?s.hideItem(t):s.showItem(t)}})),(this.get("filterEdge")||g.includes("edge"))&&s.getEdges().forEach((function(t){var e=t.getModel();if(!(null===y||void 0===y?void 0:y("edge",e,{min:r[c].date,max:r[h].date}))){var i=+((null===v||void 0===v?void 0:v(e))||e.date);if(i<r[c].date||i>r[h].date)s.hideItem(t);else{var n=t.getSource().isVisible(),a=t.getTarget().isVisible();n&&a&&s.showItem(t)}}}))}}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(d,this.valueChangeListener)},e.prototype.destroy=function(){var e=this.get("graph");e.off("afterchangedata",this.changeData),e.off("afterrender",this.afterrenderListener),e.off(d,this.valueChangeListener);var i=this.get("timebar");i&&i.destory&&i.destory(),t.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var r=this.get("container");r||(r=this.get("graph").get("container")),Object(o["isString"])(r)&&(r=document.getElementById(r)),r===n&&(r=r.parentElement),r.removeChild(n)}},e}(s["a"]);e["a"]=Tt},"6e84":function(t,e,i){"use strict";var n=i("7c8a"),r=i("8937"),a=i("1aef"),o=i.n(a),s=i("effd"),c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();"undefined"!==typeof document&&o()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var h=function(t){function e(e){return t.call(this,e)||this}return c(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>菜单项1</li>\n            <li>菜单项2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),e=Object(n["b"])("<div class=".concat(t||"g6-component-contextmenu","></div>"));Object(n["c"])(e,{top:"0px",position:"absolute",visibility:"hidden"});var i=this.get("container");i||(i=this.get("graph").get("container")),Object(r["isString"])(i)&&(i=document.getElementById(i)),i.appendChild(e),this.set("menu",e)},e.prototype.onMenuShow=function(t){var e=this;t.preventDefault();var i=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&-1===i.indexOf(t.item.getType()))return void e.onMenuHide()}else if(-1===i.indexOf("canvas"))return void e.onMenuHide();var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),c=this.get("graph"),h=s(t,c);Object(r["isString"])(h)?o.innerHTML=h:o.innerHTML=h.outerHTML,this.removeMenuEventListener();var d=this.get("handleMenuClick");if(d){var l=function(e){d(e.target,t.item,c)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var p=c.get("width"),u=c.get("height"),g=o.getBoundingClientRect(),f=this.get("offsetX")||0,v=this.get("offsetY")||0,y=c.getContainer().offsetTop,m=c.getContainer().offsetLeft,x=t.canvasX+m+f,b=t.canvasY+y+v;x+g.width>p&&(x=t.canvasX-g.width-f+m),b+g.height>u&&(b=t.canvasY-g.height-v+y),b<0&&(b=0),Object(n["c"])(o,{top:"".concat(b,"px"),left:"".concat(x,"px"),visibility:"visible"});var k="click"===this.get("trigger"),S=function(t){k?k=!1:e.onMenuHide()};document.body.addEventListener("click",S),this.set("handler",S)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");if(t){var i=this.get("menu");i.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}e&&document.body.removeEventListener("click",e)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Object(n["c"])(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),Object(r["isString"])(e)&&(e=document.getElementById(e)),e.removeChild(t)}},e}(s["a"]);e["a"]=h},c9b7:function(t,e,i){"use strict";var n=i("7c8a"),r=i("8937"),a=i("effd"),o=i("1aef"),s=i.n(o),c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),h=.05;"undefined"!==typeof document&&s()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var d=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();var e=[],i=t.target;while(i){if(e.push(i),"HTML"===i.tagName)return e.push(document,window),e;i=i.parentElement}return e},l=function(t){function e(e){return t.call(this,e)||this}return c(e,t),e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},e.prototype.init=function(){var t=this,e=this.get("graph"),i=this.get("getContent"),a=i(e),o=a;Object(r["isString"])(a)&&(o=Object(n["b"])(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var c=this.get("container");c||(c=this.get("graph").get("container")),Object(r["isString"])(c)&&(c=document.getElementById(c)),c.appendChild(o),this.set("toolBar",o);var h=this.get("handleClick");o.addEventListener("click",(function(i){var n=d(i).filter((function(t){return"LI"===t.nodeName}));if(0!==n.length){var r=n[0].getAttribute("code");r&&(h?h(r,e):t.handleDefaultOperator(r))}}));var l=this.get("position");l&&Object(n["c"])(o,{top:"".concat(l.y,"px"),left:"".concat(l.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),n=document.querySelector('.g6-component-toolbar li[code="redo"]'),r=document.querySelector('.g6-component-toolbar li[code="redo"] svg');e&&i&&n&&r&&(e.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),n.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4"),t.on("stackchange",(function(t){var a=t.undoStack,o=t.redoStack,s=a.length,c=o.length;0===s?(e.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),i.removeAttribute("style")),0===c?(n.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),r.removeAttribute("style"))})))},e.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(e&&0!==e.length){var i=e.pop();if(i){var n=i.action;t.pushStack(n,Object(r["clone"])(i.data),"redo");var a=i.data.before;if("add"===n&&(a=i.data.after),!a)return;switch(n){case"visible":Object.keys(a).forEach((function(e){var i=a[e];i&&i.forEach((function(e){var i=t.findById(e.id);e.visible?t.showItem(i,!1):t.hideItem(i,!1)}))}));break;case"render":case"update":Object.keys(a).forEach((function(e){var i=a[e];i&&i.forEach((function(e){var i=t.findById(e.id);delete e.id,t.updateItem(i,e,!1),"combo"===i.getType()&&t.updateCombo(i)}))}));break;case"changedata":t.changeData(a,!1);break;case"delete":Object.keys(a).forEach((function(e){var i=a[e];i&&i.forEach((function(e){var i=e.itemType;delete e.itemType,t.addItem(i,e,!1)}))}));break;case"add":Object.keys(a).forEach((function(e){var i=a[e];i&&i.forEach((function(e){t.removeItem(e.id,!1)}))}));break;case"updateComboTree":Object.keys(a).forEach((function(e){var i=a[e];i&&i.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}));break;case"createCombo":var o=i.data.after.combos,s=o[o.length-1];Object.keys(a).forEach((function(e){var i=a[e];i&&i.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))})),t.removeItem(s.id,!1);break;case"uncombo":var c=a.combos[a.combos.length-1],h=a.nodes.concat(a.combos).map((function(t){return t.id})).filter((function(t){return t!==c.id}));t.createCombo(c,h,!1);break;case"layout":t.updateLayout(a,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(e&&0!==e.length){var i=e.pop();if(i){var n=i.action,a=i.data.after;if(t.pushStack(n,Object(r["clone"])(i.data)),"delete"===n&&(a=i.data.before),!a)return;switch(n){case"visible":Object.keys(a).forEach((function(e){var i=a[e];i&&i.forEach((function(e){var i=t.findById(e.id);e.visible?t.showItem(i,!1):t.hideItem(i,!1)}))}));break;case"render":case"update":Object.keys(a).forEach((function(e){var i=a[e];i&&i.forEach((function(e){var i=t.findById(e.id);delete e.id,t.updateItem(i,e,!1),"combo"===i.getType()&&t.updateCombo(i)}))}));break;case"changedata":t.changeData(a,!1);break;case"delete":a.edges&&a.edges.forEach((function(e){t.removeItem(e.id,!1)})),a.nodes&&a.nodes.forEach((function(e){t.removeItem(e.id,!1)})),a.combos&&a.combos.forEach((function(e){t.removeItem(e.id,!1)}));break;case"add":Object.keys(a).forEach((function(e){var i=a[e];i&&i.forEach((function(e){var i=e.itemType;delete e.itemType,t.addItem(i,e,!1)}))}));break;case"updateComboTree":Object.keys(a).forEach((function(e){var i=a[e];i&&i.forEach((function(e){t.updateComboTree(e.id,e.parentId,!1)}))}));break;case"createCombo":var o=a.combos[a.combos.length-1];t.createCombo(o,o.children.map((function(t){return t.id})),!1);break;case"uncombo":var s=i.data.before.combos,c=s[s.length-1];t.uncombo(c.id,!1);break;case"layout":t.updateLayout(a,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),e=t.getZoom(),i=1/(1-h*this.get("zoomSensitivity")),n=this.get("maxZoom")||t.get("maxZoom");i*e>n||t.zoomTo(e*i)},e.prototype.zoomIn=function(){var t=this.get("graph"),e=t.getZoom(),i=1-h*this.get("zoomSensitivity"),n=this.get("minZoom")||t.get("minZoom");i*e<n||t.zoomTo(e*i)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),Object(r["isString"])(e)&&(e=document.getElementById(e)),e.removeChild(t)}var i=this.get("handleClick");i&&t.removeEventListener("click",i)},e}(a["a"]);e["a"]=l},d24b:function(t,e,i){"use strict";var n=i("8937"),r=i("3822"),a=i("effd"),o=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),s=r["h"].pointLineDistance,c={stroke:"#FA8C16",lineWidth:1},h=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getDefaultCfgs=function(){return{line:c,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var e=t.item,i=e.get("delegateShape")||e,n=i.getBBox(),r=e.getModel(),a=r.x-n.x,o=r.y-n.y;this.show({x:n.minX+a,y:n.minY+o},{width:n.width,height:n.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,e=t.horizontalLines,i=t.verticalLines,n=t.itemAlignType,r=this.get("graph"),a=r.getNodes();a.forEach((function(t){var r=t.getBBox(),a=t.get("id");!0===n||"horizontal"===n?(e["".concat(a,"tltr")]=[r.minX,r.minY,r.maxX,r.minY,t],e["".concat(a,"lcrc")]=[r.minX,r.centerY,r.maxX,r.centerY,t],e["".concat(a,"blbr")]=[r.minX,r.maxY,r.maxX,r.maxY,t]):"center"===n&&(e["".concat(a,"lcrc")]=[r.minX,r.centerY,r.maxX,r.centerY,t]),!0===n||"vertical"===n?(i["".concat(a,"tlbl")]=[r.minX,r.minY,r.minX,r.maxY,t],i["".concat(a,"tcbc")]=[r.centerX,r.minY,r.centerX,r.maxY,t],i["".concat(a,"trbr")]=[r.maxX,r.minY,r.maxX,r.maxY,t]):"center"===n&&(i["".concat(a,"tcbc")]=[r.centerX,r.minY,r.centerX,r.maxY,t])}))},e.prototype.show=function(t,e){var i=Object(n["mix"])({},t);return this.itemAlign(t,e,i),t},e.prototype.itemAlign=function(t,e,i){var r=this,a=this._cfgs,o=a.horizontalLines,s=a.verticalLines,c=a.tolerance,h={x:i.x+e.width/2,y:i.y},d={x:i.x+e.width/2,y:i.y+e.height/2},l={x:i.x+e.width/2,y:i.y+e.height},p={x:i.x,y:i.y+e.height/2},u={x:i.x+e.width,y:i.y+e.height/2},g=[],f=[],v=null;if(this.clearAlignLine(),Object(n["each"])(o,(function(t){t[4].isVisible&&(g.push(r.getLineDisObject(t,h)),g.push(r.getLineDisObject(t,d)),g.push(r.getLineDisObject(t,l)))})),Object(n["each"])(s,(function(t){t[4].isVisible&&(f.push(r.getLineDisObject(t,p)),f.push(r.getLineDisObject(t,d)),f.push(r.getLineDisObject(t,u)))})),g.sort((function(t,e){return t.dis-e.dis})),f.sort((function(t,e){return t.dis-e.dis})),0!==g.length&&g[0].dis<c){t.y=g[0].line[1]-g[0].point.y+i.y,v={type:"item",horizontals:[g[0]]};for(var y=1;y<3;y++)g[0].dis===g[y].dis&&v.horizontals.push(g[y])}if(0!==f.length&&f[0].dis<c){t.x=f[0].line[0]-f[0].point.x+i.x,v?v.verticals=[f[0]]:v={type:"item",verticals:[f[0]]};for(y=1;y<3;y++)f[0].dis===f[y].dis&&v.verticals.push(f[y])}v&&(v.bbox=e,this.addAlignLine(v))},e.prototype.addAlignLine=function(t){var e=t.bbox,i=t.type,r=t.horizontals,a=t.verticals,o=this._cfgs,s=o.line,c=o.alignLines,h=this.get("graph"),d=h.get("group");"item"===i&&(r&&Object(n["each"])(r,(function(t){var i,r,a=t.line,o=t.point,h=(a[0]+a[2])/2;o.x<h?(i=o.x-e.width/2,r=Math.max(a[0],a[2])):(i=o.x+e.width/2,r=Math.min(a[0],a[2]));var l=Object(n["mix"])({x1:i,y1:a[1],x2:r,y2:a[1]},s),p=d.addShape("line",{attrs:l,capture:!1});c.push(p)})),a&&Object(n["each"])(a,(function(t){var i,r,a=t.line,o=t.point,h=(a[1]+a[3])/2;o.y<h?(i=o.y-e.height/2,r=Math.max(a[1],a[3])):(i=o.y+e.height/2,r=Math.min(a[1],a[3]));var l=Object(n["mix"])({x1:a[0],y1:i,x2:a[0],y2:r},s),p=d.addShape("line",{attrs:l,capture:!1});c.push(p)})))},e.prototype.getLineDisObject=function(t,e){return{line:t,point:e,dis:s(t,e)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;Object(n["each"])(t,(function(t){t.remove()})),t.length=0},e.prototype.destory=function(){var t=this._cfgs,e=t.horizontalLines,i=t.verticalLines,n=this.get("graph"),r=n.getNodes();r.forEach((function(t){var n=t.get("id");delete e["".concat(n,"tltr")],delete e["".concat(n,"lcrc")],delete e["".concat(n,"blbr")],delete i["".concat(n,"tlbl")],delete i["".concat(n,"tcbc")],delete i["".concat(n,"trbr")]})),this.clearAlignLine()},e}(a["a"]);e["a"]=h}}]);