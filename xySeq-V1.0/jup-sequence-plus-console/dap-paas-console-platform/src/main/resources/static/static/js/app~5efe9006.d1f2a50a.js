(window["jsonpPaas4"]=window["jsonpPaas4"]||[]).push([["app~5efe9006"],{"2e4c":function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getLayoutByName=t.unRegisterLayout=t.registerLayout=void 0;var i=n("7049");Object.defineProperty(t,"registerLayout",{enumerable:!0,get:function(){return i.registerLayout}}),Object.defineProperty(t,"unRegisterLayout",{enumerable:!0,get:function(){return i.unRegisterLayout}}),Object.defineProperty(t,"getLayoutByName",{enumerable:!0,get:function(){return i.getLayoutByName}}),r(n("ccec"),t)},3888:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FORCE_LAYOUT_TYPE_MAP=t.LAYOUT_MESSAGE=void 0,t.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},t.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},"455a":function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ConcentricLayout=void 0;var r=n("f271"),i=n("5bc9"),a=function(e){function t(t){var n=e.call(this)||this;return n.nodeSize=30,n.minNodeSpacing=10,n.nodeSpacing=10,n.preventOverlap=!1,n.equidistant=!1,n.startAngle=1.5*Math.PI,n.clockwise=!0,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.onLayoutEnd=function(){},n.updateCfg(t),n}return o(t,e),t.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},t.prototype.execute=function(){var e,t,n=this,o=n.nodes,i=n.edges,a=o.length;if(0!==a){n.width||"undefined"===typeof window||(n.width=window.innerWidth),n.height||"undefined"===typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var c=n.center;if(1===a)return o[0].x=c[0],o[0].y=c[1],void(null===(t=n.onLayoutEnd)||void 0===t||t.call(n));var u,d=n.nodeSize,s=n.nodeSpacing,h=[],f=0;u=(0,r.isArray)(d)?Math.max(d[0],d[1]):d,(0,r.isArray)(s)?f=Math.max(s[0],s[1]):(0,r.isNumber)(s)&&(f=s),o.forEach((function(e){h.push(e);var t=u;(0,r.isArray)(e.size)?t=Math.max(e.size[0],e.size[1]):(0,r.isNumber)(e.size)?t=e.size:(0,r.isObject)(e.size)&&(t=Math.max(e.size.width,e.size.height)),u=Math.max(u,t),(0,r.isFunction)(s)&&(f=Math.max(s(e),f))})),n.clockwise=void 0!==n.counterclockwise?!n.counterclockwise:n.clockwise;var l={},p={};if(h.forEach((function(e,t){l[e.id]=e,p[e.id]=t})),("degree"===n.sortBy||!(0,r.isString)(n.sortBy)||void 0===h[0][n.sortBy])&&(n.sortBy="degree",!(0,r.isNumber)(o[0].degree))){var v=(0,r.getDegree)(o.length,p,i);h.forEach((function(e,t){e.degree=v[t].all}))}h.sort((function(e,t){return t[n.sortBy]-e[n.sortBy]})),n.maxValueNode=h[0],n.maxLevelDiff=n.maxLevelDiff||n.maxValueNode[n.sortBy]/4;var y=[[]],g=y[0];h.forEach((function(e){if(g.length>0){var t=Math.abs(g[0][n.sortBy]-e[n.sortBy]);n.maxLevelDiff&&t>=n.maxLevelDiff&&(g=[],y.push(g))}g.push(e)}));var m=u+(f||n.minNodeSpacing);if(!n.preventOverlap){var b=y.length>0&&y[0].length>1,x=Math.min(n.width,n.height)/2-m,E=x/(y.length+(b?1:0));m=Math.min(m,E)}var M=0;if(y.forEach((function(e){var t=n.sweep;void 0===t&&(t=2*Math.PI-2*Math.PI/e.length);var o=e.dTheta=t/Math.max(1,e.length-1);if(e.length>1&&n.preventOverlap){var r=Math.cos(o)-Math.cos(0),i=Math.sin(o)-Math.sin(0),a=Math.sqrt(m*m/(r*r+i*i));M=Math.max(a,M)}e.r=M,M+=m})),n.equidistant){for(var w=0,O=0,_=0;_<y.length;_++){var T=y[_],S=T.r-O;w=Math.max(w,S)}O=0,y.forEach((function(e,t){0===t&&(O=e.r),e.r=O,O+=w}))}return y.forEach((function(e){var t=e.dTheta,o=e.r;e.forEach((function(e,r){var i=n.startAngle+(n.clockwise?1:-1)*t*r;e.x=c[0]+o*Math.cos(i),e.y=c[1]+o*Math.sin(i)}))})),n.onLayoutEnd&&n.onLayoutEnd(),{nodes:o,edges:i}}null===(e=n.onLayoutEnd)||void 0===e||e.call(n)},t.prototype.getType=function(){return"concentric"},t}(i.Base);t.ConcentricLayout=a},"5bc9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;var o=function(){function e(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return e.prototype.layout=function(e){return this.init(e),this.execute(!0)},e.prototype.init=function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[],this.comboEdges=e.comboEdges||[],this.hiddenNodes=e.hiddenNodes||[],this.hiddenEdges=e.hiddenEdges||[],this.hiddenCombos=e.hiddenCombos||[],this.vedges=e.vedges||[]},e.prototype.execute=function(e){},e.prototype.executeWithWorker=function(){},e.prototype.getDefaultCfg=function(){return{}},e.prototype.updateCfg=function(e){e&&Object.assign(this,e)},e.prototype.getType=function(){return"base"},e.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},e}();t.Base=o},"7c66":function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CircularLayout=void 0;var r=n("5bc9"),i=n("f271");function a(e,t,n,o){e.forEach((function(t,n){e[n].children=[],e[n].parent=[]})),o?t.forEach((function(t){var o=(0,i.getEdgeTerminal)(t,"source"),r=(0,i.getEdgeTerminal)(t,"target"),a=0;o&&(a=n[o]);var c=0;r&&(c=n[r]);var u=e[a].children,d=e[c].parent;u.push(e[c].id),d.push(e[a].id)})):t.forEach((function(t){var o=(0,i.getEdgeTerminal)(t,"source"),r=(0,i.getEdgeTerminal)(t,"target"),a=0;o&&(a=n[o]);var c=0;r&&(c=n[r]);var u=e[a].children,d=e[c].children;u.push(e[c].id),d.push(e[a].id)}))}function c(e,t,n){for(var o=n.length,r=0;r<o;r++){var a=(0,i.getEdgeTerminal)(n[r],"source"),c=(0,i.getEdgeTerminal)(n[r],"target");if(e.id===a&&t.id===c||t.id===a&&e.id===c)return!0}return!1}function u(e,t){var n=e.degree,o=t.degree;return n<o?-1:n>o?1:0}var d=function(e){function t(t){var n=e.call(this)||this;return n.radius=null,n.nodeSize=void 0,n.startRadius=null,n.endRadius=null,n.startAngle=0,n.endAngle=2*Math.PI,n.clockwise=!0,n.divisions=1,n.ordering=null,n.angleRatio=1,n.nodes=[],n.edges=[],n.nodeMap={},n.degrees=[],n.width=300,n.height=300,n.updateCfg(t),n}return o(t,e),t.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},t.prototype.execute=function(){var e,t=this,n=t.nodes,o=t.edges,r=n.length;if(0!==r){t.width||"undefined"===typeof window||(t.width=window.innerWidth),t.height||"undefined"===typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var a=t.center;if(1===r)return n[0].x=a[0],n[0].y=a[1],void(t.onLayoutEnd&&t.onLayoutEnd());var c=t.radius,u=t.startRadius,d=t.endRadius,s=t.divisions,h=t.startAngle,f=t.endAngle,l=t.angleRatio,p=t.ordering,v=t.clockwise,y=t.nodeSpacing,g=t.nodeSize,m=(f-h)/r,b={};n.forEach((function(e,t){b[e.id]=t})),t.nodeMap=b;var x=(0,i.getDegree)(n.length,b,o);if(t.degrees=x,y){var E=(0,i.getFuncByUnknownType)(10,y),M=(0,i.getFuncByUnknownType)(10,g),w=-1/0;n.forEach((function(e){var t=M(e);w<t&&(w=t)}));var O=0;n.forEach((function(e,t){O+=0===t?w||10:(E(e)||0)+(w||10)})),c=O/(2*Math.PI)}else c||u||d?!u&&d?u=d:u&&!d&&(d=u):c=t.height>t.width?t.width/2:t.height/2;var _=m*l,T=[];T="topology"===p?t.topologyOrdering():"topology-directed"===p?t.topologyOrdering(!0):"degree"===p?t.degreeOrdering():n;for(var S=Math.ceil(r/s),z=0;z<r;++z){var C=c;C||null===u||null===d||(C=u+z*(d-u)/(r-1)),C||(C=10+100*z/(r-1));var L=h+z%S*_+2*Math.PI/s*Math.floor(z/S);v||(L=f-z%S*_-2*Math.PI/s*Math.floor(z/S)),T[z].x=a[0]+Math.cos(L)*C,T[z].y=a[1]+Math.sin(L)*C,T[z].weight=x[z].all}return null===(e=t.onLayoutEnd)||void 0===e||e.call(t),{nodes:T,edges:this.edges}}t.onLayoutEnd&&t.onLayoutEnd()},t.prototype.topologyOrdering=function(e){void 0===e&&(e=!1);var t=this,n=t.degrees,o=t.edges,r=t.nodes,u=(0,i.clone)(r),d=t.nodeMap,s=[u[0]],h=[r[0]],f=[],l=r.length;f[0]=!0,a(u,o,d,e);var p=0;return u.forEach((function(e,t){if(0!==t)if(t!==l-1&&n[t].all===n[t+1].all&&!c(s[p],e,o)||f[t]){for(var i=s[p].children,a=!1,v=0;v<i.length;v++){var y=d[i[v]];if(n[y].all===n[t].all&&!f[y]){s.push(u[y]),h.push(r[d[u[y].id]]),f[y]=!0,a=!0;break}}var g=0;while(!a)if(f[g]||(s.push(u[g]),h.push(r[d[u[g].id]]),f[g]=!0,a=!0),g++,g===l)break}else s.push(e),h.push(r[d[e.id]]),f[t]=!0,p++})),h},t.prototype.degreeOrdering=function(){var e=this,t=e.nodes,n=[],o=e.degrees;return t.forEach((function(e,t){e.degree=o[t].all,n.push(e)})),n.sort(u),n},t.prototype.getType=function(){return"circular"},t}(r.Base);t.CircularLayout=d},"7d0a":function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ComboCombinedLayout=void 0;var i=n("3888"),a=n("5bc9"),c=n("f271"),u=n("ccec"),d=function(e){function t(t){var n=e.call(this)||this;return n.center=[0,0],n.nodes=[],n.edges=[],n.combos=[],n.comboEdges=[],n.comboPadding=10,n.comboTrees=[],n.updateCfg(t),n}return o(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.execute=function(){var e=this,t=e.nodes,n=e.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(e.onLayoutEnd&&e.onLayoutEnd());e.initVals(),e.run(),e.onLayoutEnd&&e.onLayoutEnd()}else e.onLayoutEnd&&e.onLayoutEnd()},t.prototype.run=function(){var e,t=this,n=t.nodes,o=t.edges,a=t.combos,d=t.comboEdges,s=t.center,h={};n.forEach((function(e){h[e.id]=e}));var f={};a.forEach((function(e){f[e.id]=e}));var l=t.getInnerGraphs(h),p=[],v=[],y={},g=!0;this.comboTrees.forEach((function(e){var t=l[e.id];if(t){var n=r(r({},e),{x:t.x||f[e.id].x,y:t.y||f[e.id].y,fx:t.fx||f[e.id].fx,fy:t.fy||f[e.id].fy,mass:t.mass||f[e.id].mass,size:t.size});v.push(n),isNaN(n.x)||0===n.x||isNaN(n.y)||0===n.y?(n.x=100*Math.random(),n.y=100*Math.random()):g=!1,p.push(e.id),(0,c.traverseTreeUp)(e,(function(t){return t.id!==e.id&&(y[t.id]=e.id),!0}))}})),n.forEach((function(e){if(!e.comboId||!f[e.comboId]){var t=r({},e);v.push(t),isNaN(t.x)||0===t.x||isNaN(t.y)||0===t.y?(t.x=100*Math.random(),t.y=100*Math.random()):g=!1,p.push(e.id)}}));var m=[];if(o.concat(d).forEach((function(e){var t=y[e.source]||e.source,n=y[e.target]||e.target;t!==n&&p.includes(t)&&p.includes(n)&&m.push({source:t,target:n})})),null===v||void 0===v?void 0:v.length){if(1===v.length)v[0].x=s[0],v[0].y=s[1];else{var b={nodes:v,edges:m},x=this.outerLayout||new u.GForceLayout({gravity:1,factor:4,linkDistance:function(e,t,n){var o,r,i=(((null===(o=t.size)||void 0===o?void 0:o[0])||30)+((null===(r=n.size)||void 0===r?void 0:r[0])||30))/2;return Math.min(1.5*i,700)}}),E=null===(e=x.getType)||void 0===e?void 0:e.call(x);if(x.updateCfg({center:s,kg:5,preventOverlap:!0,animate:!1}),g&&i.FORCE_LAYOUT_TYPE_MAP[E]){var M=v.length<100?new u.MDSLayout:new u.GridLayout;M.layout(b)}x.layout(b)}v.forEach((function(e){var t=l[e.id];if(t)t.visited=!0,t.x=e.x,t.y=e.y,t.nodes.forEach((function(t){t.x+=e.x,t.y+=e.y}));else{var n=h[e.id];n&&(n.x=e.x,n.y=e.y)}}))}for(var w=Object.keys(l),O=function(e){var t=w[e],n=l[t];if(!n)return"continue";n.nodes.forEach((function(e){n.visited||(e.x+=n.x||0,e.y+=n.y||0),h[e.id]&&(h[e.id].x=e.x,h[e.id].y=e.y)})),f[t]&&(f[t].x=n.x,f[t].y=n.y)},_=w.length-1;_>=0;_--)O(_);return{nodes:n,edges:o,combos:a,comboEdges:d}},t.prototype.getInnerGraphs=function(e){var t=this,n=t.comboTrees,o=t.nodeSize,i=t.edges,a=t.comboPadding,d=t.spacing,s={},h=this.innerLayout||new u.ConcentricLayout({type:"concentric",sortBy:"id"});return h.center=[0,0],h.preventOverlap=!0,h.nodeSpacing=d,(n||[]).forEach((function(t){(0,c.traverseTreeUp)(t,(function(t){var n,u=(null===a||void 0===a?void 0:a(t))||10;if((0,c.isArray)(u)&&(u=Math.max.apply(Math,u)),null===(n=t.children)||void 0===n?void 0:n.length){var d=t.children.map((function(t){if("combo"===t.itemType)return s[t.id];var n=e[t.id]||{};return r(r({},n),t)})),f=d.map((function(e){return e.id})),l={nodes:d,edges:i.filter((function(e){return f.includes(e.source)&&f.includes(e.target)}))},p=1/0;d.forEach((function(e){var t;e.size||(e.size=(null===(t=s[e.id])||void 0===t?void 0:t.size)||(null===o||void 0===o?void 0:o(e))||[30,30]),(0,c.isNumber)(e.size)&&(e.size=[e.size,e.size]),p>e.size[0]&&(p=e.size[0]),p>e.size[1]&&(p=e.size[1])})),h.layout(l);var v=(0,c.getLayoutBBox)(d),y=v.minX,g=v.minY,m=v.maxX,b=v.maxY,x={x:(m+y)/2,y:(b+g)/2};l.nodes.forEach((function(e){e.x-=x.x,e.y-=x.y}));var E=Math.max(m-y,p)+2*u,M=Math.max(b-g,p)+2*u;s[t.id]={id:t.id,nodes:d,size:[E,M]}}else if("combo"===t.itemType){var w=u?[2*u,2*u]:[30,30];s[t.id]={id:t.id,nodes:[],size:w}}return!0}))})),s},t.prototype.initVals=function(){var e,t,n=this,o=n.nodeSize,r=n.spacing;if(t=(0,c.isNumber)(r)?function(){return r}:(0,c.isFunction)(r)?r:function(){return 0},this.spacing=t,o)if((0,c.isFunction)(o))e=function(e){var n=o(e),r=t(e);if((0,c.isArray)(e.size)){var i=e.size[0]>e.size[1]?e.size[0]:e.size[1];return(i+r)/2}return((n||10)+r)/2};else if((0,c.isArray)(o)){var i=o[0]>o[1]?o[0]:o[1],a=i/2;e=function(e){return a+t(e)/2}}else{var u=o/2;e=function(e){return u+t(e)/2}}else e=function(e){var n=t(e);if(e.size){if((0,c.isArray)(e.size)){var o=e.size[0]>e.size[1]?e.size[0]:e.size[1];return(o+n)/2}if((0,c.isObject)(e.size)){o=e.size.width>e.size.height?e.size.width:e.size.height;return(o+n)/2}return(e.size+n)/2}return 10+n/2};this.nodeSize=e;var d,s=n.comboPadding;d=(0,c.isNumber)(s)?function(){return s}:(0,c.isArray)(s)?function(){return Math.max.apply(null,s)}:(0,c.isFunction)(s)?s:function(){return 0},this.comboPadding=d},t.prototype.getType=function(){return"comboCombined"},t}(a.Base);t.ComboCombinedLayout=d},c7ea:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ComboForceLayout=void 0;var r=n("5bc9"),i=n("f271"),a=function(e){function t(t){var n=e.call(this)||this;return n.center=[0,0],n.maxIteration=100,n.gravity=10,n.comboGravity=10,n.linkDistance=10,n.alpha=1,n.alphaMin=.001,n.alphaDecay=1-Math.pow(n.alphaMin,1/300),n.alphaTarget=0,n.velocityDecay=.6,n.edgeStrength=.6,n.nodeStrength=30,n.preventOverlap=!1,n.preventNodeOverlap=!1,n.preventComboOverlap=!1,n.collideStrength=void 0,n.nodeCollideStrength=.5,n.comboCollideStrength=.5,n.comboSpacing=20,n.comboPadding=10,n.optimizeRangeFactor=1,n.onTick=function(){},n.onLayoutEnd=function(){},n.depthAttractiveForceScale=1,n.depthRepulsiveForceScale=2,n.nodes=[],n.edges=[],n.combos=[],n.comboTrees=[],n.width=300,n.height=300,n.bias=[],n.nodeMap={},n.oriComboMap={},n.indexMap={},n.comboMap={},n.previousLayouted=!1,n.updateCfg(t),n}return o(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},t.prototype.execute=function(){var e=this,t=e.nodes,n=e.center;if(e.comboTree={id:"comboTreeRoot",depth:-1,children:e.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(e.onLayoutEnd&&e.onLayoutEnd());e.initVals(),e.run(),e.onLayoutEnd&&e.onLayoutEnd()}else e.onLayoutEnd&&e.onLayoutEnd()},t.prototype.run=function(){var e=this,t=e.nodes,n=e.previousLayouted?e.maxIteration/5:e.maxIteration;e.width||"undefined"===typeof window||(e.width=window.innerWidth),e.height||"undefined"===typeof window||(e.height=window.innerHeight);var o=e.center,r=e.velocityDecay,a=e.comboMap;e.previousLayouted||e.initPos(a);for(var c=function(n){var o=[];t.forEach((function(e,t){o[t]={x:0,y:0}})),e.applyCalculate(o),e.applyComboCenterForce(o),t.forEach((function(e,t){(0,i.isNumber)(e.x)&&(0,i.isNumber)(e.y)&&(e.x+=o[t].x*r,e.y+=o[t].y*r)})),e.alpha+=(e.alphaTarget-e.alpha)*e.alphaDecay,e.onTick()},u=0;u<n;u++)c(u);var d=[0,0];t.forEach((function(e){(0,i.isNumber)(e.x)&&(0,i.isNumber)(e.y)&&(d[0]+=e.x,d[1]+=e.y)})),d[0]/=t.length,d[1]/=t.length;var s=[o[0]-d[0],o[1]-d[1]];t.forEach((function(e,t){(0,i.isNumber)(e.x)&&(0,i.isNumber)(e.y)&&(e.x+=s[0],e.y+=s[1])})),e.combos.forEach((function(e){var t=a[e.id];t&&t.empty&&(e.x=t.cx||e.x,e.y=t.cy||e.y)})),e.previousLayouted=!0},t.prototype.initVals=function(){var e=this,t=e.edges,n=e.nodes,o=e.combos,r={},a={},c={};n.forEach((function(e,t){a[e.id]=e,c[e.id]=t})),e.nodeMap=a,e.indexMap=c;var u={};o.forEach((function(e){u[e.id]=e})),e.oriComboMap=u,e.comboMap=e.getComboMap();var d=e.preventOverlap;e.preventComboOverlap=e.preventComboOverlap||d,e.preventNodeOverlap=e.preventNodeOverlap||d;var s=e.collideStrength;s&&(e.comboCollideStrength=s,e.nodeCollideStrength=s),e.comboCollideStrength=e.comboCollideStrength?e.comboCollideStrength:0,e.nodeCollideStrength=e.nodeCollideStrength?e.nodeCollideStrength:0;for(var h=0;h<t.length;++h){var f=(0,i.getEdgeTerminal)(t[h],"source"),l=(0,i.getEdgeTerminal)(t[h],"target");r[f]?r[f]++:r[f]=1,r[l]?r[l]++:r[l]=1}var p=[];for(h=0;h<t.length;++h){f=(0,i.getEdgeTerminal)(t[h],"source"),l=(0,i.getEdgeTerminal)(t[h],"target");p[h]=r[f]/(r[f]+r[l])}this.bias=p;var v,y,g=e.nodeSize,m=e.nodeSpacing;if(y=(0,i.isNumber)(m)?function(){return m}:(0,i.isFunction)(m)?m:function(){return 0},this.nodeSpacing=y,g)if((0,i.isFunction)(g))v=function(e){return g(e)};else if((0,i.isArray)(g)){var b=g[0]>g[1]?g[0]:g[1],x=b/2;v=function(e){return x}}else{var E=g/2;v=function(e){return E}}else v=function(e){if(e.size){if((0,i.isArray)(e.size)){var t=e.size[0]>e.size[1]?e.size[0]:e.size[1];return t/2}if((0,i.isObject)(e.size)){t=e.size.width>e.size.height?e.size.width:e.size.height;return t/2}return e.size/2}return 10};this.nodeSize=v;var M,w=e.comboSpacing;M=(0,i.isNumber)(w)?function(){return w}:(0,i.isFunction)(w)?w:function(){return 0},this.comboSpacing=M;var O,_=e.comboPadding;O=(0,i.isNumber)(_)?function(){return _}:(0,i.isArray)(_)?function(){return Math.max.apply(null,_)}:(0,i.isFunction)(_)?_:function(){return 0},this.comboPadding=O;var T,S=this.linkDistance;S||(S=10),T=(0,i.isNumber)(S)?function(e){return S}:S,this.linkDistance=T;var z,C=this.edgeStrength;C||(C=1),z=(0,i.isNumber)(C)?function(e){return C}:C,this.edgeStrength=z;var L,N=this.nodeStrength;N||(N=30),L=(0,i.isNumber)(N)?function(e){return N}:N,this.nodeStrength=L},t.prototype.initPos=function(e){var t=this,n=t.nodes;n.forEach((function(t,n){var o=t.comboId,r=e[o];o&&r?(t.x=r.cx+100/(n+1),t.y=r.cy+100/(n+1)):(t.x=100/(n+1),t.y=100/(n+1))}))},t.prototype.getComboMap=function(){var e=this,t=e.nodeMap,n=e.comboTrees,o=e.oriComboMap,r={};return(n||[]).forEach((function(n){var a=[];(0,i.traverseTreeUp)(n,(function(n){if("node"===n.itemType)return!0;if(!o[n.id])return!0;if(void 0===r[n.id]){var c={id:n.id,name:n.id,cx:0,cy:0,count:0,depth:e.oriComboMap[n.id].depth||0,children:[]};r[n.id]=c}var u=n.children;u&&u.forEach((function(e){if(!r[e.id]&&!t[e.id])return!0;a.push(e)}));var d=r[n.id];if(d.cx=0,d.cy=0,0===a.length){d.empty=!0;var s=o[n.id];d.cx=s.x,d.cy=s.y}return a.forEach((function(e){if(d.count++,"node"!==e.itemType){var n=r[e.id];return(0,i.isNumber)(n.cx)&&(d.cx+=n.cx),void((0,i.isNumber)(n.cy)&&(d.cy+=n.cy))}var o=t[e.id];o&&((0,i.isNumber)(o.x)&&(d.cx+=o.x),(0,i.isNumber)(o.y)&&(d.cy+=o.y))})),d.cx/=d.count||1,d.cy/=d.count||1,d.children=a,!0}))})),r},t.prototype.applyComboCenterForce=function(e){var t=this,n=t.gravity,o=t.comboGravity||n,r=this.alpha,a=t.comboTrees,c=t.indexMap,u=t.nodeMap,d=t.comboMap;(a||[]).forEach((function(t){(0,i.traverseTreeUp)(t,(function(t){if("node"===t.itemType)return!0;var n=d[t.id];if(!n)return!0;var a=d[t.id],s=(a.depth+1)/10*.5,h=a.cx,f=a.cy;return a.cx=0,a.cy=0,a.children.forEach((function(t){if("node"!==t.itemType){var n=d[t.id];return n&&(0,i.isNumber)(n.cx)&&(a.cx+=n.cx),void(n&&(0,i.isNumber)(n.cy)&&(a.cy+=n.cy))}var l=u[t.id],p=l.x-h||.005,v=l.y-f||.005,y=Math.sqrt(p*p+v*v),g=c[l.id],m=o*r/y*s;e[g].x-=p*m,e[g].y-=v*m,(0,i.isNumber)(l.x)&&(a.cx+=l.x),(0,i.isNumber)(l.y)&&(a.cy+=l.y)})),a.cx/=a.count||1,a.cy/=a.count||1,!0}))}))},t.prototype.applyCalculate=function(e){var t=this,n=t.comboMap,o=t.nodes,r={};o.forEach((function(e,t){o.forEach((function(n,o){if(!(t<o)){var i=e.x-n.x||.005,a=e.y-n.y||.005,c=i*i+a*a,u=Math.sqrt(c);c<1&&(c=u),r["".concat(e.id,"-").concat(n.id)]={vx:i,vy:a,vl2:c,vl:u},r["".concat(n.id,"-").concat(e.id)]={vl2:c,vl:u,vx:-i,vy:-a}}}))})),t.updateComboSizes(n),t.calRepulsive(e,r),t.calAttractive(e,r);var i=t.preventComboOverlap;i&&t.comboNonOverlapping(e,n)},t.prototype.updateComboSizes=function(e){var t=this,n=t.comboTrees,o=t.nodeMap,r=t.nodeSize,a=t.comboSpacing,c=t.comboPadding;(n||[]).forEach((function(n){var u=[];(0,i.traverseTreeUp)(n,(function(n){if("node"===n.itemType)return!0;var d=e[n.id];if(!d)return!1;var s=n.children;s&&s.forEach((function(t){(e[t.id]||o[t.id])&&u.push(t)})),d.minX=1/0,d.minY=1/0,d.maxX=-1/0,d.maxY=-1/0,u.forEach((function(e){if("node"!==e.itemType)return!0;var t=o[e.id];if(!t)return!0;var n=r(t),i=t.x-n,a=t.y-n,c=t.x+n,u=t.y+n;d.minX>i&&(d.minX=i),d.minY>a&&(d.minY=a),d.maxX<c&&(d.maxX=c),d.maxY<u&&(d.maxY=u)}));var h=t.oriComboMap[n.id].size||10;(0,i.isArray)(h)&&(h=h[0]);var f=Math.max(d.maxX-d.minX,d.maxY-d.minY,h);return d.r=f/2+a(d)/2+c(d),!0}))}))},t.prototype.comboNonOverlapping=function(e,t){var n=this,o=n.comboTree,r=n.comboCollideStrength,a=n.indexMap,c=n.nodeMap;(0,i.traverseTreeUp)(o,(function(n){if(!t[n.id]&&!c[n.id]&&"comboTreeRoot"!==n.id)return!1;var o=n.children;return o&&o.length>1&&o.forEach((function(n,i){if("node"===n.itemType)return!1;var u=t[n.id];u&&o.forEach((function(o,d){if(i<=d)return!1;if("node"===o.itemType)return!1;var s=t[o.id];if(!s)return!1;var h=u.cx-s.cx||.005,f=u.cy-s.cy||.005,l=h*h+f*f,p=u.r||1,v=s.r||1,y=p+v,g=v*v,m=p*p;if(l<y*y){var b=n.children;if(!b||0===b.length)return!1;var x=o.children;if(!x||0===x.length)return!1;var E=Math.sqrt(l),M=(y-E)/E*r,w=h*M,O=f*M,_=g/(m+g),T=1-_;b.forEach((function(t){if("node"!==t.itemType)return!1;if(c[t.id]){var n=a[t.id];x.forEach((function(t){if("node"!==t.itemType)return!1;if(!c[t.id])return!1;var o=a[t.id];e[n].x+=w*_,e[n].y+=O*_,e[o].x-=w*T,e[o].y-=O*T}))}}))}}))})),!0}))},t.prototype.calRepulsive=function(e,t){var n=this,o=n.nodes,r=n.width*n.optimizeRangeFactor,i=n.nodeStrength,a=n.alpha,c=n.nodeCollideStrength,u=n.preventNodeOverlap,d=n.nodeSize,s=n.nodeSpacing,h=n.depthRepulsiveForceScale,f=n.center;o.forEach((function(l,p){if(l.x&&l.y){if(f){var v=n.gravity,y=l.x-f[0]||.005,g=l.y-f[1]||.005,m=Math.sqrt(y*y+g*g);e[p].x-=y*v*a/m,e[p].y-=g*v*a/m}o.forEach((function(n,o){if(p!==o&&n.x&&n.y){var f=t["".concat(l.id,"-").concat(n.id)],v=f.vl2,y=f.vl;if(!(y>r)){var g=t["".concat(l.id,"-").concat(n.id)],m=g.vx,b=g.vy,x=Math.log(Math.abs(n.depth-l.depth)/10)+1||1;x=x<1?1:x,n.comboId!==l.comboId&&(x+=1);var E=x?Math.pow(h,x):1,M=i(n)*a/v*E;if(e[p].x+=m*M,e[p].y+=b*M,p<o&&u){var w=d(l)+s(l)||1,O=d(n)+s(n)||1,_=w+O;if(v<_*_){var T=(_-y)/y*c,S=O*O,z=S/(w*w+S),C=m*T,L=b*T;e[p].x+=C*z,e[p].y+=L*z,z=1-z,e[o].x-=C*z,e[o].y-=L*z}}}}}))}}))},t.prototype.calAttractive=function(e,t){var n=this,o=n.edges,r=n.linkDistance,a=n.alpha,c=n.edgeStrength,u=n.bias,d=n.depthAttractiveForceScale;o.forEach((function(o,s){var h=(0,i.getEdgeTerminal)(o,"source"),f=(0,i.getEdgeTerminal)(o,"target");if(h&&f&&h!==f){var l=n.indexMap[h],p=n.indexMap[f],v=n.nodeMap[h],y=n.nodeMap[f];if(v&&y){var g=v.depth===y.depth?0:Math.log(Math.abs(v.depth-y.depth)/10);v.comboId===y.comboId&&(g/=2);var m=g?Math.pow(d,g):1;if(v.comboId!==y.comboId&&1===m?m=d/2:v.comboId===y.comboId&&(m=2),(0,i.isNumber)(y.x)&&(0,i.isNumber)(v.x)&&(0,i.isNumber)(y.y)&&(0,i.isNumber)(v.y)){var b=t["".concat(f,"-").concat(h)],x=b.vl,E=b.vx,M=b.vy,w=(x-r(o))/x*a*c(o)*m,O=E*w,_=M*w,T=u[s];e[p].x-=O*T,e[p].y-=_*T,e[l].x+=O*(1-T),e[l].y+=_*(1-T)}}}}))},t.prototype.getType=function(){return"comboForce"},t}(r.Base);t.ComboForceLayout=a}}]);