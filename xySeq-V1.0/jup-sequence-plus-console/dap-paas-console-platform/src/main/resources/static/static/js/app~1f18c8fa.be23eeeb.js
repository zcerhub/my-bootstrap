(window["jsonpPaas4"]=window["jsonpPaas4"]||[]).push([["app~1f18c8fa"],{2068:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:"新增灾备",visible:e.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",attrs:{model:e.formData,"label-width":"120px",rules:e.rules}},[t("el-form-item",{attrs:{label:"源集群"}},[t("span",[e._v(e._s(e.formData.sourceClusterName))])]),t("el-form-item",{attrs:{label:"备集群",prop:"toClusterId"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择备集群"},model:{value:e.formData.toClusterId,callback:function(t){e.$set(e.formData,"toClusterId",t)},expression:"formData.toClusterId"}},e._l(e.clusterList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.clusterName,value:e.id}})})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.loadingConfirm},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},n=[],o=(a("d3b7"),a("999d")),l=a("ff51"),r={components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,refresh:Function,rowData:{type:Object,default:function(){return{}}}},data:function(){return{formData:{sourceClusterName:"",toClusterId:""},rules:{toClusterId:[{required:!0,trigger:"blur",message:"请选择备集群"}]},clusterList:[],loadingConfirm:!1}},computed:{visible:{get:function(){return this.show},set:function(e){this.$emit("change",!1)}},groupId:function(){return this.$route.query.id},clusterId:function(){var e;return null===(e=this.rowData)||void 0===e?void 0:e.id}},watch:{},created:function(){},mounted:function(){this.formData.sourceClusterName=this.rowData.clusterName,this.getTargetCluster()},methods:{getTargetCluster:function(){var e=this,t={groupId:this.groupId,clusterId:this.clusterId};Object(o["j"])(t).then((function(t){e.clusterList=Object(l["a"])(null===t||void 0===t?void 0:t.data)?t.data:[]})).catch((function(e){}))},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this;this.$refs.formRef.validate((function(t){if(t){var a={groupId:e.groupId,fromClusterId:e.clusterId,toClusterId:e.formData.toClusterId};e.loadingConfirm=!0,Object(o["e"])(a).then((function(t){t&&200===t.code&&(e.$message.success(t.data),e.$emit("change",!1),e.refresh())})).finally((function(){e.loadingConfirm=!1}))}}))}}},s=r,c=a("2877"),u=Object(c["a"])(s,i,n,!1,null,"c11ba08c",null);t["default"]=u.exports},"30e5":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-row",e._l(e.list,(function(a,i){return t("el-col",{key:i,attrs:{span:6}},[t("div",{staticClass:"top-box"},[t("img",{attrs:{src:a.src,alt:"",width:"35"}}),t("ul",[t("li",{staticClass:"top-item-value",style:{color:a.color}},[e._v(" "+e._s(e.topData[a.value])+" ")]),t("li",{staticClass:"top-item-label"},[e._v(e._s(a.label))])])])])})),1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.clusterList.length>0?t("el-row",{attrs:{gutter:15}},e._l(e.clusterList,(function(a){return t("el-col",{key:a.id,staticClass:"mb-15 cluster-card-item",attrs:{span:6}},[t("div",{staticClass:"item-card"},[t("el-tag",{staticClass:"item-card-status",attrs:{type:e.getTagType(a.clusterStatus),effect:"dark"}},[e._v(e._s(e._f("F_message_clusterStatusOptions")(a.clusterStatus)))]),t("header",{staticClass:"mb-10"},[t("span",{staticClass:"item-title",attrs:{title:a.clusterName}},[e._v(e._s(a.clusterName||"集群"))])]),t("el-descriptions",{staticStyle:{padding:"15px"},attrs:{column:1,size:"small",labelStyle:{width:"100px",color:"#999"}}},[t("el-descriptions-item",{attrs:{label:"NameSvr节点"}},[e._v(e._s(a.nameServerNumbers)+" ")]),t("el-descriptions-item",{attrs:{label:"机器数"}},[t("el-link",{ref:"",refInFor:!0,attrs:{type:"primary"},on:{click:function(t){return e.linkPage("/rocketmq/clusterMonitoring/machineMonitoring",a)}}},[e._v(" "+e._s(a.machineNumbers)+" ")])],1),t("el-descriptions-item",{attrs:{label:"主节点"}},[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.linkPage("/rocketmq/clusterManagement/rocketmq-node-manage",a)}}},[e._v(" "+e._s(a.masterNumbers)+" ")])],1),t("el-descriptions-item",{attrs:{label:"从节点"}},[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.linkPage("/rocketmq/clusterManagement/rocketmq-node-manage",a)}}},[e._v(" "+e._s(a.slaveNumbers)+" ")])],1),t("el-descriptions-item",{attrs:{label:"RocketMQ版本"}},[e._v(e._s(a.version))]),t("el-descriptions-item",{attrs:{label:"集群模式"}},[e._v(e._s(a.clusterMode))]),t("el-descriptions-item",{attrs:{label:"Topic数量"}},[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.linkPage("/rocketmq/clusterManagement/topicManagement",a)}}},[e._v(" "+e._s(a.topicNumbers)+" ")])],1),t("el-descriptions-item",{attrs:{label:"Group数量"}},[e._v(e._s(a.groupNumbers))]),t("el-descriptions-item",{attrs:{label:"实时消息堆积"}},[e._v(e._s(a.messagesStacked))]),t("el-descriptions-item",{attrs:{label:"死信数量"}},[e._v(e._s(a.deadLetterNumbers))])],1)],1)])})),1):t("el-empty")],1)],1)},n=[],o=(a("14d9"),a("d3b7"),a("1bf2"),a("159b"),a("0385")),l=a("e8b2"),r=a("ec41"),s=a("bc59"),c=a("49bb"),u={name:"cache-cluster-monitor",components:{},mixins:[],props:{},data:function(){return{list:[{iconClass:"clusterConfiguration",label:"Rocketmq集群",src:a("e796"),value:"cluster",color:"#1d70f5"},{icon:"el-icon-circle-check",label:"正常集群",src:a("e18b"),value:"normal",color:"#67c23a"},{icon:"el-icon-circle-close",label:"异常集群",src:a("1fe8"),value:"abnormal",color:"#f56c6c"},{icon:"el-icon-warning-outline",label:"告警集群",src:a("84b1"),value:"warning",color:"#e6a23c"}],topData:d(),clusterList:[],loading:!1}},computed:{},watch:{},created:function(){this.getData()},mounted:function(){},methods:{getData:function(){var e=this;Object(o["b"])().then((function(t){Object(l["a"])(t.data)&&(e.topData=d(t.data))})).catch((function(e){})),this.loading=!0,Object(o["a"])({pageNo:1,pageSize:100}).then((function(t){e.clusterList=Object(r["a"])(t,"data.data",[]);Object(r["a"])(t,"data.ctd")})).finally((function(){e.loading=!1}))},linkPage:function(e,t){this.$router.push({path:e,query:{id:t.clusterId,machineRoomName:t.machineRoomName,clusterMode:t.clusterMode,clusterName:t.clusterName}})},routelink:function(e){this.$router.push({path:"/clusterMonitoring/rocketmq-node-monitor",query:{id:e.id,clusterName:e.clusterName}})},routelinkManage:function(){var e="/clusterManagement/cluster/index";this.$router.push({path:e})},getTagType:function(e){return Object(c["g"])(e,"messageClusterStatusOptions",["value","type"])}}};function d(e){var t="-",a={cluster:t,normal:t,abnormal:t,warning:t},i=["RocketMQ集群","正常集群","异常集群","告警集群"];return e&&Reflect.ownKeys(a).forEach((function(t,n){Object(s["a"])(e,i[n])&&(a[t]=e[i[n]])})),a}var p=u,f=(a("39df"),a("2877")),m=Object(f["a"])(p,i,n,!1,null,"2c3d26a4",null);t["default"]=m.exports},"39df":function(e,t,a){"use strict";a("e5ff")},"4b3b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("div",{staticClass:"name-container"},[t("search-form",{attrs:{searchConfig:e.searchConfig},on:{onSearch:e.onSearch}}),t("button-list",{attrs:{data:e.buttonList}}),t("tableView",{ref:"tableView",attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,total:e.tableConfig.pagination.totalCount,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage,operate:e.getIndex}}),e.showDetail?t("ConfigDetail",{attrs:{rowData:e.rowData,refresh:e.getList},model:{value:e.showDetail,callback:function(t){e.showDetail=t},expression:"showDetail"}}):e._e()],1)])},n=[],o=a("5530"),l=(a("b0c0"),a("d3b7"),a("a335")),r=a("082f"),s=(a("cfcc"),a("ec41")),c=a("ff51"),u={filters:{},components:{ConfigDetail:l["default"]},data:function(){return{showDialog:!1,showDetail:!1,showPasswordDialog:!1,buttonList:[{label:"新增",type:"add",click:this.addInfo}],tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"name",label:"名称",align:"center"},{prop:"moduleType",label:"类型",align:"center"},{prop:"updateUserName",label:"更新人",align:"center"},{prop:"updateDate",label:"更新时间",align:"center"}],operate:{width:220,list:[{label:"编辑",id:"edit"},{label:"删除",id:"delete"}]}},searchConfig:{searchData:{name:""},searchItem:[{type:"input",label:"名称",prop:"name"}],rules:{}}}},mounted:function(){this.getList()},methods:{getList:function(){var e=this,t={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:Object(o["a"])(Object(o["a"])({},this.searchConfig.searchData),{},{componentType:"RocketMQ"})};this.tableConfig.loading=!0,Object(r["f"])(t).then((function(t){var a,i=Object(s["a"])(t,"data.data");e.tableConfig.tableData=Object(c["a"])(i)?i:[],e.tableConfig.pagination.totalCount=null!==(a=Object(s["a"])(t,"data.totalCount"))&&void 0!==a?a:0})).finally((function(){e.tableConfig.loading=!1}))},addInfo:function(){this.showDetail=!0,this.rowData=null},onSearch:function(){this.tableConfig.pagination.pageNo=1,this.getList()},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},getIndex:function(e){var t=this,a=(e.index,e.row),i=e.operate;"delete"===i.id?this.$confirm("确定要删除【".concat(a.name,"】吗?"),{type:"warning"}).then((function(){t.tableConfig.loading=!0,Object(r["a"])(a.id).then((function(e){t.$message.success("删除成功"),t.getList()})).catch((function(e){}))})).catch((function(e){})).finally((function(){t.tableConfig.loading=!1})):"edit"===i.id&&(this.rowData=a,this.showDetail=!0)}}},d=u,p=a("2877"),f=Object(p["a"])(d,i,n,!1,null,"0fda829b",null);t["default"]=f.exports},"4ecd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"formRef",attrs:{model:e.formData,rules:e.rules,inline:!0}},[t("el-form-item",{attrs:{prop:"groupId",label:"架构"}},[t("el-select",{on:{change:e.changeGroupId},model:{value:e.formData.groupId,callback:function(t){e.$set(e.formData,"groupId",t)},expression:"formData.groupId"}},e._l(e.archList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{size:"small"},on:{click:e.clickSearch}},[e._v("刷新")])],1)],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中,请稍候......"}},[e.linksData.length>0?t("G6Dagre",{attrs:{chartData:e.chartData,height:"500px",width:"100%"},on:{"click-node":e.clickNode}}):t("el-empty")],1)],1)},n=[],o=a("5530"),l=(a("14d9"),a("d3b7"),a("07ac"),a("159b"),a("999d")),r=a("ff51"),s=a("ec41"),c=a("bc59"),u=a("ecbe"),d={components:{G6Dagre:u["default"]},data:function(){return{formData:{groupId:""},rules:{groupId:[{required:!0,message:"请选择架构",trigger:"change"}]},archList:[],chartData:{edges:[],nodes:[],combos:[]},linksData:[],loading:!1}},created:function(){this.getArch()},methods:{getArch:function(){var e=this;Object(l["n"])().then((function(t){e.archList=Object(r["a"])(Object(s["a"])(t,"data"))?t.data:[]})).catch((function(e){}))},changeGroupId:function(e){e&&this.clickSearch()},clickSearch:function(){var e=this;this.$refs.formRef.validate((function(t){t&&e.getData()}))},getData:function(){var e=this;this.loading=!0,this.linksData=[],this.chartData.combos=[],this.chartData.nodes=[],this.chartData.edges=[],Object(l["m"])(this.formData.groupId).then((function(t){if(t){var a=Object(r["a"])(null===t||void 0===t?void 0:t.data)?t.data:[];e.linksData=a;var i={},n={fill:"#fff",stroke:"#C4E3B2",lineWidth:1,shadowBlur:0,radius:7},l=[],s=[];a.forEach((function(e){var t=e.cluster,a=e.lines;t.cityName&&!Object(c["a"])(i,t.cityName)&&(i[t.cityName]={id:t.cityName,label:t.cityName,style:n});var u="",d="";l.push(Object(o["a"])(Object(o["a"])({},t),{},{id:t.id,value:t.clusterName,label:t.clusterName,comboId:t.cityName,statusLabel:u,syncMethodLabel:d})),t.id&&"-"!==t.id&&Object(r["a"])(a)&&a.forEach((function(e){var a="";switch(e.status){case"red":a="同步异常";break;case"green":a="正常";break;case"yellow":a="部分异常";break}s.push({source:t.id,target:e.clusterId,label:a,style:{stroke:e.status}})}))})),e.chartData.nodes=l,e.chartData.edges=s,e.chartData.combos=Object.values(i)}})).catch((function(e){})).finally((function(){e.loading=!1}))},clickNode:function(e){}}},p=d,f=a("2877"),m=Object(f["a"])(p,i,n,!1,null,"5eafd77c",null);t["default"]=m.exports},5556:function(e,t,a){},"5bd7":function(e,t,a){"use strict";a("780e")},"761d":function(e,t,a){"use strict";a("5556")},"780e":function(e,t,a){},"922f":function(e,t,a){},"9d90":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("header",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickClusterAdd("alive")}}},[e._v("添加多活集群")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickClusterAdd("backup")}}},[e._v("添加冷备集群")]),t("el-button",{on:{click:e.clickRefresh}},[e._v("刷新")])],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在拼命加载......"}},[e.cardData&&e.cardData.length>0?t("el-row",{staticClass:"item-ul mt-15 mb-15",attrs:{gutter:10}},e._l(e.cardData,(function(a,i){return t("el-col",{key:i,staticClass:"mb-15",attrs:{span:8}},[t("div",{staticClass:"item-li"},[a.cluster?t("div",{staticClass:"item-machine mb-10"},[t("header",{staticClass:"flex-inline-between"},[t("header-line",[t("span",{staticClass:"mr-10"},[e._v(e._s(a.cluster.cityName)+e._s(e._f("F_message_multiple_mode")(a.cluster.multiClusterMode))+"机房:")]),e._v(" "+e._s(a.cluster.machineRoomName)+" ")]),"alive"===a.cluster.multiClusterMode?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickRecovery(a.cluster)}}},[e._v("新增灾备")]):e._e()],1),t("div",{staticClass:"item-cluster"},[t("div",{staticClass:"flex-inline-between mb-20"},[t("span",{staticStyle:{"font-size":"12px"}},[e._v("集群:"+e._s(a.cluster.clusterName))]),t("span",[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clickDeleteCluster(a.cluster)}}},[e._v("删除")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clickNodeManage(a.cluster)}}},[e._v("节点管理")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clickClusterMonitor(a.cluster)}}},[e._v("集群监控")])],1)]),t("el-descriptions",{attrs:{column:2,contentClassName:"descriptions-bg"}},[t("el-descriptions-item",{attrs:{label:"集群模式",span:2}},[t("el-tag",{attrs:{size:"mini"}},[e._v(e._s(a.cluster.clusterMode))])],1),t("el-descriptions-item",{attrs:{label:"NameServer节点"}},[e._v(" "+e._s(a.cluster.namesrvNumber)+" ")]),t("el-descriptions-item",{attrs:{label:"运行中"}},[e._v(" "+e._s(a.cluster.runningNamesrvNumber)+" ")]),t("el-descriptions-item",{attrs:{label:"Broker主节点"}},[e._v(" "+e._s(a.cluster.brokerMasterNumber)+" ")]),t("el-descriptions-item",{attrs:{label:"运行中"}},[e._v(" "+e._s(a.cluster.runningBrokerMasterNumber)+" ")]),t("el-descriptions-item",{attrs:{label:"Broker从节点"}},[e._v(" "+e._s(a.cluster.brokerSlaveNumber)+" ")]),t("el-descriptions-item",{attrs:{label:"运行中"}},[e._v(" "+e._s(a.cluster.runningBrokerSlaveNumber)+" ")])],1)],1)]):e._e(),t("div",{staticClass:"item-backup"},[a.backupInstanceStatusVoList&&a.backupInstanceStatusVoList.length>0?t("el-row",{attrs:{gutter:10}},e._l(a.backupInstanceStatusVoList,(function(i,n){return t("el-col",{key:n,staticClass:"item-backup-entry",attrs:{span:24}},[t("div",{staticClass:"item-backup-entry-card"},[t("div",{staticClass:"mb-10 pb-10",staticStyle:{"font-size":"12px","border-bottom":"1px solid #d8d8d8"}},[t("span",{staticClass:"mr-10"},[e._v("灾备节点:")]),t("span",[e._v(e._s(i.belongClusterName))])]),t("el-descriptions",{attrs:{column:1}},[t("el-descriptions-item",{attrs:{label:"状态"}},[t("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(i.status))])],1),t("el-descriptions-item",{attrs:{label:"备份节点数"}},[e._v(" "+e._s(i.backupInstanceNumber)+" ")]),t("el-descriptions-item",{attrs:{label:"运行中"}},[e._v(" "+e._s(i.runningInstanceNumber)+" ")])],1),t("footer",[t("el-button",{attrs:{size:"mini",round:"",disabled:i.loadingStart},on:{click:function(t){return e.clickBackFooter("start",i,a.cluster)}}},[e._v("启动")]),t("el-button",{attrs:{size:"mini",round:"",disabled:i.loadingStop},on:{click:function(t){return e.clickBackFooter("stop",i,a.cluster)}}},[e._v("停止")]),t("el-button",{attrs:{size:"mini",disabled:i.loadingActivation,round:""},on:{click:function(t){return e.clickBackFooter("activation",i,a.cluster)}}},[e._v("激活")]),t("el-button",{attrs:{size:"mini",disabled:i.loadingBack_cut,round:""},on:{click:function(t){return e.clickBackFooter("back_cut",i,a.cluster)}}},[e._v("回切")]),t("el-button",{attrs:{size:"mini",disabled:i.loadingDelete,round:""},on:{click:function(t){return e.clickBackFooter("delete",i,a.cluster)}}},[e._v("删除")])],1)],1)])})),1):t("el-empty",[t("span",{staticStyle:{"font-size":"12px"},attrs:{slot:"description"},slot:"description"},[e._v("暂无灾备节点")])])],1)])])})),1):t("el-empty")],1),e.visible?t("MultipleManageAdd",{attrs:{type:e.currentType,refresh:e.getCard},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}):e._e(),e.visibleRecovery?t("MultipleDisasterRecoveryAdd",{attrs:{rowData:e.rowData,refresh:e.getCard},model:{value:e.visibleRecovery,callback:function(t){e.visibleRecovery=t},expression:"visibleRecovery"}}):e._e(),e.deployVisible?t("el-dialog-limit",{attrs:{title:"日志信息",visible:e.deployVisible,size:"medium"},on:{"update:visible":function(t){e.deployVisible=t},close:e.logClickCancel}},[t("my-xterm",{ref:"xterm",attrs:{terminal:e.terminal,socketUrl:e.socketUrl}})],1):e._e()],1)},n=[],o=(a("99af"),a("14d9"),a("d3b7"),a("159b"),a("999d")),l=a("ff51"),r=a("49bb"),s=a("b2cc"),c=a("2068"),u={name:"ComponentName",components:{MultipleManageAdd:s["default"],MultipleDisasterRecoveryAdd:c["default"]},filters:{F_message_multiple_mode:function(e){return Object(r["g"])(e,"multiClusterModeOptions")}},mixins:[],props:{},data:function(){return{deployVisible:!1,terminal:{pid:1,name:"terminal"},socketUrl:"",cardData:[],loading:!1,visible:!1,currentType:"alive",visibleRecovery:!1,rowData:null}},computed:{groupId:function(){return this.$route.query.id}},watch:{},created:function(){},mounted:function(){this.getCard()},methods:{logClickCancel:function(){this.deployVisible=!1},socketStart:function(e){this.socketUrl="/echo?logId=".concat(e.id),this.deployVisible=!0},getCard:function(){var e=this;this.loading=!0,this.cardData=[],Object(o["l"])(this.groupId).then((function(t){var a=Object(l["a"])(null===t||void 0===t?void 0:t.data)?t.data:[];a.forEach((function(e){Object(l["a"])(e.backupInstanceStatusVoList)&&e.backupInstanceStatusVoList.forEach((function(e){e.loadingStart=!1,e.loadingStop=!1,e.loadingActivation=!1,e.loadingBack_cut=!1,e.loadingDelete=!1}))})),e.cardData=a})).catch((function(e){})).finally((function(){e.loading=!1}))},clickRefresh:function(){this.getCard()},clickRecovery:function(e){this.rowData=e,this.visibleRecovery=!0},clickClusterAdd:function(e){this.currentType=e,this.visible=!0},clickBackFooter:function(e,t,a){var i=this,n=null,l="",r="";switch(e){case"start":n=o["q"],l="启动",r="loadingStart";break;case"stop":n=o["r"],l="停止",r="loadingStop";break;case"activation":n=o["c"],l="激活",r="loadingActivation";break;case"back_cut":n=o["s"],l="回切",r="loadingBack_cut";break;case"delete":n=o["p"],l="删除",r="loadingDelete";break;default:n=null}var s={groupId:this.groupId,belongClusterId:t.belongClusterId,deployClusterId:a.id};this.$confirm("确定要".concat(l,"灾备节点【").concat(t.belongClusterName,"】吗"),{type:"warning"}).then((function(){i.$set(t,r,!0),n(s).then((function(e){200===e.code&&(i.$message.success(e.data||"".concat(l,"成功")),i.clickRefresh())})).catch((function(e){})),i.socketStart({id:i.groupId})})).catch((function(e){})).finally((function(){i.$set(t,r,!1)}))},clickNodeManage:function(e){this.$router.push({path:"/rocketmq/clusterManagement/rocketmq-node-manage",query:{id:e.id,clusterName:e.clusterName,machineRoomName:e.machineRoomName,clusterMode:e.clusterMode}})},clickClusterMonitor:function(e){this.$router.push({path:"/rocketmq/multiple-center/multiple-center-settings/cluster-monitor",query:{id:e.id,clusterName:e.clusterName,machineRoomName:e.machineRoomName,clusterMode:e.clusterMode}})},clickDeleteCluster:function(e){var t=this,a=null,i="";switch(e.multiClusterMode){case"backup":a=o["a"],i="冷备";break;case"alive":a=o["d"],i="多活";break}e&&e.id&&a&&this.$confirm("确定要删除【".concat(e.clusterName,"】吗?"),{type:"warning"}).then((function(n){n&&a({groupId:t.groupId,clusterId:e.id}).then((function(e){200===e.code&&(t.$message.success("".concat(i,"集群删除成功")),t.clickRefresh())})).catch((function(e){}))})).catch((function(e){}))}}},d=u,p=(a("a2d7"),a("2877")),f=Object(p["a"])(d,i,n,!1,null,"518abfc4",null);t["default"]=f.exports},a2d7:function(e,t,a){"use strict";a("922f")},a335:function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("b0c0"),a("498a");var i=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:e.isEdit?"编辑":"新增",visible:e.show,size:"medium","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.form,rules:e.rules}},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"组件",prop:"moduleType"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择组件"},on:{change:e.changeModule},model:{value:e.form.moduleType,callback:function(t){e.$set(e.form,"moduleType",t)},expression:"form.moduleType"}},e._l(e.opts_modules,(function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.tableData,border:""}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t("el-table-column",{attrs:{prop:"key",label:"参数项",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[""==a.row.description&&a.row.description?t("span",[e._v(e._s(a.row.key))]):t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.row.description,placement:"top-start",disabled:!0}},[t("span",[e._v(e._s(a.row.key))])])]}}])}),t("el-table-column",{attrs:{prop:"title",label:"中文名称",width:"200",align:"center"}}),t("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.$index,n=a.row;return[t("div",[t("el-form-item",{attrs:{prop:"tableData.".concat(i,".value"),"label-width":"0"}},["radio"===n.type?t("span",[t("el-radio-group",{model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"row.value"}},e._l(n.options,(function(a){return t("el-radio",{key:a.id,attrs:{label:a.value}},[e._v(e._s(a.label))])})),1)],1):e._e(),"input"===n.type?t("span",["int"===n.dataType?t("el-input",{attrs:{type:"number",min:0,size:"mini",disabled:e.isEdit&&Boolean(n.readonly)},model:{value:n.value,callback:function(t){e.$set(n,"value",e._n(t))},expression:"row.value"}}):t("el-input",{attrs:{size:"mini",disabled:e.isEdit&&Boolean(n.readonly)},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"row.value"}})],1):e._e(),"select"===n.type?t("el-select",{model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"row.value"}},e._l(n.options,(function(a){return t("el-option",{key:a.id,attrs:{label:a.value}},[e._v(e._s(a.label))])})),1):e._e()],1)],1)]}}])})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{type:"primary",loading:e.loadingSubmit},on:{click:e.confirmSave}},[e._v("保存")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},n=[],o=a("5530"),l=a("c7eb"),r=a("1da1"),s=(a("4de4"),a("caad"),a("d81d"),a("e9c4"),a("4ec9"),a("b64b"),a("d3b7"),a("2532"),a("3ca3"),a("159b"),a("ddb0"),a("082f")),c=a("ade3"),u=function(){return[{keyAlias:"cluster.test",key:"clusterTest",title:"是否开启集群测试",options:[{label:"是",value:!0},{label:"否",value:!1}],type:"radio",elementType:"是/否 按钮",readonly:0,description:"",dataType:"",value:!1,default:!1,example:"0，1"},{keyAlias:"order.message.enable",key:"orderMessageEnable",title:"是否支持顺序消息",options:[{label:"是",value:!0},{label:"否",value:!1}],type:"radio",elementType:"是/否 按钮",readonly:0,description:"",dataType:"",value:!1,default:!1,example:"0，1"},{keyAlias:"server.worker.threads",key:"serverWorkerThreads",title:"业务线程池线程个数",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:8,default:8,example:"[1,...]"},{keyAlias:"server.callback.executor.threads",key:"serverCallbackExecutorThreads",title:"异步回调线程池线程数量",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:1,default:1,example:"[0,...]"},{keyAlias:"server.selector.threads",key:"serverSelectorThreads",title:"IO 线程池线程个数",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:3,default:3,example:"[1,...]"},{keyAlias:"server.oneway.semaphore.value",key:"serverOnewaySemaphoreValue",title:"单向发送消息最大并发度",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:256,default:256,example:"[1,...]"},{keyAlias:"server.async.semaphore.value",key:"serverAsyncSemaphoreValue",title:"异步发送消息最大并发度",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:64,default:64,example:"[1,...]"},{keyAlias:"server.channel.max.idle.time.seconds",key:"serverChannelMaxIdleTimeSeconds",title:"网络连接最大空闲时间（秒）",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:120,default:120,example:"[1,...]"},{keyAlias:"server.socket.snd.buf.size",key:"serverSocketSndBufSize",title:"socket 发送缓存区大小",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:65535,default:65535,example:"[1,...]"},{keyAlias:"server.socket.rcv.buf.size",key:"serverSocketRcvBufSize",title:"socket 接收缓存区大小",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:65535,default:65535,example:"[1,...]"},{keyAlias:"server.pooled.byte.buf.allocator.enable",key:"serverPooledByteBufAllocatorEnable",title:"ByteBuffer是否开启缓存",options:[{label:"是",value:!0},{label:"否",value:!1}],type:"radio",elementType:"是/否 按钮",readonly:0,description:"",dataType:"",value:!0,default:!0,example:"0，1"},{keyAlias:"use.epoll.native.selector",key:"useEpollNativeSelector",title:"是否启用 Epoll IO",options:[{label:"是",value:!0},{label:"否",value:!1}],type:"radio",elementType:"是/否 按钮",readonly:0,description:"",dataType:"",value:!0,default:!0,example:"0，1"}]},d=function(){return[{keyAlias:"flush.disk.type",key:"flushDiskType",title:"消息刷盘方式",options:[{label:"ASYNC_FLUSH",value:"ASYNC_FLUSH"},{label:"SYNC_FLUSH",value:"SYNC_FLUSH"}],type:"radio",elementType:"ASYNC_FLUSH/SYNC_FLUSH 按钮",description:"",dataType:"string",value:"SYNC_FLUSH",default:"SYNC_FLUSH",example:"ASYNC_FLUSH，SYNC_FLUSH"},Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({keyAlias:"auto.create.topic.enable",key:"autoCreateTopicEnable",title:"是否自动创建默认topic",options:"",type:"radio"},"options",[{label:"是",value:!0},{label:"否",value:!1}]),"elementType","是/否 按钮"),"description",""),"dataType","int"),"value",!1),"default",!1),"example","0，1"),{keyAlias:"auto.create.subscription.group",key:"autoCreateSubscriptionGroup",title:"是否自动创建topic的订阅组",options:[{label:"是",value:!0},{label:"否",value:!1}],type:"radio",elementType:"是/否 按钮",description:"",value:!1,default:!1,example:"0，1"},{keyAlias:"delete.when",key:"deleteWhen",title:"持久化消息清理时间点",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:4,default:4,example:"[1,…24]"},{keyAlias:"file.reserved.time",key:"fileReservedTime",title:"持久化消息保留时间（小时）",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:72,default:72,example:"[1,...]"},{keyAlias:"maped.file.size.commit.log",key:"mapedFileSizeCommitLog",title:"单个commitLog文件大小",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:1073741824,default:1073741824,example:"[1,...]"},{keyAlias:"disk.max.used.space.ratio",key:"diskMaxUsedSpaceRatio",title:"磁盘使用率阀值（%）",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:88,default:88,example:"[1,...]"},{keyAlias:"send.message.thread.pool.nums",key:"sendMessageThreadPoolNums",title:"处理消息发送线程数量",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:64,default:64,example:"[1,...]"},{keyAlias:"pull.message.thread.pool.nums",key:"pullMessageThreadPoolNums",title:"处理消息拉取线程数量",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:64,default:64,example:"[1,...]"},{keyAlias:"max.message.size",key:"maxMessageSize",title:"消息体最大限制",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:65536,default:65536,example:"[1,...]"},{keyAlias:"transaction.time.out",key:"transactionTimeOut",title:"事务消息超时时间（ms）",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:6e3,default:6e3,example:""},{keyAlias:"flush.commit.log.thorough.interval",key:"flushCommitLogThoroughInterval",title:"Commitlog刷盘间隔（ms)",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:1e4,default:1e4,example:""},{keyAlias:"wait.time.mills.in.send.queue",key:"waitTimeMillsInSendQueue",title:"发送队列最大等待时间(ms)",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:200,default:200,example:""},Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({keyAlias:"slave.read.enable",key:"slaveReadEnable",title:"从节点是否可读",options:"",type:"radio"},"options",[{label:"是",value:!0},{label:"否",value:!1}]),"elementType","是/否 按钮"),"description",""),"dataType","int"),"value",!1),"default",!1),"example","0，1")]};var p=a("ff51"),f=a("5c8a"),m=a("ec41"),g={name:"message-config-params",components:{},model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function},data:function(){return{loadingSubmit:!1,opts_modules:[],fileList:[],loading:!1,labelPosition:"right",form:{id:"",name:"",moduleType:"ROCKRTMQ_NAME_SERVER",tableData:u()},formEditCopy:null,rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],moduleType:[{required:!0,message:"请选择组件",trigger:"change"}]}}},computed:{isEdit:function(){var e;return Boolean(null===(e=this.rowData)||void 0===e?void 0:e.id)}},watch:{},created:function(){this.getOpts_modules()},mounted:function(){this.isEdit&&this.getDetail()},methods:{getOpts_modules:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={componentType:"ROCKETMQ"},t.next=4,Object(s["e"])(a).then((function(t){e.opts_modules=Object(p["a"])(null===t||void 0===t?void 0:t.data)?t.data:[]}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},changeModule:function(e){var t=this.recoverEditFormWhenBackToOldModuleType(e);t&&this.initTableDataByModuleType(e)},recoverEditFormWhenBackToOldModuleType:function(e){return!this.isEdit||!this.formEditCopy||e!==this.formEditCopy.moduleType||(this.form=Object(f["a"])(this.formEditCopy),!1)},initTableDataByModuleType:function(e){this.form.tableData="ROCKRTMQ_NAME_SERVER"===e?u():"ROCKRTMQ_NAME_BROKER"===e?d():[]},getDetail:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a,i,n,o,r;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Object(s["b"])(e.rowData.id);case 4:a=t.sent,i=Object(m["a"])(a,"data"),n=Object(m["a"])(a,"data.content"),e.form.name=i.name,e.form.moduleType=i.moduleType,e.form.id=i.id,e.initTableDataByModuleType(i.moduleType),o=JSON.parse(n),r=new Map,o.forEach((function(e){r.set(e.configKey,e.configValue)})),e.form.tableData.forEach((function(e){r.has(e.key)&&(e.value=r.get(e.key))})),e.formEditCopy=Object(f["a"])(e.form),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](1);case 21:e.loading=!1;case 22:case"end":return t.stop()}}),t,null,[[1,18]])})))()},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},confirmSave:function(){var e=this,t=this.form.tableData.map((function(e){return{configKey:e.key,configValue:e.value}}));0!=this.clusterType&&2!=this.clusterType||(t=t.filter((function(e){return!noSubmit.includes(e.configKey)}))),this.$refs.formRef.validate(function(){var a=Object(r["a"])(Object(l["a"])().mark((function a(i){var n;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i&&(n=Object(o["a"])(Object(o["a"])({},e.form),{},{componentType:"ROCKETMQ",content:JSON.stringify(t)}),delete n.tableData,e.loadingSubmit=!0,Object(s["g"])(n).then((function(t){200===t.code&&(e.$message.success("保存成功"),e.$emit("change",!1),e.refresh())})).catch((function(e){})).finally((function(){e.loadingSubmit=!1})));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},tableRowClassName:function(e){var t=e.row;e.rowIndex;return"text"===t.type?"readonly-text-item":""}}},b=g,h=(a("5bd7"),a("2877")),v=Object(h["a"])(b,i,n,!1,null,"bfc5edae",null);t["default"]=v.exports},b2cc:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:e.title,visible:e.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",attrs:{model:e.formData,"label-width":"120px",rules:e.rules}},[t("el-form-item",{attrs:{label:"机房",prop:"machineRoomId"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择机房"},on:{change:e.changeMachineRoom},model:{value:e.formData.machineRoomId,callback:function(t){e.$set(e.formData,"machineRoomId",t)},expression:"formData.machineRoomId"}},e._l(e.machineList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.machineRoomName,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"集群",prop:"clusterId"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择集群"},model:{value:e.formData.clusterId,callback:function(t){e.$set(e.formData,"clusterId",t)},expression:"formData.clusterId"}},e._l(e.clusterList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.clusterName,value:e.id}})})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.loadingConfirm},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},n=[],o=(a("caad"),a("d3b7"),a("999d")),l=a("ff51"),r={components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,refresh:Function,type:{type:String,required:!0,default:"alive",validator:function(e){return["alive","backup"].includes(e)}}},data:function(){return{formData:{machineRoomId:"",clusterId:""},rules:{machineRoomId:[{required:!0,trigger:"blur",message:"请选择机房"}],clusterId:[{required:!0,trigger:"blur",message:"请选择集群"}]},machineList:[],clusterList:[],loadingConfirm:!1}},computed:{visible:{get:function(){return this.show},set:function(e){this.$emit("change",!1)}},groupId:function(){return this.$route.query.id},title:function(){return"添加".concat("alive"===this.type?"多活":"冷备","集群")}},watch:{},created:function(){this.getMachine()},mounted:function(){},methods:{getMachine:function(){var e=this;Object(o["k"])(this.groupId).then((function(t){e.machineList=Object(l["a"])(null===t||void 0===t?void 0:t.data)?t.data:[]})).catch((function(e){}))},changeMachineRoom:function(e){var t=this;if(this.clusterList=[],this.formData.clusterId="",e){var a={groupId:this.groupId,machineRoomId:e};Object(o["f"])(a).then((function(e){t.clusterList=Object(l["a"])(null===e||void 0===e?void 0:e.data)?e.data:[]})).catch((function(e){}))}},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this;this.$refs.formRef.validate((function(t){if(t){var a=o["h"];"backup"===e.type&&(a=o["i"]),e.loadingConfirm=!0;var i={groupId:e.groupId,clusterId:e.formData.clusterId};a(i).then((function(t){t&&200===t.code&&(e.$message.success("".concat(e.title,"成功")),e.$emit("change",!1),e.refresh())})).catch((function(e){})).finally((function(){e.loadingConfirm=!1}))}}))}}},s=r,c=a("2877"),u=Object(c["a"])(s,i,n,!1,null,"7bb946bc",null);t["default"]=u.exports},b330:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"g-page"},[t("div",[t("el-button",{attrs:{button:""},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),t("tableView",{attrs:{isPage:!1,loading:e.tableConfig.loading,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,rowKey:"id"},on:{sortChange:e.sortChange}})],1)},n=[],o=(a("d3b7"),a("33b0")),l=a("ec41"),r=a("ff51"),s=a("d66c"),c={name:"multiple-center-settings",components:{},mixins:[],props:{},data:function(){this.$createElement;return{tableConfig:{loading:!1,tableData:[],columns:[{prop:"clusterName",label:"集群名称",sortable:!0},{prop:"brokerName",label:"broker名称",width:"160px"},{prop:"brokerNumber",label:"编号",render:function(e,t){var a=t.row;return e("span",[a.brokerNumber,"(","0"===a.brokerNumber?"master":"salve",")"])}},{prop:"ip",label:"地址"},{prop:"version",label:"版本"},{prop:"putTPS",label:"生产消息TPS"},{prop:"getTPS",label:"消费消息TPS"},{prop:"yesterdayPut",label:"昨日生产总数"},{prop:"yesterdayGet",label:"昨日消费总数"},{prop:"todayPut",label:"今天生产总数"},{prop:"todayGet",label:"今天消费总数"}],operate:{width:220,list:[]}},rowData:null}},computed:{},query:function(){return this.$route.query},watch:{},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var e=this,t=this.$route.query.id;this.tableConfig.loading=!0,Object(o["f"])(t).then((function(t){var a=Object(l["a"])(t,"data");e.tableConfig.tableData=Object(r["a"])(a)?a:[]})).catch((function(e){})).finally((function(){e.tableConfig.loading=!1}))},sortChange:function(e,t,a){var i=this.tableConfig.tableData,n=Object(s["a"])(i,(function(e){return e.clusterName}));"descending"===a&&(n=n.reverse()),this.tableConfig.tableData=n}}},u=c,d=a("2877"),p=Object(d["a"])(u,i,n,!1,null,"24158796",null);t["default"]=p.exports},bf65:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"g-page"},[t("search-form",{attrs:{searchConfig:e.searchModel},on:{onSearch:e.onSearch}}),t("div",{staticClass:"flex-inline-between"},[t("el-button",{attrs:{type:"primary"},on:{click:e.openAdd}},[e._v("新增")])],1),t("tableView",{attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,total:e.tableConfig.pagination.totalCount,rowKey:"id",operateSlice:3,currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage,operate:e.getIndex}}),e.visible?t("DialogOrgAdd",{attrs:{rowData:e.rowData,refresh:e.getList},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}):e._e()],1)},n=[],o=a("5530"),l=(a("14d9"),a("d3b7"),a("498a"),function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:e.isEdit?"编辑":"新增",visible:e.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1,loading:e.loading},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",attrs:{model:e.formData,"label-width":"120px",rules:e.rules}},[t("el-form-item",{attrs:{label:"名称",prop:"groupName"}},[t("el-input",{staticClass:"w-100",attrs:{placeholder:"请输入名称"},model:{value:e.formData.groupName,callback:function(t){e.$set(e.formData,"groupName","string"===typeof t?t.trim():t)},expression:"formData.groupName"}})],1),t("el-form-item",{attrs:{label:"版本",prop:"version"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择版本"},model:{value:e.formData.version,callback:function(t){e.$set(e.formData,"version",t)},expression:"formData.version"}},e._l(e.rocketVersionOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"备注",prop:"groupRemark"}},[t("el-input",{staticClass:"w-100",attrs:{placeholder:"请输入描述",type:"textarea"},model:{value:e.formData.groupRemark,callback:function(t){e.$set(e.formData,"groupRemark","string"===typeof t?t.trim():t)},expression:"formData.groupRemark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)}),r=[],s=(a("b64b"),a("159b"),a("e8b2")),c=a("999d"),u=a("49bb"),d={name:"dialog-org-add",components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:function(){return{}}},refresh:{type:Function,required:!0,default:function(){}}},data:function(){return{loading:!1,formData:p(),rocketVersionOptions:u["k"],rules:{groupName:[{required:!0,trigger:"blur",message:"请输入名称"}],version:[{required:!0,trigger:"change",message:"请选择版本"}]}}},computed:{visible:{get:function(){return this.show},set:function(e){this.$emit("change",!1)}},isEdit:function(){var e;return Boolean(null===(e=this.rowData)||void 0===e?void 0:e.id)}},watch:{},created:function(){},mounted:function(){var e;null!==(e=this.rowData)&&void 0!==e&&e.id&&(this.formData=p(this.rowData))},methods:{clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this;this.$refs.formRef.validate((function(t){if(t){var a=Object(o["a"])({},e.formData);e.loading=!0,e.isEdit?Object(c["t"])(a).then((function(t){t&&200===t.code&&(e.$message.success("修改成功"),e.$emit("change",!1),e.refresh())})).finally((function(){e.loading=!1})):(delete a.id,Object(c["g"])(a).then((function(t){t&&200===t.code&&(e.$message.success("新增成功"),e.refresh(),e.$emit("change",!1))})).finally((function(){e.loading=!1})))}}))}}};function p(e){var t={id:"",groupName:"",version:"",groupRemark:""};return Object(s["a"])(e)&&Object.keys(t).forEach((function(a){e.hasOwnProperty(a)&&(t[a]=e[a])})),t}var f=d,m=a("2877"),g=Object(m["a"])(f,l,r,!1,null,"54fffb3d",null),b=g.exports,h=a("ec41"),v=a("ff51"),y={name:"multiple-center-settings",components:{DialogOrgAdd:b},mixins:[],props:{},data:function(){return{requestObject:{wrapName:""},visible:!1,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,totalCount:0},tableData:[],columns:[{prop:"groupName",label:"名称"},{prop:"version",label:"版本"},{prop:"aliveClusterNumber",label:"多活集群数"},{prop:"backupClusterNumber",label:"灾备集群数"},{prop:"groupRemark",label:"备注"}],operate:{width:220,list:[{label:"多中心管理",id:"manage"},{label:"编辑",id:"edit"},{label:"删除",id:"delete"}]}},rowData:null,searchModel:{searchData:{groupName:""},searchItem:[{type:"input",label:"名称",prop:"groupName"}],rules:{}}}},computed:{},watch:{},created:function(){this.getList()},mounted:function(){},methods:{onSearch:function(){this.tableConfig.pagination.currentPage=1,this.getList()},getList:function(){var e=this,t={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:Object(o["a"])({},this.searchModel.searchData)};this.tableConfig.loading=!0,Object(c["o"])(t).then((function(t){var a=Object(h["a"])(t,"data.data");e.tableConfig.tableData=Object(v["a"])(a)?a:[],e.tableConfig.pagination.totalCount=Object(h["a"])(t,"data.totalCount")||0})).catch((function(e){})).finally((function(){e.tableConfig.loading=!1}))},getIndex:function(e){var t=this,a=(e.index,e.row),i=e.operate;"delete"===i.id?this.$confirm("确定要删除【".concat(a.groupName,"】吗?"),{type:"warning"}).then((function(){Object(c["b"])(a.id).then((function(e){200===e.code&&(t.$message.success("删除成功"),t.getList())})).catch((function(e){}))})).catch((function(e){})):"edit"===i.id?(this.rowData=a,this.visible=!0):"manage"===i.id&&this.$router.push({path:"/rocketmq/multiple-center/multiple-center-manage",query:{id:a.id}})},clickSearchButton:function(e){e&&(this.requestObject.wrapName="",this.tableConfig.pagination.pageNo=1),this.getList()},openAdd:function(){this.rowData=null,this.visible=!0},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()}}},k=y,C=Object(m["a"])(k,i,n,!1,null,"97c7a18c",null);t["default"]=C.exports},e5ff:function(e,t,a){},ecbe:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{style:{height:e.height,width:e.width},attrs:{id:"mountNode"}})},n=[],o=a("7c3e"),l={name:"g6-dagre",components:{},mixins:[],props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},chartData:{type:Object,default:function(){return{nodes:[],edges:[]}}}},data:function(){return{graph:null}},computed:{},watch:{},created:function(){},mounted:function(){this.initDagre(),window.addEventListener("resize",this.resize)},destroyed:function(){window.removeEventListener("resize",this.resize),this.graph=null},methods:{initDagre:function(){var e=this.chartData;o["a"].registerNode("card-node",{draw:function(e,t){var a=2,i="#5B8FF9",n="green",o=e.size[0],l=e.size[1],r=t.addShape("rect",{attrs:{x:-o/2+20,y:-l/2,width:o,height:l,stroke:i,radius:a,fill:"#fff"},name:"main-box",draggable:!0}),s=0===e.dataType;return t.addShape("rect",{attrs:{x:-o/2+20,y:-l/2,width:o,height:30,fill:s?n:i,radius:[a,a,0,0]},name:"title-box",draggable:!0}),t.addShape("text",{attrs:{textBaseline:"top",x:-o/2+20+2,y:-l/2+10,lineHeight:30,text:e.clusterName,fill:"#fff"},name:"title"}),t.addShape("text",{attrs:{textBaseline:"top",x:-o/2+20,y:-l/2+40,lineHeight:20,text:" 总节点数：".concat(e.totalNodes),fill:"rgba(0,0,0, 1)"},name:"totalNodes"}),t.addShape("text",{attrs:{textBaseline:"top",x:-o/2+20,y:-l/2+60,lineHeight:20,text:" 运行节点数：".concat(e.runTotalNodes),fill:"rgba(0,0,0, 1)"},name:"runTotalNodes"}),t.addShape("text",{attrs:{textBaseline:"top",x:-o/2+20,y:-l/2+80,lineHeight:20,text:" 机房：".concat(e.machineRoomName),fill:"rgba(0,0,0, 1)"},name:"machineRoomName"}),r}});var t=new o["a"].Graph({container:"mountNode",fitView:!0,pixelRatio:2,groupByTypes:!1,layout:{type:"dagre",ranksep:25,nodesep:25,controlPoints:!0,align:"UL",sortByCombo:!0},defaultNode:{type:"card-node",size:[200,120],style:{stroke:"#C4E3B2",radius:7}},defaultCombo:{type:"rect",labelCfg:{position:"top",padding:[20,10],style:{fill:"#666",fontSize:14}}},defaultEdge:{type:"line",style:{endArrow:!0,lineWidth:2,stroke:"#C2C8D5"},labelCfg:{autoRotate:!0}},comboStateStyles:{selected:{shadowBlur:1,lineWidth:1}},nodeStateStyles:{selected:{shadowColor:"#1d70f5",shadowBlur:10,lineWidth:2,cursor:"pointer"}},modes:{default:["drag-canvas","zoom-canvas","click-select"]}});t.data(e),t.render(),t.fitView(),this.graph=t},resize:function(){var e=this.$el,t=e.offsetHeight,a=e.offsetWidth;this.graph.changeSize(a,t)}}},r=l,s=(a("761d"),a("2877")),c=Object(s["a"])(r,i,n,!1,null,"2391019c",null);t["default"]=c.exports}}]);