(window["jsonpPaas4"]=window["jsonpPaas4"]||[]).push([["app~0adc88b1"],{"0a0c":function(e,t,a){"use strict";a("fb04")},"32b8":function(e,t,a){},"42e9":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"formRef",attrs:{model:e.formData,rules:e.rules,inline:!0}},[t("el-form-item",{attrs:{prop:"groupId",label:"架构"}},[t("el-select",{on:{change:e.changeGroupId},model:{value:e.formData.groupId,callback:function(t){e.$set(e.formData,"groupId",t)},expression:"formData.groupId"}},e._l(e.archList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.groupName,value:e.id}})})),1)],1),t("el-form-item",[t("el-button",{on:{click:e.clickSearch}},[e._v("刷新")])],1)],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中,请稍候......"}},[e.linksData.length>0?t("G6Dagre",{attrs:{chartData:e.chartData,height:"500px",width:"100%"},on:{"click-node":e.clickNode}}):t("el-empty")],1)],1)},n=[],o=a("5530"),l=(a("14d9"),a("d3b7"),a("07ac"),a("159b"),a("264f")),r=a("ff51"),s=a("ec41"),c=a("bc59"),u=a("4bff"),d={components:{G6Dagre:u["default"]},data:function(){return{formData:{groupId:""},rules:{groupId:[{required:!0,message:"请选择架构",trigger:"change"}]},archList:[],chartData:{edges:[],nodes:[],combos:[]},linksData:[],loading:!1}},created:function(){this.getArch()},methods:{getArch:function(){var e=this;Object(l["s"])().then((function(t){e.archList=Object(r["a"])(Object(s["a"])(t,"data"))?t.data:[]})).catch((function(e){}))},changeGroupId:function(e){e&&this.clickSearch()},clickSearch:function(){var e=this;this.$refs.formRef.validate((function(t){t&&e.getData()}))},getData:function(){var e=this;this.loading=!0,this.linksData=[],this.chartData.combos=[],this.chartData.nodes=[],this.chartData.edges=[],Object(l["r"])(this.formData.groupId).then((function(t){if(t){var a=Object(r["a"])(null===t||void 0===t?void 0:t.data)?t.data:[];e.linksData=a;var i={},n={fill:"#fff",stroke:"#C4E3B2",lineWidth:1,shadowBlur:0,radius:7},l=[],s=[];a.forEach((function(e){var t=e.cluster,a=e.lines;t.cityName&&!Object(c["a"])(i,t.cityName)&&(i[t.cityName]={id:t.cityName,label:t.cityName,style:n});var u="",d="";l.push(Object(o["a"])(Object(o["a"])({},t),{},{id:t.id,value:t.clusterName,label:t.clusterName,comboId:t.cityName,statusLabel:u,syncMethodLabel:d})),t.id&&"-"!==t.id&&Object(r["a"])(a)&&a.forEach((function(e){var a="";switch(e.status){case"red":a="同步异常";break;case"green":a="正常";break;case"yellow":a="部分异常";break}s.push({source:t.id,target:e.clusterId,label:a,style:{stroke:e.status}})}))})),e.chartData.nodes=l,e.chartData.edges=s,e.chartData.combos=Object.values(i)}})).catch((function(e){})).finally((function(){e.loading=!1}))},clickNode:function(e){}}},p=d,f=a("2877"),m=Object(f["a"])(p,i,n,!1,null,"6b72f90e",null);t["default"]=m.exports},4842:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:e.title,visible:e.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",attrs:{model:e.formData,"label-width":"120px",rules:e.rules}},[t("el-form-item",{attrs:{label:"机房",prop:"machineRoomId"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择机房"},on:{change:e.changeMachineRoom},model:{value:e.formData.machineRoomId,callback:function(t){e.$set(e.formData,"machineRoomId",t)},expression:"formData.machineRoomId"}},e._l(e.machineList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.machineRoomName,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"集群",prop:"clusterId"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择集群"},model:{value:e.formData.clusterId,callback:function(t){e.$set(e.formData,"clusterId",t)},expression:"formData.clusterId"}},e._l(e.clusterList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.clusterName,value:e.id}})})),1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.loadingConfirm},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},n=[],o=(a("caad"),a("d3b7"),a("264f")),l=a("ff51"),r={components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,refresh:Function,type:{type:String,required:!0,default:"alive",validator:function(e){return["alive","backup"].includes(e)}}},data:function(){return{formData:{machineRoomId:"",clusterId:""},rules:{machineRoomId:[{required:!0,trigger:"blur",message:"请选择机房"}],clusterId:[{required:!0,trigger:"blur",message:"请选择集群"}]},machineList:[],clusterList:[],loadingConfirm:!1}},computed:{visible:{get:function(){return this.show},set:function(e){this.$emit("change",!1)}},groupId:function(){return this.$route.query.groupId},title:function(){return"添加".concat("alive"===this.type?"多活":"冷备","集群")}},watch:{},created:function(){this.getMachine()},mounted:function(){},methods:{getMachine:function(){var e=this;Object(o["o"])(this.groupId).then((function(t){e.machineList=Object(l["a"])(null===t||void 0===t?void 0:t.data)?t.data:[]})).catch((function(e){}))},changeMachineRoom:function(e){var t=this;if(this.clusterList=[],this.formData.clusterId="",e){var a={groupId:this.groupId,machineRoomId:e};Object(o["g"])(a).then((function(e){t.clusterList=Object(l["a"])(null===e||void 0===e?void 0:e.data)?e.data:[]})).catch((function(e){}))}},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this;this.$refs.formRef.validate((function(t){if(t){var a=o["i"];"backup"===e.type&&(a=o["j"]),e.loadingConfirm=!0;var i={groupId:e.groupId,clusterId:e.formData.clusterId};a(i).then((function(t){t&&200===t.code&&(e.$message.success("".concat(e.title,"成功")),e.$emit("change",!1),e.refresh())})).catch((function(e){})).finally((function(){e.loadingConfirm=!1}))}}))}}},s=r,c=a("2877"),u=Object(c["a"])(s,i,n,!1,null,"53203c70",null);t["default"]=u.exports},"4bff":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{style:{height:e.height,width:e.width},attrs:{id:"mountNode"}})},n=[],o=a("7c3e"),l={name:"g6-dagre",components:{},mixins:[],props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},chartData:{type:Object,default:function(){return{nodes:[],edges:[]}}}},data:function(){return{graph:null}},computed:{},watch:{},created:function(){},mounted:function(){this.initDagre(),window.addEventListener("resize",this.resize)},destroyed:function(){window.removeEventListener("resize",this.resize),this.graph=null},methods:{initDagre:function(){var e=this.chartData;o["a"].registerNode("card-node",{draw:function(e,t){var a=2,i="#5B8FF9",n="green",o=e.size[0],l=e.size[1],r=t.addShape("rect",{attrs:{x:-o/2+20,y:-l/2,width:o,height:l,stroke:i,radius:a,fill:"#fff"},name:"main-box",draggable:!0}),s=0===e.dataType;return t.addShape("rect",{attrs:{x:-o/2+20,y:-l/2,width:o,height:30,fill:s?n:i,radius:[a,a,0,0]},name:"title-box",draggable:!0}),t.addShape("text",{attrs:{textBaseline:"top",x:-o/2+20+2,y:-l/2+10,lineHeight:30,text:e.clusterName,fill:"#fff"},name:"title"}),t.addShape("text",{attrs:{textBaseline:"top",x:-o/2+20,y:-l/2+40,lineHeight:20,text:" 总节点数：".concat(e.nodeNumber),fill:"rgba(0,0,0, 1)"},name:"nodeNumber"}),t.addShape("text",{attrs:{textBaseline:"top",x:-o/2+20,y:-l/2+60,lineHeight:20,text:" 运行节点数：".concat(e.runNodeNumber),fill:"rgba(0,0,0, 1)"},name:"runNodeNumber"}),t.addShape("text",{attrs:{textBaseline:"top",x:-o/2+20,y:-l/2+80,lineHeight:20,text:" 机房：".concat(e.machineRoomName),fill:"rgba(0,0,0, 1)"},name:"machineRoomName"}),r}});var t=new o["a"].Graph({container:"mountNode",fitView:!0,pixelRatio:2,groupByTypes:!1,layout:{type:"dagre",ranksep:25,nodesep:25,controlPoints:!0,align:"UL",sortByCombo:!0},defaultNode:{type:"card-node",size:[200,120],style:{stroke:"#C4E3B2",radius:7}},defaultCombo:{type:"rect",labelCfg:{position:"top",padding:[20,10],style:{fill:"#666",fontSize:14}}},defaultEdge:{type:"line",style:{endArrow:!0,lineWidth:2,stroke:"#C2C8D5"},labelCfg:{autoRotate:!0}},comboStateStyles:{selected:{shadowBlur:1,lineWidth:1}},nodeStateStyles:{selected:{shadowColor:"#1d70f5",shadowBlur:10,lineWidth:2,cursor:"pointer"}},modes:{default:["drag-canvas","zoom-canvas","click-select"]}});t.data(e),t.render(),t.fitView(),this.graph=t},resize:function(){var e=this.$el,t=e.offsetHeight,a=e.offsetWidth;this.graph.changeSize(a,t)}}},r=l,s=(a("59fb"),a("2877")),c=Object(s["a"])(r,i,n,!1,null,"62ad5f73",null);t["default"]=c.exports},"4e9d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("header",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickClusterAdd("alive")}}},[e._v("添加多活集群")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickClusterAdd("backup")}}},[e._v("添加冷备集群")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickBackup("alive")}}},[e._v("生成多活灾备服务")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickBackup("backup")}}},[e._v("生成冷备灾备服务")]),t("el-button",{on:{click:e.clickRefresh}},[e._v("刷新")])],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在拼命加载......"}},[t("tableView",{attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,rowKey:"id",operateSlice:3},on:{operate:e.getIndex}}),e.cardData&&e.cardData.length>0?t("el-row",{staticClass:"item-ul mt-15 mb-15",attrs:{gutter:10}},e._l(e.cardData,(function(a,i){return t("el-col",{key:i,staticClass:"mb-15",attrs:{span:8}},[t("div",{staticClass:"item-li",class:"item-li-".concat(a.multiClusterMode)},[t("div",{staticClass:"item-machine mb-10"},[t("header",{staticClass:"flex-inline-between"},[t("header-line",{attrs:{size:"small",fontStyle:{"font-size":"14px",fontWeight:"backup"===a.multiClusterMode?500:600}}},[t("span",{staticClass:"mr-10"},[e._v(e._s(a.cityName)+e._s(e._f("F_message_multiple_mode")(a.multiClusterMode))+"机房:")]),e._v(" "+e._s(a.machineRoomName)+" ")])],1),t("div",{staticClass:"item-cluster"},[t("div",{staticClass:"flex-inline-between mb-10"},[t("span",{staticStyle:{"font-size":"12px"}},[e._v("集群:"+e._s(a.clusterName))]),t("span",[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clickDeleteCluster(a)}}},[e._v("删除")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clickNodeManage(a)}}},[e._v("节点管理")])],1)]),t("el-descriptions",{attrs:{column:2,contentClassName:"descriptions-bg"}},[t("el-descriptions-item",{attrs:{label:"Broker节点"}},[e._v(" "+e._s(a.nodeNumber)+" ")]),t("el-descriptions-item",{attrs:{label:"运行中"}},[e._v(" "+e._s(a.runNodeNumber)+" ")])],1)],1)])])])})),1):t("el-empty")],1),e.visible?t("MultipleManageAdd",{attrs:{type:e.currentType,refresh:e.getList},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}):e._e(),e.backupVisible?t("MultipleBackupAdd",{attrs:{rowData:e.rowData,type:e.backupType,refresh:e.getList},model:{value:e.backupVisible,callback:function(t){e.backupVisible=t},expression:"backupVisible"}}):e._e(),e.startLogShow?t("el-dialog-limit",{attrs:{title:e.updateTime?"启动日志( ".concat(e.updateTime," )"):"启动日志",visible:e.startLogShow,size:"medium"},on:{"update:visible":function(t){e.startLogShow=t},close:e.clickCancel}},[t("InstancesStartLog",{ref:"terminaRef",attrs:{updateTime:"updateTime",rowData:e.rowData},on:{changeTime:e.changeTime}})],1):e._e()],1)},n=[],o=a("c7eb"),l=a("1da1"),r=(a("14d9"),a("d3b7"),a("264f")),s=a("ec41"),c=a("ff51"),u=a("49bb"),d=a("4842"),p=a("7c54"),f=a("c4e6"),m={name:"kafka-multiple-center-manage",components:{MultipleManageAdd:d["default"],MultipleBackupAdd:p["default"],InstancesStartLog:f["default"]},filters:{F_message_multiple_mode:function(e){return Object(u["g"])(e,"multiClusterModeOptions")}},mixins:[],props:{},data:function(){this.$createElement;return{updateTime:"",startLogShow:!1,cardData:[],loading:!1,visible:!1,currentType:"alive",backupVisible:!1,backupType:"",rowData:null,tableConfig:{loading:!1,isPage:!1,tableData:[],columns:[{prop:"sourceClusterNames",label:"源集群"},{prop:"backupClusterNames",label:"备集群"},{prop:"machineIp",label:"部署机器IP"},{prop:"replicationFactor",label:"副本数"},{prop:"aclEnable",label:"是否开启ACL同步",format:function(e){return 1==e?"是":"否"}},{prop:"topic",label:"已选Topic"},{prop:"type",label:"服务类型",width:80,align:"center"},{prop:"status",label:"状态",width:100,align:"center",render:function(e,t){var a=t.row,i=e("span");switch(a.status){case"good":i=e("el-tag",{attrs:{type:"success"}},["good"]);break;case"bad":i=e("el-tag",{attrs:{type:"error"}},["bad"]);break}return i}}],operate:{width:220,list:[{label:"启动",id:"start",isShow:function(e){return"bad"===e.status}},{label:"停止",id:"stop",isShow:function(e){return"good"===e.status}},{label:"启动日志",id:"startLog"},{label:"编辑",id:"edit"},{label:"删除",id:"delete"}]}}}},computed:{groupId:function(){return this.$route.query.groupId}},watch:{},created:function(){},mounted:function(){this.getList()},methods:{changeTime:function(e){this.updateTime=e},clickCancel:function(){this.startLogShow=!1},getList:function(){var e=this;this.loading=!0,this.cardData=[],this.tableConfig.tableData=[],Object(r["p"])(this.groupId).then((function(t){var a=Object(s["a"])(t,"data.clusters"),i=Object(s["a"])(t,"data.mms");e.cardData=Object(c["a"])(a)?a:[],e.tableConfig.tableData=Object(c["a"])(i)?i:[]})).catch((function(e){})).finally((function(){e.loading=!1}))},clickRefresh:function(){this.getList()},clickBackup:function(e){this.rowData=null,this.backupType=e,this.backupVisible=!0},clickClusterAdd:function(e){this.currentType=e,this.visible=!0},clickNodeManage:function(e){this.$router.push({path:"/kafka/clusterManagement/kafka-node-manage",query:{id:e.id,clusterName:e.clusterName,machineRoomName:e.machineRoomName,clusterMode:e.clusterMode}})},clickDeleteCluster:function(e){var t=this;return Object(l["a"])(Object(o["a"])().mark((function a(){var i,n,l,s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=null,n="",a.t0=e.multiClusterMode,a.next="backup"===a.t0?6:"alive"===a.t0?9:12;break;case 6:return i=r["a"],n="冷备",a.abrupt("break",12);case 9:return i=r["e"],n="多活",a.abrupt("break",12);case 12:if(!(e&&e.id&&i)){a.next=28;break}return a.next=15,t.$confirm("确定要删除【".concat(e.id,"】吗?"),{type:"warning"});case 15:if(l=a.sent,"confirm"===l){a.next=18;break}return a.abrupt("return");case 18:return a.prev=18,a.next=21,i({groupId:t.groupId,clusterId:e.id});case 21:s=a.sent,200===s.code&&(t.$message.success("".concat(n,"集群删除成功")),t.clickRefresh()),a.next=28;break;case 25:a.prev=25,a.t1=a["catch"](18);case 28:case"end":return a.stop()}}),a,null,[[18,25]])})))()},getIndex:function(e){var t=this;return Object(l["a"])(Object(o["a"])().mark((function a(){var i,n,l,s,c,u;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.index,i=e.row,n=e.operate,l={groupId:t.groupId,configId:i.id},a.t0=n.id,a.next="delete"===a.t0?6:"edit"===a.t0?13:"start"===a.t0?17:"stop"===a.t0?24:"startLog"===a.t0?31:34;break;case 6:return a.next=8,t.$confirm("确定要删除备份服务吗?",{type:"warning"});case 8:if(s=a.sent,"confirm"===s){a.next=11;break}return a.abrupt("return");case 11:return Object(r["f"])(l).then((function(e){200===e.code&&(t.$message.success("删除成功"),t.getList())})).catch((function(e){})),a.abrupt("break",35);case 13:return t.rowData=i,t.backupType=i.type,t.backupVisible=!0,a.abrupt("break",35);case 17:return a.next=19,t.$confirm("确定要启动备份服务吗?",{type:"warning"});case 19:if(c=a.sent,"confirm"===c){a.next=22;break}return a.abrupt("return");case 22:return Object(r["u"])(l).then((function(e){200===e.code&&(t.$message.success("启动成功"),t.getList())})).catch((function(e){})),a.abrupt("break",35);case 24:return a.next=26,t.$confirm("确定要停止备份服务吗?",{type:"warning"});case 26:if(u=a.sent,"confirm"===u){a.next=29;break}return a.abrupt("return");case 29:return Object(r["v"])(l).then((function(e){200===e.code&&(t.$message.success("停止成功"),t.getList())})).catch((function(e){})),a.abrupt("break",35);case 31:return t.startLogShow=!0,t.rowData=i,a.abrupt("break",35);case 34:case 35:case"end":return a.stop()}}),a)})))()}}},b=m,g=(a("f0fb"),a("2877")),h=Object(g["a"])(b,i,n,!1,null,"0efb6de4",null);t["default"]=h.exports},"59fb":function(e,t,a){"use strict";a("8b0d")},"7c54":function(e,t,a){"use strict";a.r(t);a("99af"),a("caad"),a("2532");var i=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:e.title,visible:e.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",attrs:{model:e.formData,"label-width":"120px",rules:e.rules}},[t("el-form-item",{attrs:{label:"源集群",prop:"sourceId"}},[t("el-select",{key:"sourceId",staticClass:"w-100",attrs:{placeholder:"请选择源集群",multiple:""},on:{change:e.changeSourceId},model:{value:e.formData.sourceId,callback:function(t){e.$set(e.formData,"sourceId",t)},expression:"formData.sourceId"}},e._l(e.clusterListMultiple,(function(a){return t("el-option",{key:a.id,attrs:{label:a.clusterName,value:a.id,disabled:e.formData.backupId.includes(a.id)}})})),1)],1),e.formData.sourceClusterIds?t("el-form-item",{attrs:{label:"Topic",prop:"topicIds"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择Topic",multiple:""},on:{change:e.changeTopicIds},model:{value:e.formData.topicIds,callback:function(t){e.$set(e.formData,"topicIds",t)},expression:"formData.topicIds"}},[t("el-option",{attrs:{value:".*",label:"全部"}}),t("div",{staticStyle:{"border-top":"1px dashed #c6c6c6"}},e._l(e.topicList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1):e._e(),t("el-form-item",{attrs:{label:"备集群",prop:"backupId"}},["alive"===e.type?t("el-select",{key:"backupId",staticClass:"w-100",attrs:{placeholder:"请选择备集群",multiple:!0},on:{change:e.changeBackupId},model:{value:e.formData.backupId,callback:function(t){e.$set(e.formData,"backupId",t)},expression:"formData.backupId"}},e._l(e.clusterListMultiple,(function(a){return t("el-option",{key:a.id,attrs:{label:a.clusterName,value:a.id,disabled:e.formData.sourceId.includes(a.id)}})})),1):"backup"===e.type?t("el-select",{key:"backupId",staticClass:"w-100",attrs:{placeholder:"请选择备集群"},on:{change:e.changeBackupId},model:{value:e.formData.backupId,callback:function(t){e.$set(e.formData,"backupId",t)},expression:"formData.backupId"}},e._l(e.clusterListSingle,(function(a){return t("el-option",{key:a.id,attrs:{label:a.clusterName,value:a.id,disabled:e.formData.sourceId.includes(a.id)}})})),1):e._e()],1),e.formData.backupClusterIds?t("el-form-item",{attrs:{label:"机器",prop:"machineId"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择机器"},model:{value:e.formData.machineId,callback:function(t){e.$set(e.formData,"machineId",t)},expression:"formData.machineId"}},e._l(e.machineList,(function(a){return t("el-option",{key:a.id,attrs:{label:"".concat(a.machineIp,"(").concat(a.machineUserName,")"),value:a.id}},[t("ul",{staticClass:"el-option-ul-between"},[t("li",[e._v(e._s(a.machineIp))]),t("li",[e._v(e._s(a.machineUserName))])])])})),1)],1):e._e(),t("el-form-item",{attrs:{label:"副本数",prop:"replicationFactor"}},[t("el-input-number",{staticClass:"w-100",attrs:{min:1,max:21,size:"mini"},model:{value:e.formData.replicationFactor,callback:function(t){e.$set(e.formData,"replicationFactor",t)},expression:"formData.replicationFactor"}})],1),t("el-form-item",{attrs:{label:"同步ACL",prop:"aclEnable"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"是","inactive-text":"否"},model:{value:e.formData.aclEnable,callback:function(t){e.$set(e.formData,"aclEnable",t)},expression:"formData.aclEnable"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.loadingConfirm},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},n=[],o=a("5530"),l=(a("a15b"),a("b64b"),a("d3b7"),a("159b"),a("264f")),r=a("ff51"),s=a("3ad2"),c=a("8121"),u=a("e8b2"),d={components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,refresh:Function,type:{type:String,default:"",required:!0},rowData:{type:Object,default:function(){return{}}}},data:function(){return{formData:null,rules:{sourceId:[{required:!0,trigger:"blur",message:"请选择源集群"}],backupId:[{required:!0,trigger:"blur",message:"请选择备集群"}],machineId:[{required:!0,trigger:"change",message:"请选择备集群"}],replicationFactor:[{required:!0,trigger:"blur",message:"请输入副本数"}],aclEnable:[{required:!0,trigger:"blur",message:"请选择同步ACL"}],topicIds:[{required:!0,trigger:"change",message:"请选择Topic"}]},clusterListMultiple:[],clusterListSingle:[],loadingConfirm:!1,machineList:[],topicList:[]}},computed:{visible:{get:function(){return this.show},set:function(e){this.$emit("change",!1)}},title:function(){return"alive"===this.type?"生成多活灾备服务":"生成冷备灾备服务"},groupId:function(){return this.$route.query.groupId},isEdit:function(){var e;return null===(e=this.rowData)||void 0===e?void 0:e.id}},watch:{},created:function(){this.getClusterMultiple(),this.getClusterSingle(),this.formData=p(this.rowData,this.type)},mounted:function(){this.isEdit&&(this.getTopic(this.formData.sourceClusterIds),this.getMachine(this.formData.backupClusterIds))},methods:{changeSourceId:function(e){var t=Object(r["a"])(e)?e.join("&&"):e;this.topicList=[],this.formData.topic=[],this.getTopic(t)},getTopic:function(e){var t=this;e&&Object(l["q"])(e).then((function(e){t.topicList=Object(r["a"])(null===e||void 0===e?void 0:e.data)?e.data:[]})).catch((function(e){}))},changeTopicIds:function(e){Object(r["a"])(e)&&e.includes(".*")&&(this.formData.topicIds=".*"===e[e.length-1]?[".*"]:Object(s["a"])(e,".*"))},changeBackupId:function(e){var t=Object(r["a"])(e)?e.join("&&"):e;this.machineList=[],this.formData.machineId="",this.getMachine(t)},getMachine:function(e){var t=this;e&&Object(l["n"])(e).then((function(e){t.machineList=Object(r["a"])(null===e||void 0===e?void 0:e.data)?e.data:[]})).catch((function(e){}))},getClusterMultiple:function(){var e=this;Object(l["l"])(this.groupId).then((function(t){e.clusterListMultiple=Object(r["a"])(null===t||void 0===t?void 0:t.data)?t.data:[]})).catch((function(e){}))},getClusterSingle:function(){var e=this;"backup"===this.type&&Object(l["m"])(this.groupId).then((function(t){e.clusterListSingle=Object(r["a"])(null===t||void 0===t?void 0:t.data)?t.data:[]})).catch((function(e){}))},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this;this.$refs.formRef.validate((function(t){if(t){var a=Object(o["a"])({groupId:e.groupId},e.formData);delete a.sourceId,delete a.backupId,delete a.topicIds;var i=null;if(e.isEdit?(i=l["x"],a.type=e.rowData.type):"alive"===e.type?(delete a.id,i=l["c"]):"backup"===e.type&&(i=l["d"],delete a.id),!i)return;e.loadingConfirm=!0,i(a).then((function(t){t&&200===t.code&&(e.$message.success(t.data),e.$emit("change",!1),e.refresh())})).finally((function(){e.loadingConfirm=!1}))}}))}}};function p(e,t){var a={id:"",machineId:"",replicationFactor:0,aclEnable:1,sourceId:[],backupId:"",topicIds:[],get sourceClusterIds(){return Object(r["a"])(this.sourceId)?this.sourceId.join(";"):""},get backupClusterIds(){return Object(r["a"])(this.backupId)?this.backupId.join(";"):Object(c["a"])(this.backupId)?this.backupId:""},get topic(){return Object(r["a"])(this.topicIds)?this.topicIds.join(";"):""},type:t};return e&&Object(u["a"])(e)&&Object.keys(a).forEach((function(i){if(e.hasOwnProperty(i))switch(i){case"sourceClusterIds":Object(c["a"])(e[i])&&(a.sourceId=e[i].split(";"));break;case"backupClusterIds":Object(c["a"])(e[i])&&(a.backupId="alive"===t?e[i].split(";"):e[i]);break;case"topic":Object(c["a"])(e[i])&&(a.topicIds=e[i].split(";"));break;default:a[i]=e[i]}})),a}var f=d,m=a("2877"),b=Object(m["a"])(f,i,n,!1,null,"794d5ff6",null);t["default"]=b.exports},"8b0d":function(e,t,a){},"8fef":function(e,t,a){"use strict";a("de32")},c4e6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("div",{attrs:{id:"terminal-container"}}),t("div",{staticClass:"page-number"},[t("el-button",{attrs:{disabled:e.pageNum<=1},on:{click:e.upPage}},[e._v("上一页")]),t("span",{staticClass:"el-pagination-jump"},[e._v(" 前往 "),t("el-input",{staticClass:"number-input",attrs:{min:"1",size:"mini"},on:{change:e.getLogDetail},model:{value:e.pageNum,callback:function(t){e.pageNum=e._n(t)},expression:"pageNum"}}),e._v(" 页 ")],1),t("el-button",{attrs:{disabled:e.nextDisabled},on:{click:e.nextPage}},[e._v("下一页")])],1)])},n=[],o=(a("21a6"),a("abb2"),a("fcf3")),l=a("47d0"),r=a("264f"),s=a("ec41"),c={name:"my-xterm",components:{},props:{updateTime:{type:String,default:null},terminalData:{type:String,default:null},rowData:{type:Object,default:null}},data:function(){return{terminal:{pid:1,name:"terminal",scrollback:1e4},pageNum:1,pageTotal:0,term:null,socket:null,nextDisabled:!1}},watch:{pageNum:function(e){e&&this.getLogDetail()}},mounted:function(){this.initTerm()},beforeDestroy:function(){this.term.dispose()},clickCancel:function(){this.startLogShow=!1},methods:{upPage:function(){this.pageNum>1&&this.pageNum--},nextPage:function(){this.pageNum++},initTerm:function(){var e=document.getElementById("terminal-container"),t=new o["Terminal"](this.terminal),a=new l["FitAddon"];t.loadAddon(a),t.open(e),a.fit(),t.focus(),this.term=t,this.getLogDetail()},getLogDetail:function(){var e=this;Object(r["k"])({instanceId:this.rowData.id,pageNum:this.pageNum}).then((function(t){var a=Object(s["a"])(t,"data.content"),i=Object(s["a"])(t,"data.date");e.pageTotal=Object(s["a"])(t,"data.pageTotal"),e.nextDisabled="读取文件失败没有更多的内容。"===a,e.term.clear(),e.term.write(a+"\r\n"),e.$emit("changeTime",i)}))}}},u=c,d=(a("0a0c"),a("2877")),p=Object(d["a"])(u,i,n,!1,null,"7aecc076",null);t["default"]=p.exports},db39:function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("b0c0"),a("498a");var i=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:e.isEdit?"编辑":"新增",visible:e.show,size:"medium","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.form,rules:e.rules}},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1)],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.tableData,border:""}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t("el-table-column",{attrs:{prop:"keyAlias",label:"参数项",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[""==a.row.description&&a.row.description?t("span",[e._v(e._s(a.row.keyAlias))]):t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.row.description,placement:"top-start"}},[t("span",[e._v(e._s(a.row.keyAlias))])])]}}])}),t("el-table-column",{attrs:{prop:"title",label:"中文名称",width:"200",align:"center"}}),t("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.$index,n=a.row;return[t("div",[t("el-form-item",{attrs:{prop:"tableData.".concat(i,".value"),"label-width":"0"}},["radio"===n.type?t("span",[t("el-radio-group",{model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"row.value"}},e._l(n.options,(function(a){return t("el-radio",{key:a.id,attrs:{label:a.value}},[e._v(e._s(a.label))])})),1)],1):e._e(),"input"===n.type?t("span",["int"===n.dataType?t("el-input",{attrs:{type:"number",min:0,size:"mini",disabled:e.isEdit&&Boolean(n.readonly)},model:{value:n.value,callback:function(t){e.$set(n,"value",e._n(t))},expression:"row.value"}}):t("el-input",{attrs:{size:"mini",disabled:e.isEdit&&Boolean(n.readonly)},model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"row.value"}})],1):e._e(),"select"===n.type?t("el-select",{model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"row.value"}},e._l(n.options,(function(a){return t("el-option",{key:a.id,attrs:{label:a.value}},[e._v(e._s(a.label))])})),1):e._e()],1)],1)]}}])})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],attrs:{type:"primary",loading:e.loadingSubmit},on:{click:e.confirmSave}},[e._v("保存")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},n=[],o=a("5530"),l=a("c7eb"),r=a("1da1"),s=(a("4de4"),a("caad"),a("d81d"),a("e9c4"),a("4ec9"),a("b64b"),a("d3b7"),a("2532"),a("3ca3"),a("159b"),a("ddb0"),a("082f")),c=a("ade3"),u=function(){return[{keyAlias:"cluster.test",key:"clusterTest",title:"是否开启集群测试",options:[{label:"是",value:!0},{label:"否",value:!1}],type:"radio",elementType:"是/否 按钮",readonly:0,description:"",dataType:"",value:!1,default:!1,example:"0，1"},{keyAlias:"order.message.enable",key:"orderMessageEnable",title:"是否支持顺序消息",options:[{label:"是",value:!0},{label:"否",value:!1}],type:"radio",elementType:"是/否 按钮",readonly:0,description:"",dataType:"",value:!1,default:!1,example:"0，1"},{keyAlias:"server.worker.threads",key:"serverWorkerThreads",title:"业务线程池线程个数",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:8,default:8,example:"[1,...]"},{keyAlias:"server.callback.executor.threads",key:"serverCallbackExecutorThreads",title:"异步回调线程池线程数量",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:1,default:1,example:"[0,...]"},{keyAlias:"server.selector.threads",key:"serverSelectorThreads",title:"IO 线程池线程个数",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:3,default:3,example:"[1,...]"},{keyAlias:"server.oneway.semaphore.value",key:"serverOnewaySemaphoreValue",title:"单向发送消息最大并发度",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:256,default:256,example:"[1,...]"},{keyAlias:"server.async.semaphore.value",key:"serverAsyncSemaphoreValue",title:"异步发送消息最大并发度",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:64,default:64,example:"[1,...]"},{keyAlias:"server.channel.max.idle.time.seconds",key:"serverChannelMaxIdleTimeSeconds",title:"网络连接最大空闲时间（秒）",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:120,default:120,example:"[1,...]"},{keyAlias:"server.socket.snd.buf.size",key:"serverSocketSndBufSize",title:"socket 发送缓存区大小",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:65535,default:65535,example:"[1,...]"},{keyAlias:"server.socket.rcv.buf.size",key:"serverSocketRcvBufSize",title:"socket 接收缓存区大小",options:"",type:"input",elementType:"文本框",readonly:0,description:"",dataType:"int",value:65535,default:65535,example:"[1,...]"},{keyAlias:"server.pooled.byte.buf.allocator.enable",key:"serverPooledByteBufAllocatorEnable",title:"ByteBuffer是否开启缓存",options:[{label:"是",value:!0},{label:"否",value:!1}],type:"radio",elementType:"是/否 按钮",readonly:0,description:"",dataType:"",value:!0,default:!0,example:"0，1"},{keyAlias:"use.epoll.native.selector",key:"useEpollNativeSelector",title:"是否启用 Epoll IO",options:[{label:"是",value:!0},{label:"否",value:!1}],type:"radio",elementType:"是/否 按钮",readonly:0,description:"",dataType:"",value:!0,default:!0,example:"0，1"}]},d=function(){return[{keyAlias:"flush.disk.type",key:"flushDiskType",title:"消息刷盘方式",options:[{label:"ASYNC_FLUSH",value:"ASYNC_FLUSH"},{label:"SYNC_FLUSH",value:"SYNC_FLUSH"}],type:"radio",elementType:"ASYNC_FLUSH/SYNC_FLUSH 按钮",description:"",dataType:"string",value:"SYNC_FLUSH",default:"SYNC_FLUSH",example:"ASYNC_FLUSH，SYNC_FLUSH"},Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({keyAlias:"auto.create.topic.enable",key:"autoCreateTopicEnable",title:"是否自动创建默认topic",options:"",type:"radio"},"options",[{label:"是",value:!0},{label:"否",value:!1}]),"elementType","是/否 按钮"),"description",""),"dataType","int"),"value",!1),"default",!1),"example","0，1"),{keyAlias:"auto.create.subscription.group",key:"autoCreateSubscriptionGroup",title:"是否自动创建topic的订阅组",options:[{label:"是",value:!0},{label:"否",value:!1}],type:"radio",elementType:"是/否 按钮",description:"",value:!1,default:!1,example:"0，1"},{keyAlias:"delete.when",key:"deleteWhen",title:"持久化消息清理时间点",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:4,default:4,example:"[1,…24]"},{keyAlias:"file.reserved.time",key:"fileReservedTime",title:"持久化消息保留时间（小时）",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:48,default:48,example:"[1,...]"},{keyAlias:"maped.file.size.commit.log",key:"mapedFileSizeCommitLog",title:"单个commitLog文件大小",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:1073741824,default:1073741824,example:"[1,...]"},{keyAlias:"disk.max.used.space.ratio",key:"diskMaxUsedSpaceRatio",title:"磁盘使用率阀值（%）",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:88,default:88,example:"[1,...]"},{keyAlias:"send.message.thread.pool.nums",key:"sendMessageThreadPoolNums",title:"处理消息发送线程数量",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:64,default:64,example:"[1,...]"},{keyAlias:"pull.message.thread.pool.nums",key:"pullMessageThreadPoolNums",title:"处理消息拉取线程数量",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:64,default:64,example:"[1,...]"},{keyAlias:"max.message.size",key:"maxMessageSize",title:"消息体最大限制",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:65536,default:65536,example:"[1,...]"},{keyAlias:"transaction.time.out",key:"transactionTimeOut",title:"事务消息超时时间（ms）",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:6e3,default:6e3,example:""},{keyAlias:"flush.commit.log.thorough.interval",key:"flushCommitLogThoroughInterval",title:"Commitlog刷盘间隔（ms)",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:1e4,default:1e4,example:""},{keyAlias:"wait.time.mills.in.send.queue",key:"waitTimeMillsInSendQueue",title:"发送队列最大等待时间(ms)",options:"",type:"input",elementType:"文本框",description:"",dataType:"int",value:200,default:200,example:""},Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({keyAlias:"slave.read.enable",key:"slaveReadEnable",title:"从节点是否可读",options:"",type:"radio"},"options",[{label:"是",value:!0},{label:"否",value:!1}]),"elementType","是/否 按钮"),"description",""),"dataType","int"),"value",!1),"default",!1),"example","0，1")]};function p(){return[{key:"numNetworkThreads",value:1,keyAlias:"num.network.threads",type:"input",elementType:"文本框",dataType:"int",title:"网络请求的网络线程数目",description:"服务器用于从接收网络请求并发送网络响应的线程数",readonly:!1,default:1},{key:"numIoThreads",value:8,keyAlias:"num.io.threads",type:"input",elementType:"文本框",dataType:"int",title:"处理请求的I/O线程数目",description:"服务器用于处理请求的线程数，可能包括磁盘I/O",readonly:!1,default:8},{key:"socketSendBufferBytes",value:102400,keyAlias:"socket.send.buffer.bytes",type:"input",elementType:"文本框",dataType:"int",title:"发送缓存大小（字节）",description:"服务端用来处理socket连接的SO_SNDBUF缓冲大小。如果值为-1，则使用系统默认值。",readonly:!1,default:102400},{key:"socketReceiveBufferBytes",value:102400,keyAlias:"socket.receive.buffer.bytes",type:"input",elementType:"文本框",dataType:"int",title:"接收缓存大小（字节）",description:"服务端用来处理socket连接的SO_RCVBUFF缓冲大小。如果值为-1，则使用系统默认值。",readonly:!1,default:102400},{key:"socketRequestMaxBytes",value:104857600,keyAlias:"socket.request.max.bytes",type:"input",elementType:"文本框",dataType:"int",title:"最大请求尺寸（字节）",description:"socket请求的最大大小，这是为了防止server跑光内存，不能大于Java堆的大小。",readonly:!1,default:104857600},{key:"numPartitions",value:6,keyAlias:"num.partitions",type:"input",elementType:"文本框",dataType:"int",title:"默认partitions个数",description:"每个topic的默认日志分区数",readonly:!1,default:6},{key:"numRecoveryThreadsPerDataDir",value:2,keyAlias:"num.recovery.threads.per.data.dir",type:"input",elementType:"文本框",dataType:"int",title:"用来日志恢复的线程数目",description:"每个数据目录，用于启动时日志恢复和关闭时刷新的线程数",readonly:!1,default:2},{key:"offsetsTopicReplicationFactor",value:2,keyAlias:"offsets.topic.replication.factor",type:"input",elementType:"文本框",dataType:"short",title:"topic的offset的备份份数",description:"offset topic的副本数（设置的越大，可用性越高）。内部topic创建将失败，直到集群大小满足此副本数要求。",readonly:!1,default:2},{key:"transactionStateLogReplicationFactor",value:2,keyAlias:"transaction.state.log.replication.factor",type:"input",elementType:"文本框",dataType:"short",title:"事务topic备份数量",description:"事务topic的副本数（设置的越大，可用性越高）。内部topic在集群数满足副本数之前，将会一直创建失败。",readonly:!1,default:2},{key:"transactionStateLogMinIsr",value:1,keyAlias:"transaction.state.log.min.isr",type:"input",elementType:"文本框",dataType:"int",title:"事务topic最小insync配置",description:"覆盖事务topic的min.insync.replicas配置",readonly:!1,default:1},{key:"logSegmentBytes",value:1073741824,keyAlias:"log.segment.bytes",type:"input",elementType:"文本框(不能改)",dataType:"int",title:"分区保存数据量（字节）",description:"单个日志段文件最大大小",readonly:!0,default:1073741824},{key:"logRetentionHours",value:168,keyAlias:"log.retention.hours",type:"input",elementType:"文本框",dataType:"int",title:"日志数据保存的时间（小时）",description:"日志删除的时间阈值（小时为单位）",readonly:!1,default:168},{key:"logRetentionCheckIntervalMs",value:3e5,keyAlias:"log.retention.check.interval.ms",type:"input",elementType:"文本框",dataType:"long",title:"检查日志文件间隔时间（ms）",description:"日志清理器检查是否有日志符合删除的频率（以毫秒为单位）",readonly:!1,default:3e5},{key:"zookeeperConnectionTimeoutMs",value:6e4,keyAlias:"zookeeper.connection.timeout.ms",type:"input",elementType:"文本框",dataType:"int",title:"主/从zk的最长差距时间",description:"与ZK server建立连接的超时时间,没有配置就使用zookeeper.session.timeout.ms",readonly:!1,default:6e4},{key:"groupInitialRebalanceDelayMs",value:0,keyAlias:"group.initial.rebalance.delay.ms",type:"input",elementType:"文本框",dataType:"int",title:"重新平衡等待时间（ms)",description:"在执行第一次重新平衡之前，group协调器将等待更多consumer加入group的时间。延迟时间越长意味着重新平衡的工作可能越小，但是等待处理开始的时间增加。",readonly:!1,default:0},{key:"messageMaxBytes",value:10485760,keyAlias:"message.max.bytes",type:"input",elementType:"文本框",dataType:"int",title:"最大消息尺寸（字节）",description:"kafka允许的最大的一个批次的消息大小。 如果这个数字增加，且有0.10.2版本以下的consumer，那么consumer的提取大小也必须增加，以便他们可以取得这么大的记录批次。 在最新的消息格式版本中，记录总是被组合到一个批次以提高效率。 在以前的消息格式版本中，未压缩的记录不会分组到批次中，并且此限制仅适用于该情况下的单个记录。可以使用topic设置`max.message.bytes`来设置每个topic。 max.message.bytes.",readonly:!1,default:10485760},{key:"autoCreateTopicEnable",value:!1,keyAlias:"auto.create.topic.enable",type:"radio",elementType:"是/否 按钮",dataType:"",title:"是否允许创建topic",description:"",readonly:!1,default:!1,options:[{label:"是",value:!0},{label:"否",value:!1}]}]}var f=a("ff51"),m=a("5c8a"),b=a("ec41"),g={name:"message-config-params",components:{},model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function},data:function(){return{loadingSubmit:!1,opts_modules:[],fileList:[],loading:!1,labelPosition:"right",form:{id:"",name:"",tableData:p()},formEditCopy:null,rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],moduleType:[{required:!0,message:"请选择组件",trigger:"change"}]}}},computed:{isEdit:function(){var e;return Boolean(null===(e=this.rowData)||void 0===e?void 0:e.id)}},watch:{},created:function(){this.getOpts_modules()},mounted:function(){this.isEdit&&this.getDetail()},methods:{getOpts_modules:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={componentType:"MQ"},t.next=4,Object(s["e"])(a).then((function(t){e.opts_modules=Object(f["a"])(null===t||void 0===t?void 0:t.data)?t.data:[]}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},changeModule:function(e){var t=this.recoverEditFormWhenBackToOldModuleType(e);t&&this.initTableDataByModuleType(e)},recoverEditFormWhenBackToOldModuleType:function(e){return!this.isEdit||!this.formEditCopy||e!==this.formEditCopy.moduleType||(this.form=Object(m["a"])(this.formEditCopy),!1)},initTableDataByModuleType:function(e){this.form.tableData="ROCKRTMQ_NAME_SERVER"===e?u():"ROCKRTMQ_NAME_BROKER"===e?d():"KAFKA"===e?p():[]},getDetail:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var a,i,n,o,r;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Object(s["b"])(e.rowData.id);case 4:a=t.sent,i=Object(b["a"])(a,"data"),n=Object(b["a"])(a,"data.content"),e.form.name=i.name,e.form.moduleType=i.moduleType,e.form.id=i.id,e.initTableDataByModuleType(i.moduleType),o=JSON.parse(n),r=new Map,o.forEach((function(e){r.set(e.configKey,e.configValue)})),e.form.tableData.forEach((function(e){r.has(e.key)&&(e.value=r.get(e.key))})),e.formEditCopy=Object(m["a"])(e.form),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](1);case 21:e.loading=!1;case 22:case"end":return t.stop()}}),t,null,[[1,18]])})))()},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},confirmSave:function(){var e=this,t=this.form.tableData.map((function(e){return{configKey:e.key,configValue:e.value}}));0!=this.clusterType&&2!=this.clusterType||(t=t.filter((function(e){return!noSubmit.includes(e.configKey)}))),this.$refs.formRef.validate(function(){var a=Object(r["a"])(Object(l["a"])().mark((function a(i){var n;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i&&(n=Object(o["a"])(Object(o["a"])({},e.form),{},{moduleType:"KAFKA",componentType:"KAFKA",content:JSON.stringify(t)}),delete n.tableData,e.loadingSubmit=!0,Object(s["g"])(n).then((function(t){200===t.code&&(e.$message.success("保存成功"),e.$emit("change",!1),e.refresh())})).catch((function(e){})).finally((function(){e.loadingSubmit=!1})));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},tableRowClassName:function(e){var t=e.row;e.rowIndex;return"text"===t.type?"readonly-text-item":""}}},h=g,y=(a("8fef"),a("2877")),v=Object(y["a"])(h,i,n,!1,null,"b33a33d8",null);t["default"]=v.exports},de32:function(e,t,a){},dea8:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"g-page"},[t("search-form",{attrs:{searchConfig:e.searchModel},on:{onSearch:e.onSearch}}),t("div",{staticClass:"flex-inline-between"},[t("el-button",{attrs:{type:"primary"},on:{click:e.openAdd}},[e._v("新增")])],1),t("tableView",{attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,total:e.tableConfig.pagination.totalCount,rowKey:"id",operateSlice:3,currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage,operate:e.getIndex}}),e.visible?t("DialogOrgAdd",{attrs:{rowData:e.rowData,refresh:e.getList},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}}):e._e()],1)},n=[],o=a("5530"),l=(a("14d9"),a("d3b7"),a("498a"),function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:e.isEdit?"编辑":"新增",visible:e.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",attrs:{model:e.formData,"label-width":"120px",rules:e.rules}},[t("el-form-item",{attrs:{label:"名称",prop:"groupName"}},[t("el-input",{staticClass:"w-100",attrs:{placeholder:"请输入名称"},model:{value:e.formData.groupName,callback:function(t){e.$set(e.formData,"groupName","string"===typeof t?t.trim():t)},expression:"formData.groupName"}})],1),t("el-form-item",{attrs:{label:"版本",prop:"version"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择版本"},model:{value:e.formData.version,callback:function(t){e.$set(e.formData,"version",t)},expression:"formData.version"}},e._l(e.kafkaVersionOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"备注",prop:"groupRemark"}},[t("el-input",{staticClass:"w-100",attrs:{placeholder:"请输入描述",type:"textarea"},model:{value:e.formData.groupRemark,callback:function(t){e.$set(e.formData,"groupRemark","string"===typeof t?t.trim():t)},expression:"formData.groupRemark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)}),r=[],s=(a("b64b"),a("159b"),a("e8b2")),c=a("264f"),u=a("49bb"),d={name:"dialog-org-add",components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:function(){return{}}},refresh:{type:Function,required:!0,default:function(){}}},data:function(){return{formData:p(),kafkaVersionOptions:u["h"],rules:{groupName:[{required:!0,trigger:"blur",message:"请输入名称"}],version:[{required:!0,trigger:"change",message:"请选择版本"}]}}},computed:{visible:{get:function(){return this.show},set:function(e){this.$emit("change",!1)}},isEdit:function(){var e;return Boolean(null===(e=this.rowData)||void 0===e?void 0:e.id)}},watch:{},created:function(){},mounted:function(){var e;null!==(e=this.rowData)&&void 0!==e&&e.id&&(this.formData=p(this.rowData))},methods:{clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this;this.$refs.formRef.validate((function(t){if(t){var a=Object(o["a"])({},e.formData);e.isEdit?Object(c["w"])(a).then((function(t){t&&200===t.code&&(e.$message.success("修改成功"),e.$emit("change",!1),e.refresh())})):(delete a.id,Object(c["h"])(a).then((function(t){t&&200===t.code&&(e.$message.success("新增成功"),e.refresh(),e.$emit("change",!1))})))}}))}}};function p(e){var t={id:"",groupName:"",version:"",groupRemark:""};return Object(s["a"])(e)&&Object.keys(t).forEach((function(a){e.hasOwnProperty(a)&&(t[a]=e[a])})),t}var f=d,m=a("2877"),b=Object(m["a"])(f,l,r,!1,null,"3d692200",null),g=b.exports,h=a("ec41"),y=a("ff51"),v={name:"kafka-multiple-center-settings",components:{DialogOrgAdd:g},mixins:[],props:{},data:function(){return{requestObject:{wrapName:""},visible:!1,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,totalCount:0},tableData:[],columns:[{prop:"groupName",label:"名称"},{prop:"version",label:"版本"},{prop:"aliveClusterNumber",label:"多活集群数"},{prop:"backupClusterNumber",label:"灾备集群数"},{prop:"groupRemark",label:"备注"}],operate:{width:220,list:[{label:"多中心管理",id:"manage"},{label:"编辑",id:"edit"},{label:"删除",id:"delete"}]}},searchModel:{searchData:{groupName:""},searchItem:[{type:"input",label:"名称",prop:"groupName"}],rules:{}},rowData:null}},computed:{},watch:{},created:function(){this.getList()},mounted:function(){},methods:{onSearch:function(){this.tableConfig.pagination.currentPage=1,this.getList()},getList:function(){var e=this,t={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:Object(o["a"])({},this.searchModel.searchData)};this.tableConfig.loading=!0,Object(c["t"])(t).then((function(t){var a=Object(h["a"])(t,"data.data");e.tableConfig.tableData=Object(y["a"])(a)?a:[],e.tableConfig.pagination.totalCount=Object(h["a"])(t,"data.totalCount")||0})).catch((function(e){})).finally((function(){e.tableConfig.loading=!1}))},getIndex:function(e){var t=this,a=(e.index,e.row),i=e.operate;"delete"===i.id?this.$confirm("确定要删除【".concat(a.groupName,"】吗?"),{type:"warning"}).then((function(){Object(c["b"])(a.id).then((function(e){200===e.code&&(t.$message.success("删除成功"),t.getList())})).catch((function(e){}))})).catch((function(e){})):"edit"===i.id?(this.rowData=a,this.visible=!0):"manage"===i.id&&this.$router.push({path:"/kafka/kafka-multiple-center/multiple-center-manage",query:{groupId:a.id}})},clickSearchButton:function(e){e&&(this.requestObject.wrapName="",this.tableConfig.pagination.pageNo=1),this.getList()},openAdd:function(){this.rowData=null,this.visible=!0},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()}}},k=v,C=Object(m["a"])(k,i,n,!1,null,"7c4e86c4",null);t["default"]=C.exports},e657:function(e,t,a){},e824:function(e,t,a){"use strict";a("e657")},f0fb:function(e,t,a){"use strict";a("32b8")},f133:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-row",e._l(e.list,(function(a,i){return t("el-col",{key:i,attrs:{span:6}},[t("div",{staticClass:"top-box"},[t("img",{attrs:{src:a.src,alt:"",width:"35"}}),t("ul",[t("li",{staticClass:"top-item-value",style:{color:a.color}},[e._v(" "+e._s(e.topData[a.value])+" ")]),t("li",{staticClass:"top-item-label"},[e._v(e._s(a.label))])])])])})),1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.clusterList.length>0?t("el-row",{attrs:{gutter:20}},e._l(e.clusterList,(function(a){return t("el-col",{key:a.id,staticClass:"mb-15 cluster-card-item",attrs:{span:6}},[t("div",{staticClass:"item-card"},[t("header",{staticClass:"mb-20",attrs:{title:a.clusterName}},[t("span",{staticClass:"item-title"},[e._v(e._s(a.clusterName||"集群"))])]),t("el-tag",{staticClass:"item-card-status",attrs:{type:e.getTagType(a.clusterStatus),effect:"dark"}},[e._v(e._s(e._f("F_message_kafkaClusterStatusOptions")(a.clusterStatus)))]),t("el-descriptions",{staticStyle:{padding:"15px"},attrs:{column:1,size:"small",labelStyle:{width:"100px",color:"#999"}}},[t("el-descriptions-item",{attrs:{label:"正常节点占比"}},[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.linkPage("2"===a.deployMode?"/kafka/clusterManagement/kafka-node-manage":"/kafka/clusterManagement/kafka-node-manage-container",a)}}},[e._v(" "+e._s(a.instanceInfo)+" ")])],1),t("el-descriptions-item",{attrs:{label:"机器数"}},[t("el-link",{ref:"",refInFor:!0,attrs:{type:"primary"},on:{click:function(t){return e.linkPage("/kafka/clusterMonitoring/machineMonitoring",a)}}},[e._v(" "+e._s(a.machineNo)+" ")])],1),t("el-descriptions-item",{attrs:{label:"Kafka版本"}},[e._v(e._s(a.kafkaVersion))]),t("el-descriptions-item",{attrs:{label:"正常zk占比"}},[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.linkPage("/kafka/clusterMonitoring/ZKInformation",a)}}},[e._v(" "+e._s(a.zkInfo)+" ")])],1),t("el-descriptions-item",{attrs:{label:"Topic数量"}},[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.linkPage("/kafka/clusterMonitoring/trafficMonitoring",a)}}},[e._v(" "+e._s(a.topicNo)+" ")])],1),t("el-descriptions-item",{attrs:{label:"Group数量"}},[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.linkPage("/kafka/clusterMonitoring/groupMonitoring",a)}}},[e._v(" "+e._s(a.groupNo)+" ")])],1),t("el-descriptions-item",{attrs:{label:"Consumer数量"}},[e._v(e._s(a.consumerNo))]),t("el-descriptions-item",{attrs:{label:"消息堆积"}},[e._v(e._s(a.topicLags))])],1)],1)])})),1):t("el-empty")],1)],1)},n=[],o=(a("14d9"),a("d3b7"),a("1bf2"),a("159b"),a("f255")),l=a("ec41"),r=a("e8b2"),s=a("bc59"),c=a("49bb"),u={name:"cache-cluster-monitor",components:{},mixins:[],props:{},data:function(){return{list:[{label:"集群总数",src:a("e796"),value:"cluster",color:"#1d70f5"},{label:"正常集群",src:a("e18b"),value:"runNodeNo",color:"#67c23a"},{label:"异常集群",src:a("1fe8"),value:"errorNodeNo",color:"#f56c6c"},{label:"告警集群",src:a("84b1"),value:"alarmNo",color:"#e6a23c"}],topData:d(),clusterList:[],loading:!1}},computed:{},watch:{},created:function(){this.getData()},mounted:function(){},methods:{getData:function(){var e=this;this.loading=!0,Object(o["b"])({pageNo:1,pageSize:100}).then((function(t){e.clusterList=Object(l["a"])(t,"data",[])})).finally((function(){e.loading=!1})),Object(o["a"])().then((function(t){Object(r["a"])(t.data)&&(e.topData=d(t.data))}))},linkPage:function(e,t){this.$router.push({path:e,query:{id:t.clusterId,clusterName:t.clusterName,machineRoomName:t.machineRoomName}})},routelink:function(e){this.$router.push({path:"/clusterMonitoring/rocketmq-node-monitor",query:{id:e.id,clusterName:e.clusterName}})},routelinkManage:function(){var e="/clusterManagement/cluster/index";this.$router.push({path:e})},getTagType:function(e){return Object(c["g"])(e,"KafkaClusterStatusOptions",["value","type"])}}};function d(e){var t="-",a={runNodeNo:t,errorNodeNo:t,alarmNo:t},i=["runNodeNo","errorNodeNo","alarmNo"];if(e){var n=0;Reflect.ownKeys(a).forEach((function(t,o){Object(s["a"])(e,i[o])&&(a[t]=e[i[o]],n+=parseInt(e[i[o]]))})),a.cluster=n}return a}var p=u,f=(a("e824"),a("2877")),m=Object(f["a"])(p,i,n,!1,null,"3d830066",null);t["default"]=m.exports},f1c1:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("div",{staticClass:"name-container"},[t("search-form",{attrs:{searchConfig:e.searchConfig},on:{onSearch:e.onSearch}}),t("button-list",{attrs:{data:e.buttonList}}),t("tableView",{ref:"tableView",attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,total:e.tableConfig.pagination.totalCount,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage,operate:e.getIndex}}),e.showDetail?t("ConfigDetail",{attrs:{rowData:e.rowData,refresh:e.getList},model:{value:e.showDetail,callback:function(t){e.showDetail=t},expression:"showDetail"}}):e._e()],1)])},n=[],o=a("5530"),l=(a("b0c0"),a("d3b7"),a("db39")),r=a("082f"),s=(a("cfcc"),a("ec41")),c=a("ff51"),u={filters:{},components:{ConfigDetail:l["default"]},data:function(){return{showDialog:!1,showDetail:!1,showPasswordDialog:!1,buttonList:[{label:"新增",type:"add",click:this.addInfo}],tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"name",label:"名称",align:"center"},{prop:"moduleType",label:"类型",align:"center"},{prop:"updateUserName",label:"更新人",align:"center"},{prop:"updateDate",label:"更新时间",align:"center"}],operate:{width:220,list:[{label:"编辑",id:"edit"},{label:"删除",id:"delete"}]}},searchConfig:{searchData:{name:""},searchItem:[{type:"input",label:"名称",prop:"name"}],rules:{}}}},mounted:function(){this.getList()},methods:{getList:function(){var e=this,t={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:Object(o["a"])(Object(o["a"])({},this.searchConfig.searchData),{},{componentType:"Kafka"})};this.tableConfig.loading=!0,Object(r["f"])(t).then((function(t){var a,i=Object(s["a"])(t,"data.data");e.tableConfig.tableData=Object(c["a"])(i)?i:[],e.tableConfig.pagination.totalCount=null!==(a=Object(s["a"])(t,"data.totalCount"))&&void 0!==a?a:0})).finally((function(){e.tableConfig.loading=!1}))},addInfo:function(){this.showDetail=!0,this.rowData=null},onSearch:function(){this.tableConfig.pagination.pageNo=1,this.getList()},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},getIndex:function(e){var t=this,a=(e.index,e.row),i=e.operate;"delete"===i.id?this.$confirm("确定要删除【".concat(a.name,"】吗?"),{type:"warning"}).then((function(){t.tableConfig.loading=!0,Object(r["a"])(a.id).then((function(e){t.$message.success("删除成功"),t.getList()})).catch((function(e){}))})).catch((function(e){})).finally((function(){t.tableConfig.loading=!1})):"edit"===i.id&&(this.rowData=a,this.showDetail=!0)}}},d=u,p=a("2877"),f=Object(p["a"])(d,i,n,!1,null,"446242ef",null);t["default"]=f.exports},fb04:function(e,t,a){}}]);