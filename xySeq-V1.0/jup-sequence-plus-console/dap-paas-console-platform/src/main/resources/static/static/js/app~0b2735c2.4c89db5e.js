(window["jsonpPaas4"]=window["jsonpPaas4"]||[]).push([["app~0b2735c2"],{"0d2f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("el-row",t._l(t.list,(function(a,i){return e("el-col",{key:i,attrs:{span:6}},[e("div",{staticClass:"top-box"},[e("img",{attrs:{src:a.src,alt:"",width:"35"}}),e("ul",[e("li",{staticClass:"top-item-value",style:{color:a.color}},[t._v(" "+t._s(t.topData[a.value])+" ")]),e("li",{staticClass:"top-item-label"},[t._v(t._s(a.label))])])])])})),1),e("el-row",{attrs:{gutter:20}},t._l(t.clusterList,(function(a){return e("el-col",{key:a.id,staticClass:"mb-20",staticStyle:{height:"450px"},attrs:{span:6}},[e("div",{staticClass:"item-card"},[e("header",{staticClass:"mb-20"},[e("span",{staticClass:"item-title"},[t._v(t._s(a.appName))])]),e("el-descriptions",{attrs:{column:1,size:"medium",labelStyle:{width:"150px",color:"#999"}}},[e("el-descriptions-item",{attrs:{label:"应用限流"}},[e("el-tag",{attrs:{type:t.convertStatus(a.flowState).type}},[t._v(t._s(t.convertStatus(a.flowState).text))])],1),e("el-descriptions-item",{attrs:{label:"应用黑白名单"}},[e("el-tag",{attrs:{type:t.convertStatus(a.blackWhiteState).type}},[t._v(t._s(t.convertStatus(a.blackWhiteState).text))])],1),e("el-descriptions-item",{attrs:{label:"异常实例数占比"}},[t._v(" "+t._s(a.instanceExceptionCount)+"/"+t._s(a.instanceNum)+" ")]),e("el-descriptions-item",{attrs:{label:"资源限流开启占比"}},[t._v(" "+t._s(a.resFlowOpenNum)+"/"+t._s(a.resNum)+" ")]),e("el-descriptions-item",{attrs:{label:"资源黑白名单开启占比"}},[t._v(" "+t._s(a.resBlackWhiteOpenNum)+"/"+t._s(a.resNum)+" ")]),e("el-descriptions-item",{attrs:{label:"类占比"}},[t._v(t._s(a.matchClassNum)+"/"+t._s(a.resNum))]),e("el-descriptions-item",{attrs:{label:"自定义占比"}},[t._v(t._s(a.matchCustomNum)+"/"+t._s(a.resNum))]),e("el-descriptions-item",{attrs:{label:"方法/数据占比"}},[t._v(t._s(a.matchMethodNum)+"/"+t._s(a.resNum))])],1)],1)])})),1)],1)},r=[],n=(a("d3b7"),a("1bf2"),a("159b"),a("75d1")),o=a("e8b2"),s=a("ec41"),l=a("bc59"),c=a("49bb"),u={name:"cache-cluster-monitor",components:{},mixins:[],props:{},data:function(){return{list:[{iconClass:"clusterConfiguration",label:"应用总数",src:a("e796"),value:"cluster",color:"#1d70f5"},{icon:"el-icon-circle-check",label:"正常应用",src:a("e18b"),value:"normal",color:"#67c23a"},{icon:"el-icon-circle-close",label:"异常应用",src:a("1fe8"),value:"abnormal",color:"#f56c6c"},{icon:"el-icon-warning-outline",label:"告警应用",src:a("84b1"),value:"warning",color:"#e6a23c"}],topData:p(),clusterList:[]}},computed:{},watch:{},created:function(){this.getData()},mounted:function(){},methods:{convertStatus:function(t){return 1===t?{text:"开启",type:"success"}:{text:"关闭",type:"danger"}},getData:function(){var t=this;Object(n["b"])().then((function(e){var a;Object(o["a"])(e.data)&&(t.topData=p(e.data.overviewAppVo)),t.clusterList=null!==(a=Object(s["a"])(e,"data.overviewPo"))&&void 0!==a?a:[]})).catch((function(t){}))},getTagType:function(t){return Object(c["g"])(t,"messageClusterStatusOptions",["value","type"])}}};function p(t){var e="-",a={cluster:e,normal:e,abnormal:e,warning:e},i=["appNum","appNormalCount","appExceptionCount","appWarningCount"];return t&&Reflect.ownKeys(a).forEach((function(e,r){Object(l["a"])(t,i[r])&&(a[e]=t[i[r]])})),a}var d=u,m=(a("37296"),a("2877")),f=Object(m["a"])(d,i,r,!1,null,"5729c3f3",null);e["default"]=f.exports},1600:function(t,e,a){"use strict";a.r(e);a("b0c0"),a("498a");var i=function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:"主备关系-".concat(t.isEdit?"编辑":"新增"),visible:t.visible,size:"medium",loading:t.loading,"append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[e("el-form",{ref:"formRef",attrs:{model:t.formData,"label-width":"120px",rules:t.rules}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"名称",prop:"name"}},[e("el-input",{staticClass:"w-100",attrs:{placeholder:"请输入名称"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name","string"===typeof e?e.trim():e)},expression:"formData.name"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"角色",prop:"clusterRole"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择角色"},model:{value:t.formData.clusterRole,callback:function(e){t.$set(t.formData,"clusterRole",e)},expression:"formData.clusterRole"}},t._l(t.configClusterRoleOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("el-col",[e("el-form-item",{attrs:{label:"注册中心来源"}},[e("el-radio",{attrs:{label:"0"},model:{value:t.formData.regSource,callback:function(e){t.$set(t.formData,"regSource",e)},expression:"formData.regSource"}},[t._v("自定义")]),e("el-radio",{attrs:{label:"1"},model:{value:t.formData.regSource,callback:function(e){t.$set(t.formData,"regSource",e)},expression:"formData.regSource"}},[t._v("注册中心模块")])],1)],1),"1"===t.formData.regSource?e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"组织",prop:"orgId"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择组织"},on:{change:t.changeOrgId},model:{value:t.formData.orgId,callback:function(e){t.$set(t.formData,"orgId",e)},expression:"formData.orgId"}},t._l(t.csMixOrg,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1):t._e(),"1"===t.formData.regSource?e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"地区",prop:"cityId"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择地区"},on:{change:t.changeCityId},model:{value:t.formData.cityId,callback:function(e){t.$set(t.formData,"cityId",e)},expression:"formData.cityId"}},t._l(t.csMixCity,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1):t._e(),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"注册中心类型",prop:"registryClusterType"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择注册中心类型"},on:{change:t.changeRegType},model:{value:t.formData.registryClusterType,callback:function(e){t.$set(t.formData,"registryClusterType",e)},expression:"formData.registryClusterType"}},t._l(t.registryClusterOptions,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("el-col",{attrs:{span:12}},["1"===t.formData.regSource?e("el-form-item",{attrs:{label:"注册中心",prop:"registryClusterId"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择注册中心"},model:{value:t.formData.registryClusterId,callback:function(e){t.$set(t.formData,"registryClusterId",e)},expression:"formData.registryClusterId"}},t._l(t.registryCenterList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.clusterName,value:t.id}})})),1)],1):t._e()],1),e("el-col",["0"===t.formData.regSource?e("el-form-item",{attrs:{label:"注册中心地址",prop:"regAddress"}},[e("el-input",{attrs:{placeholder:"请输入注册中心地址"},model:{value:t.formData.regAddress,callback:function(e){t.$set(t.formData,"regAddress",e)},expression:"formData.regAddress"}})],1):t._e()],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"数据库类型",prop:"dataSourceType"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请输入数据库类型"},model:{value:t.formData.dataSourceType,callback:function(e){t.$set(t.formData,"dataSourceType",e)},expression:"formData.dataSourceType"}},t._l(t.dict_dataBaseType,(function(t,a){return e("el-option",{key:a,attrs:{value:t.value,label:t.label}})})),1)],1)],1),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"数据库驱动",prop:"driverClassName"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择"},model:{value:t.formData.driverClassName,callback:function(e){t.$set(t.formData,"driverClassName",e)},expression:"formData.driverClassName"}},t._l(t.dictcommon_dbDriver,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("el-col",[e("el-form-item",{attrs:{label:"",prop:"databaseAddress"}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 数据库地址"),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"jdbc:mysql://IP地址:端口/gov_backup_test?autoReconnect=true&useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=GMT%2B8",placement:"top-start"}},[e("span",{attrs:{type:"text"}},[e("i",{staticClass:"el-icon-question"})])])],1),e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入数据库地址"},model:{value:t.formData.databaseAddress,callback:function(e){t.$set(t.formData,"databaseAddress",e)},expression:"formData.databaseAddress"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"数据库账号",prop:"databaseUsername"}},[e("el-input",{attrs:{placeholder:"请输入数据库账号"},model:{value:t.formData.databaseUsername,callback:function(e){t.$set(t.formData,"databaseUsername",e)},expression:"formData.databaseUsername"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"数据库密码",prop:"databasePassword"}},[e("el-input",{attrs:{placeholder:"请输入数据库密码","show-password":!0,"auto-complete":"new-password"},model:{value:t.formData.databasePassword,callback:function(e){t.$set(t.formData,"databasePassword",e)},expression:"formData.databasePassword"}})],1)],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.clickConfirm}},[t._v("确定")]),e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],1)},r=[],n=a("5530"),o=(a("b64b"),a("d3b7"),a("159b"),a("ff32")),s=a("1b62"),l=a("6657"),c=a("e8b2"),u=a("ff51"),p=a("212b"),d=a("80f3");function m(t){var e={id:"",name:"",regSource:"0",regAddress:"",clusterRole:"",orgId:"",cityId:"",registryClusterType:"",registryClusterId:"",databaseAddress:"",databasePassword:"",databaseUsername:"",driverClassName:"",dataSourceType:""};return Object(c["a"])(t)&&Object.keys(e).forEach((function(a){t.hasOwnProperty(a)&&(e[a]=t[a])})),e}var f=s["a"].CommonSelectCreaterMix,g={components:{},mixins:[f(["csMixCity","csMixOrg"])],model:{prop:"show",event:"change"},props:{show:Boolean,refresh:{type:Function,require:!0},rowData:{type:Object,default:null}},data:function(){return{loading:!1,dictcommon_dbDriver:d["b"].options,dict_dataBaseType:p["b"].options,registryClusterOptions:o["g"],configClusterRoleOptions:o["a"],registryCenterList:[],formData:m(),rules:{name:[{required:!0,trigger:"change",message:"请选择地区"}],clusterRole:[{required:!0,trigger:"change",message:"请选择类型"}],registryClusterType:[{required:!0,trigger:"change",message:"请选择注册中心类型"}],registryClusterId:[{required:!0,trigger:"change",message:"请选择注册中心"}],regAddress:[{required:!0,trigger:"blur",message:"请输入注册中心地址"}],orgId:[{required:!0,trigger:"change",message:"请选择组织"}],cityId:[{required:!0,trigger:"change",message:"请选择地区"}],databaseAddress:[{required:!0,trigger:"blur",message:"请输入数据库地址"}],databaseUsername:[{required:!0,trigger:"blur",message:"请输入数据库账号"}],databasePassword:[{required:!0,trigger:"blur",message:"请输入数据库密码"}],dataSourceType:[{required:!0,trigger:"change",message:"请选择数据库类型"}],driverClassName:[{required:!0,trigger:"change",message:"请选择数据库驱动"}]}}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("change",!1)}},isEdit:function(){var t;return Boolean(null===(t=this.rowData)||void 0===t?void 0:t.id)},regParams:function(){var t=this.formData,e=t.orgId,a=t.cityId,i=t.registryClusterType;return e&&a&&i?{orgId:e,cityId:a,clusterType:i}:null}},watch:{},created:function(){},mounted:function(){var t;null!==(t=this.rowData)&&void 0!==t&&t.id&&(this.formData=m(this.rowData),this.getRegList())},methods:{changeOrgId:function(){this.formData.registryClusterId="",this.getRegList()},changeCityId:function(){this.formData.registryClusterId="",this.getRegList()},changeRegType:function(){this.formData.registryClusterId="",this.getRegList()},getRegList:function(){var t=this;this.regParams?Object(l["f"])(this.regParams).then((function(e){t.registryCenterList=Object(u["a"])(null===e||void 0===e?void 0:e.data)?e.data:[]})).catch((function(t){})):this.registryCenterList=[]},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var t=this;this.$refs.formRef.validate((function(e){if(e){var a=Object(n["a"])({},t.formData);t.loading=!0,t.isEdit?Object(l["g"])(a).then((function(e){e&&200===e.code&&(t.$message.success("编辑成功"),t.$emit("change",!1),t.refresh())})).finally((function(){t.loading=!1})):(delete a.id,Object(l["a"])(a).then((function(e){e&&200===e.code&&(t.$message.success("新增成功"),t.$emit("change",!1),t.refresh())})).finally((function(){t.loading=!1})))}}))}}},h=g,b=a("2877"),v=Object(b["a"])(h,i,r,!1,null,"46567933",null);e["default"]=v.exports},1958:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("LineCharts",{attrs:{lineData:t.dataPut,height:"500px"}})],1)},r=[],n=(a("d81d"),a("a9e3"),a("8c3b")),o=a("e6c9"),s=a("ec41"),l={components:{LineCharts:n["default"]},mixins:[],props:{appId:String,instanceName:String,day:Number,resource:String},data:function(){return{realTimeLenged:[{key:"counts",value:"资源总访问量"},{key:"limits",value:"资源总限流"},{key:"fuses",value:"资源总熔断"}],dataPut:{name:"历史图",legend:{data:["资源总访问量","资源总限流","资源总熔断"]},xAxisData:[],data:[{name:"资源总访问量",value:[]},{name:"资源总限流",value:[]},{name:"资源总熔断",value:[]}],color:["rgba(18,61,172,0.5)"]}}},computed:{},watch:{appId:function(t){t&&this.instanceName&&this.resource&&this.getRealtimeGraph()},instanceName:function(t){t&&this.resource&&this.getRealtimeGraph()},resource:function(t){t&&this.getRealtimeGraph()},day:function(t){t&&this.getRealtimeGraph()}},created:function(){},mounted:function(){this.getRealtimeGraph()},methods:{getRealtimeGraph:function(){var t=this;Object(o["i"])({appName:this.appId,instanceName:this.instanceName,day:this.day,resourceName:this.resource}).then((function(e){var a=Object(s["a"])(e,"data.dates"),i=t.realTimeLenged.map((function(t){return{name:t.value,value:Object(s["a"])(e,"data."+t.key)}})),r=t.realTimeLenged.map((function(t){return t.value}));t.dataPut.legend.data=r,t.dataPut.data=i,t.dataPut.xAxisData=a}))}}},c=l,u=a("2877"),p=Object(u["a"])(c,i,r,!1,null,"6ce2588e",null);e["default"]=p.exports},"26f0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("el-row",t._l(t.list,(function(a,i){return e("el-col",{key:i,attrs:{span:6}},[e("div",{staticClass:"top-box"},[e("img",{attrs:{src:a.src,alt:"",width:"35"}}),e("ul",[e("li",{staticClass:"top-item-value",style:{color:a.color}},[t._v(" "+t._s(t.topData[a.value])+" ")]),e("li",{staticClass:"top-item-label"},[t._v(t._s(a.label))])])])])})),1),e("el-row",{attrs:{gutter:20}},t._l(t.clusterList,(function(a){return e("el-col",{key:a.id,staticClass:"mb-20",staticStyle:{height:"450px"},attrs:{span:6}},[e("div",{staticClass:"item-card"},[e("header",{staticClass:"mb-20"},[e("span",{staticClass:"item-title"},[t._v(t._s(a.appName))])]),e("el-descriptions",{attrs:{column:1,size:"medium",labelStyle:{width:"120px",color:"#999"}}},[e("el-descriptions-item",{attrs:{label:"异常实例数占比"}},[t._v(t._s(a.instanceExceptionCount)+"/"+t._s(a.instanceNum)+" ")]),e("el-descriptions-item",{attrs:{label:"资源熔断开启占比"}},[t._v(t._s(a.resFuseOpenNum)+"/"+t._s(a.resNum)+" ")]),e("el-descriptions-item",{attrs:{label:"类占比"}},[t._v(t._s(a.matchClassNum)+"/"+t._s(a.resNum))]),e("el-descriptions-item",{attrs:{label:"自定义占比"}},[t._v(t._s(a.matchCustomNum)+"/"+t._s(a.resNum))]),e("el-descriptions-item",{attrs:{label:"方法/数据占比"}},[t._v(t._s(a.matchMethodNum)+"/"+t._s(a.resNum))])],1)],1)])})),1)],1)},r=[],n=(a("d3b7"),a("1bf2"),a("159b"),a("75d1")),o=a("e8b2"),s=a("ec41"),l=a("bc59"),c=a("49bb"),u={name:"cache-cluster-monitor",components:{},mixins:[],props:{},data:function(){return{list:[{iconClass:"clusterConfiguration",label:"应用总数",src:a("e796"),value:"cluster",color:"#1d70f5"},{icon:"el-icon-circle-check",label:"正常应用",src:a("e18b"),value:"normal",color:"#67c23a"},{icon:"el-icon-circle-close",label:"异常应用",src:a("1fe8"),value:"abnormal",color:"#f56c6c"},{icon:"el-icon-warning-outline",label:"告警应用",src:a("84b1"),value:"warning",color:"#e6a23c"}],topData:p(),clusterList:[]}},computed:{},watch:{},created:function(){this.getData()},mounted:function(){},methods:{getData:function(){var t=this;Object(n["a"])().then((function(e){var a;Object(o["a"])(e.data)&&(t.topData=p(e.data.overviewAppVo)),t.clusterList=null!==(a=Object(s["a"])(e,"data.overviewPo"))&&void 0!==a?a:[]})).catch((function(t){}))},getTagType:function(t){return Object(c["g"])(t,"messageClusterStatusOptions",["value","type"])}}};function p(t){var e="-",a={cluster:e,normal:e,abnormal:e,warning:e},i=["appNum","appNormalCount","appExceptionCount","appWarningCount"];return t&&Reflect.ownKeys(a).forEach((function(e,r){Object(l["a"])(t,i[r])&&(a[e]=t[i[r]])})),a}var d=u,m=(a("8b8c"),a("2877")),f=Object(m["a"])(d,i,r,!1,null,"0dceab7e",null);e["default"]=f.exports},"2de0":function(t,e,a){"use strict";a.r(e);a("a4d3"),a("e01a"),a("b0c0"),a("498a");var i=function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:"定时详情",visible:t.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[e("el-form",{ref:"formRef",attrs:{model:t.formData,"label-width":"120px",rules:t.rules,disabled:""}},[e("el-form-item",{attrs:{label:"任务名称",prop:"jobName"}},[e("el-input",{staticClass:"form-item-width",model:{value:t.formData.jobName,callback:function(e){t.$set(t.formData,"jobName","string"===typeof e?e.trim():e)},expression:"formData.jobName"}})],1),e("el-form-item",{attrs:{label:"定时时间",prop:"jobCron"}},[e("el-input",{staticClass:"form-item-width",model:{value:t.formData.jobCron,callback:function(e){t.$set(t.formData,"jobCron","string"===typeof e?e.trim():e)},expression:"formData.jobCron"}})],1),e("el-form-item",{attrs:{label:"目标集群",prop:"slaveIds"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"",multiple:""},model:{value:t.formData.slaveIds,callback:function(e){t.$set(t.formData,"slaveIds",e)},expression:"formData.slaveIds"}},t._l(t.targetClusterList,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"任务描述",prop:"description"}},[e("el-input",{staticClass:"form-item-width",model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description","string"===typeof e?e.trim():e)},expression:"formData.description"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],1)},r=[],n=a("58bf"),o=a("ec41"),s={components:{},model:{prop:"show",event:"change"},props:{show:Boolean,refresh:{type:Function,require:!0},rowData:{type:Object,default:function(){return{}}}},data:function(){return{formData:{jobName:"",jobCron:"",masterId:"",slaveIds:[]},rules:{},targetClusterList:[]}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("change",!1)}}},watch:{},created:function(){this.getTarget(),this.getDetailList()},mounted:function(){},methods:{getTarget:function(){var t=this;Object(n["a"])().then((function(e){t.targetClusterList=Object(o["a"])(e,"data")}))},getDetailList:function(){var t=this;Object(n["c"])(this.rowData.jobId).then((function(e){if(200===e.code){var a=Object(o["a"])(e,"data.slaveId"),i=a?a.split(","):[];t.formData.slaveIds=i,t.formData.jobName=Object(o["a"])(e,"data.jobName"),t.formData.jobCron=Object(o["a"])(e,"data.jobCron"),t.formData.description=Object(o["a"])(e,"data.description")}}))},clickCancel:function(){this.$emit("change",!1)},clickConfirm:function(){this.$emit("change",!1)}}},l=s,c=a("2877"),u=Object(c["a"])(l,i,r,!1,null,"25e1ec60",null);e["default"]=u.exports},3314:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("LineCharts",{attrs:{lineData:t.dataPut,height:"500px"}})],1)},r=[],n=(a("d81d"),a("a9e3"),a("8c3b")),o=a("e6c9"),s=a("ec41"),l={components:{LineCharts:n["default"]},mixins:[],props:{appId:String,instanceName:String,minute:Number},data:function(){return{realTimeLenged:[{key:"counts",value:"应用总访问量"},{key:"limits",value:"应用总限流"},{key:"fuses",value:"应用总熔断"}],dataPut:{name:"实时图",legend:{data:[]},xAxisData:[],data:[],color:["rgba(18,61,172,0.5)"]}}},computed:{},watch:{appId:function(t){t&&this.instanceName&&this.getRealtimeGraph()},instanceName:function(t){t&&this.getRealtimeGraph()},minute:function(t){t&&this.getRealtimeGraph()}},created:function(){},mounted:function(){this.getRealtimeGraph()},methods:{getRealtimeGraph:function(){var t=this;Object(o["h"])({resAppFlag:1,appName:this.appId,instanceName:this.instanceName,date:"",consumerProviderFlag:"",minute:this.minute}).then((function(e){var a=Object(s["a"])(e,"data.dates"),i=t.realTimeLenged.map((function(t){return{name:t.value,value:Object(s["a"])(e,"data."+t.key)}})),r=t.realTimeLenged.map((function(t){return t.value}));t.dataPut.legend.data=r,t.dataPut.data=i,t.dataPut.xAxisData=a}))}}},c=l,u=a("2877"),p=Object(u["a"])(c,i,r,!1,null,"3f7c09d4",null);e["default"]=p.exports},37296:function(t,e,a){"use strict";a("e7fe")},3955:function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:"数据迁移",visible:t.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[e("el-form",{ref:"formRef",attrs:{model:t.formData,"label-width":"120px",rules:t.rules}},[e("el-form-item",{attrs:{label:"当前集群"}},[t._v(" "+t._s(t.rowData.name)+" ")]),e("el-form-item",{attrs:{label:"目标集群",prop:"targetMoveId"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择目标集群",multiple:""},model:{value:t.formData.targetMoveId,callback:function(e){t.$set(t.formData,"targetMoveId",e)},expression:"formData.targetMoveId"}},t._l(t.targetClusterList,(function(a){return e("el-option",{key:a.id,staticClass:"el-option-box",attrs:{disabled:a.id===t.rowData.id,value:a.id,label:"".concat(a.name)}},[e("ul",{staticClass:"el-option-ul-between"},[e("li",[t._v(t._s(a.name))]),e("li",[t._v(t._s(a.cityName))])])])})),1)],1),e("el-form-item",{attrs:{label:"迁移类型",prop:"dataMoveType"}},[e("el-radio-group",{model:{value:t.formData.dataMoveType,callback:function(e){t.$set(t.formData,"dataMoveType",e)},expression:"formData.dataMoveType"}},t._l(t.dataMoveTypeOptions,(function(a){return e("el-radio",{key:a.value,attrs:{label:a.value}},[t._v(t._s(a.label))])})),1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{loading:t.loadingConfirm,type:"primary"},on:{click:t.clickConfirm}},[t._v("确定")]),e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],1)},r=[],n=(a("a15b"),a("d3b7"),a("ff32")),o=a("6657"),s=a("58bf"),l=a("ec41"),c={components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,refresh:{type:Function,require:!0},rowData:{type:Object,default:function(){return{}}}},data:function(){return{dataMoveTypeOptions:n["d"],formData:{targetMoveId:[],dataMoveType:"2"},rules:{targetMoveId:[{required:!0,trigger:"change",message:"请选择目标集群"}],dataMoveType:[{required:!0,trigger:"change",message:"请选择数据迁移类型"}]},loadingConfirm:!1,targetClusterList:[]}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("change",!1)}}},watch:{},created:function(){this.getTarget()},mounted:function(){},methods:{getTarget:function(){var t=this;Object(s["a"])().then((function(e){t.targetClusterList=Object(l["a"])(e,"data")}))},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var t=this;this.$refs.formRef.validate((function(e){if(e){var a={masterId:t.rowData.id,slaveId:t.formData.targetMoveId.join(","),migrateType:t.formData.dataMoveType};t.loadingConfirm=!0,Object(o["d"])(a).then((function(e){e&&200===e.code&&(t.$message.success("迁移成功"),t.$emit("change",!1),t.refresh())})).finally((function(){t.loadingConfirm=!1}))}}))}}},u=c,p=(a("4df4a"),a("2877")),d=Object(p["a"])(u,i,r,!1,null,"491e0c59",null);e["default"]=d.exports},"419f":function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("div",[e("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.clickTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabList,(function(t,a){return e("el-tab-pane",{key:a,attrs:{label:t.label,name:t.name}})})),1),e("search-form",{attrs:{searchConfig:t.searchConfig,expandDefault:!0},on:{onSearch:t.onSearch}}),e(t.activeName,{ref:"logRefs",tag:"component",attrs:{searchData:t.searchConfig.searchData}})],1)},r=[],n=(a("7db0"),a("d81d"),a("d3b7"),a("ec41")),o=a("4613"),s=a("dd2c"),l=a("7ebc"),c=a("e6c9"),u={name:"logs-query",components:{ServerLimitFlow:o["default"],ConsumerSide:s["default"],ServerBlackWhiteList:l["default"]},mixins:[],props:{},data:function(){var t=this,e=this;return{activeName:"consumer-side",tabList:[{label:"消费端",name:"consumer-side",resFlag:0},{label:"服务端",name:"server-limit-flow",resFlag:2},{label:"服务端黑白名单",name:"server-black-white-list",resFlag:2}],appList:[],instanceList:[],resourceNamList:[],searchConfig:{searchData:{timeRange:"",appName:"",instanceName:"",resourceName:"",status:"",ip:""},searchItem:[{type:"time",label:"开始日期",prop:"timeRange",valueFormat:"yyyy-MM-dd HH:mm:ss",clearable:!0},{type:"select",label:"应用编码",prop:"appName",clearable:!0,get options(){return e.appList},change:function(e){t.searchConfig.searchData.instanceName="",t.searchConfig.searchData.resourceName="",t.resourceNamList=[],t.instanceList=[],e&&t.getInstanceResource(e)}},{type:"select",label:"实例",prop:"instanceName",clearable:!0,get options(){return e.instanceList}},{type:"select",label:"资源名称",prop:"resourceName",clearable:!0,get options(){return e.resourceNamList}},{type:"select",label:"状态",prop:"status",clearable:!0,options:[{label:"成功",value:1},{label:"失败",value:0}],get show(){return"server-black-white-list"===e.activeName}},{type:"input",label:"访问IP",prop:"ip",clearable:!0,get show(){return"server-black-white-list"!==e.activeName}}],rules:{}}}},computed:{},watch:{},created:function(){},mounted:function(){this.getAppOptions()},methods:{clickTab:function(t){t.name;var e=this.searchConfig.searchData.appName;this.searchConfig.searchData.instanceName="",this.searchConfig.searchData.resourceName="",this.resourceNamList=[],this.instanceList=[],this.getInstanceResource(e)},getAppOptions:function(){var t=this;Object(c["e"])().then((function(e){var a=Object(n["a"])(e,"data");t.appList=a.map((function(t){return{label:t.lableName,value:t.lableName,id:t.valueId}}))}))},getInstanceResource:function(t){var e=this,a=this.appList.find((function(e){return e.label===t}));if(a){var i={id:a.id,consumerProviderFlag:1,resAppFlag:"consumer-side"===this.activeName?0:2};"consumer-side"===this.activeName&&(i.consumerProviderFlag=0),Object(c["f"])(i).then((function(t){var a=Object(n["a"])(t,"data");e.instanceList=a.map((function(t){return{label:t.lableName,value:t.lableName,id:t.valueId}}))})),Object(c["g"])(i).then((function(t){var a=Object(n["a"])(t,"data");e.resourceNamList=a.map((function(t){return{label:t.lableName,value:t.lableName,id:t.valueId}}))}))}},onSearch:function(t){var e=this.$refs.logRefs;e.onSearch()}}},p=u,d=a("2877"),m=Object(d["a"])(p,i,r,!1,null,"50731b7a",null);e["default"]=m.exports},"423b":function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("div",[e("header",[e("el-button",{attrs:{type:"primary"},on:{click:t.clickAddCluster}},[t._v("添加主备关系")]),e("el-button",{on:{click:t.clickRefresh}},[t._v("刷新")])],1),e("main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.clusterData.length>0?e("el-row",{staticClass:"mt-15",attrs:{gutter:10}},t._l(t.clusterData,(function(a){return e("el-col",{key:a.id,staticClass:"mb-15",attrs:{span:8}},[e("div",{staticClass:"multiple-card p-10"},[e("el-descriptions",{attrs:{column:1}},[e("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(a.name))]),a.clusterRole?e("div",{attrs:{slot:"extra"},slot:"extra"},[e("el-tag",{attrs:{size:"small",type:"success",effect:"dark"}},[t._v(t._s("1"===a.clusterRole?"主":"备"))])],1):t._e(),e("el-descriptions-item",{attrs:{label:"注册中心来源"}},[t._v(t._s("0"===a.regSource?"自定义":"注册中心模块"))]),e("el-descriptions-item",{attrs:{label:"组织"}},[t._v(t._s("1"===a.regSource?a.orgName:"-"))]),e("el-descriptions-item",{attrs:{label:"地区"}},[t._v(t._s("1"===a.regSource?a.cityName:"-"))]),e("el-descriptions-item",{attrs:{label:"注册中心名称"}},[t._v(t._s("1"===a.regSource?a.regName:"-"))]),e("el-descriptions-item",{attrs:{label:"注册中心状态"}},[a.regStatus?e("span",[e("hubary-dot",{attrs:{status:t.dictRegisterStatusTag(a.regStatus)}},[t._v(t._s(t.dictRegisterStatus(a.regStatus)))])],1):e("span",[t._v("-")])]),e("el-descriptions-item",{attrs:{label:"注册中心地址"}},[t._v(t._s("1"===a.regSource?"-":a.regAddress))]),e("el-descriptions-item",{attrs:{label:"注册中心类型"}},[t._v(t._s(t._f("F_config_registryCluster")(a.registryClusterType)))]),e("el-descriptions-item",{attrs:{label:"定时备份状态"}},[a.jobStatus?e("span",[e("hubary-dot",{attrs:{status:t.dictRegisterTimeStatusTag(a.jobStatus)}},[t._v(t._s(t.dictRegisterTimeStatus(a.jobStatus)))])],1):t._e()]),e("el-descriptions-item",{attrs:{label:"启停发布状态"}},[a.startStatus?e("span",[e("hubary-dot",{attrs:{status:t.dictRegisterStatusRevStopTag(a.startStatus)}},[t._v(t._s(t.dictRegisterRevStopStatus(a.startStatus)))])],1):t._e()])],1),e("footer",[e("el-button",{directives:[{name:"show",rawName:"v-show",value:"0"===a.startStatus,expression:"item.startStatus === '0'"}],attrs:{size:"mini"},on:{click:function(e){return t.clickBackFooter("start",a)}}},[t._v("启动")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"===a.startStatus,expression:"item.startStatus === '1'"}],attrs:{size:"mini"},on:{click:function(e){return t.clickBackFooter("stop",a)}}},[t._v("停止")]),"-1"===a.jobStatus?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.clickBackFooter("config",a)}}},[t._v("定时备份库")]):t._e(),e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.clickBackFooter("edit",a)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.clickBackFooter("delete",a)}}},[t._v("删除")]),e("el-dropdown",{staticClass:"ml-10"},[e("el-button",[t._v(" 更多"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{nativeOn:{click:function(e){return t.clickBackFooter("move",a)}}},[t._v("数据迁移")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.clickBackFooter("test_connect",a)}}},[t._v("测试连接")]),"-1"!==a.jobStatus?[e("el-dropdown-item",{nativeOn:{click:function(e){return t.deleteTimer(a)}}},[t._v("删除定时器")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.startTimer(a)}}},[t._v("启动定时器")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.stopTimer(a)}}},[t._v("暂停定时器")]),e("el-dropdown-item",{nativeOn:{click:function(e){return t.detailTimer(a)}}},[t._v("定时详情")])]:t._e()],2)],1)],1)],1)])})),1):e("el-empty")],1),t.visible?e("ClusterAdd",{attrs:{rowData:t.rowData,refresh:t.getList},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}}):t._e(),t.visibleMove?e("DataMove",{attrs:{rowData:t.rowData,clusterList:t.clusterData,refresh:t.getList},model:{value:t.visibleMove,callback:function(e){t.visibleMove=e},expression:"visibleMove"}}):t._e(),t.visibleTimer?e("GovernTimerSet",{attrs:{refresh:t.getList,rowData:t.rowData,clusterList:t.clusterData},model:{value:t.visibleTimer,callback:function(e){t.visibleTimer=e},expression:"visibleTimer"}}):t._e(),t.visibleDetail?e("GovernTimerDetail",{attrs:{refresh:t.getList,rowData:t.rowData},model:{value:t.visibleDetail,callback:function(e){t.visibleDetail=e},expression:"visibleDetail"}}):t._e()],1)},r=[],n=(a("d3b7"),a("ff32")),o=a("4c3e"),s=a("6657"),l=a("58bf"),c=a("ff51"),u=a("1600"),p=a("3955"),d=a("66bc"),m=a("2de0"),f={name:"govern-multiple-center",filters:{F_config_registryCluster:function(t){return Object(n["e"])(t,"registryClusterOptions")}},components:{ClusterAdd:u["default"],DataMove:p["default"],GovernTimerSet:d["default"],GovernTimerDetail:m["default"]},mixins:[],props:{},data:function(){return{visible:!1,visibleMove:!1,visibleTimer:!1,visibleDetail:!1,loading:!1,clusterData:[],rowData:null}},computed:{archId:function(){return this.$route.query.archId}},watch:{},created:function(){},mounted:function(){this.getList()},methods:{deleteTimer:function(t){var e=this;Object(l["b"])(t.jobId).then((function(t){200===t.code&&(e.$message.success("删除定时器成功"),e.clickRefresh())}))},startTimer:function(t){var e=this;Object(l["e"])(t.jobId).then((function(t){200===t.code&&(e.$message.success("启动定时器成功"),e.clickRefresh())}))},stopTimer:function(t){var e=this;Object(l["f"])(t.jobId).then((function(t){200===t.code&&(e.$message.success("暂停定时器成功"),e.clickRefresh())}))},detailTimer:function(t){this.rowData=t,this.visibleDetail=!0},clickRefresh:function(){this.getList()},dictTagType:function(t){return Object(n["e"])(t,"configClusterRoleOptions",["value","type"])},dictRegisterStatus:function(t){return Object(n["e"])(t,o["c"])},dictRegisterStatusTag:function(t){return Object(n["e"])(t,o["c"],["value","status"])},dictRegisterTimeStatus:function(t){return Object(n["e"])(t,o["e"])},dictRegisterTimeStatusTag:function(t){return Object(n["e"])(t,o["e"],["value","status"])},dictRegisterRevStopStatus:function(t){return Object(n["e"])(t,o["d"])},dictRegisterStatusRevStopTag:function(t){return Object(n["e"])(t,o["d"],["value","status"])},getList:function(){var t=this;this.loading=!0,Object(s["e"])({}).then((function(e){var a=Object(c["a"])(null===e||void 0===e?void 0:e.data)?e.data:[];t.clusterData=a})).catch((function(t){})).finally((function(){t.loading=!1}))},clickAddCluster:function(){this.visible=!0,this.rowData=null},clickBackFooter:function(t,e){var a=this;switch(t){case"move":this.rowData=e,this.visibleMove=!0;break;case"edit":this.rowData=e,this.visible=!0;break;case"config":this.rowData=e,this.visibleTimer=!0;break;case"test_connect":this.rowData=e,Object(s["b"])(e.id).then((function(t){200===t.code&&a.$message.success(t.data)})).catch((function(t){}));break;case"delete":this.$confirm("确定要删除【".concat(e.name,"】吗"),{type:"warning"}).then((function(){Object(s["c"])(e.id).then((function(t){200===t.code&&(a.$message.success("删除成功"),a.clickRefresh())})).catch((function(t){}))}));break;case"start":Object(s["g"])({id:e.id,startStatus:"1"}).then((function(t){200===t.code&&(a.$message.success("启动成功"),a.clickRefresh())}));break;case"stop":Object(s["g"])({id:e.id,startStatus:"0"}).then((function(t){200===t.code&&(a.$message.success("停止成功"),a.clickRefresh())}));break}}}},g=f,h=(a("8982"),a("2877")),b=Object(h["a"])(g,i,r,!1,null,"be0cc092",null);e["default"]=b.exports},4613:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-page"},[e("tableView",{attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,isPage:t.tableConfig.isPage,total:t.tableConfig.pagination.totalCount,rowKey:"id",operateSlice:2,currentPage:t.tableConfig.pagination.page,pageSize:t.tableConfig.pagination.limit},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"page",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"page",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"limit",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"limit",e)},changePage:t.changePage}})],1)},r=[],n=a("5530"),o=(a("99af"),a("d3b7"),a("ec41")),s=a("ff51"),l=a("f926"),c=a("e6c9"),u={components:{},mixins:[],props:{searchData:{type:Object,default:null}},data:function(){var t=this;this.$createElement;return{visible:!1,tableConfig:{loading:!1,pagination:{page:1,limit:10,totalCount:0},tableData:[],columns:[{label:"资源名称",prop:"resourceName"},{label:"实例",prop:"instanceName"},{label:"应用编码",prop:"appName"},{label:"流控框架",prop:"limiterFrame"},{label:"类型",prop:"resAppFlag",render:function(t,e){var a=e.row,i=1===a.resAppFlag?"服务端应用":"服务端资源";return t("span",[i])}},{label:"访问时间",prop:"createDate",render:function(t,e){var a=e.row;return t("span",[Object(l["a"])(a.createDate,"yyyy-MM-dd HH:mm:ss")])}},{label:"状态",prop:"status",render:function(e,a){var i=a.row;return e("HubaryDot",{attrs:{status:i.status?"success":"error"}},[t.getStatusText(i)])}}],operate:{width:160,list:[]}}}},computed:{},watch:{},created:function(){},mounted:function(){this.getList()},methods:{getStatusText:function(t){var e=t||{},a=e.limitFuseFlag,i=e.status,r=i?"成功":"失败",n="";switch(a){case 0:case"0":n="(限流)";break;case 1:case"1":n="(熔断)";break}return"".concat(r).concat(n)},getList:function(){var t=this,e=Object(n["a"])(Object(n["a"])(Object(n["a"])({},this.tableConfig.pagination),this.searchData),{},{consumerProviderFlag:1});e.startTime=this.searchData.timeRange[0],e.endTime=this.searchData.timeRange[1],delete e.timeRange,delete e.totalCount,delete e.ip,this.tableConfig.loading=!0,Object(c["d"])(e).then((function(e){var a=Object(o["a"])(e,"data.results");t.tableConfig.tableData=Object(s["a"])(a)?a:[],t.tableConfig.pagination.totalCount=parseInt(Object(o["a"])(e,"data.count"))||0})).catch((function(t){})).finally((function(){t.tableConfig.loading=!1}))},onSearch:function(t){this.tableConfig.pagination.page=1,this.getList()},changePage:function(t,e){t&&(this.tableConfig.pagination.page=t),e&&(this.tableConfig.pagination.page=1,this.tableConfig.pagination.limit=e),this.getList()}}},p=u,d=a("2877"),m=Object(d["a"])(p,i,r,!1,null,"98c1ee62",null);e["default"]=m.exports},"4c5b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},r=[],n=(a("b0c0"),a("313e")),o=a.n(n),s=a("f42c");a("817d");var l={mixins:[s["a"]],watch:{chartData:{handler:function(t){this.initChart()},deep:!0}},props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=o.a.init(this.$el,"macarons");var t={xAxis:{type:"value",splitLine:{lineStyle:{type:"dashed"}},axisTick:{show:!1},axisLabel:{textStyle:{}}},yAxis:{type:"category",data:[],splitLine:{show:!1},axisTick:{show:!1},axisLine:{lineStyle:{}},nameTextStyle:{color:"#242e42",fontWeight:"bold",fontSize:14},axisLabel:{textStyle:{}}},series:[{type:"bar",name:"产出",itemStyle:{normal:{label:{show:!0,position:"insideRight",textStyle:{color:"#FFFFFF",fontSize:16,fontWeight:600}}}},data:[]}]};t.yAxis.data=this.chartData.xData,t.series[0].data=this.chartData.yData,t.yAxis.name=this.chartData.name,this.chart.setOption(t)}}},c=l,u=a("2877"),p=Object(u["a"])(c,i,r,!1,null,null,null);e["default"]=p.exports},"4df4a":function(t,e,a){"use strict";a("6b21")},5481:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("LineCharts",{attrs:{lineData:t.dataPut,height:"500px"}})],1)},r=[],n=(a("d81d"),a("a9e3"),a("8c3b")),o=a("e6c9"),s=a("ec41"),l={components:{LineCharts:n["default"]},mixins:[],props:{appId:String,instanceName:String,day:Number},data:function(){return{realTimeLenged:[{key:"counts",value:"应用总访问量"},{key:"limits",value:"应用总限流"},{key:"fuses",value:"应用总熔断"}],dataPut:{name:"历史图",legend:{data:["应用总访问量","应用总限流","应用总熔断"]},xAxisData:[],data:[{name:"应用总访问量",value:[]},{name:"应用总限流",value:[]},{name:"应用总熔断",value:[]}],color:["rgba(18,61,172,0.5)"]}}},computed:{},watch:{appId:function(t){t&&this.instanceName&&this.getRealtimeGraph()},instanceName:function(t){t&&this.getRealtimeGraph()},day:function(t){t&&this.getRealtimeGraph()}},created:function(){},mounted:function(){this.getRealtimeGraph()},methods:{getRealtimeGraph:function(){var t=this;Object(o["a"])({appName:this.appId,instanceName:this.instanceName,day:this.day}).then((function(e){var a=Object(s["a"])(e,"data.dates"),i=t.realTimeLenged.map((function(t){return{name:t.value,value:Object(s["a"])(e,"data."+t.key)}})),r=t.realTimeLenged.map((function(t){return t.value}));t.dataPut.legend.data=r,t.dataPut.data=i,t.dataPut.xAxisData=a}))}}},c=l,u=a("2877"),p=Object(u["a"])(c,i,r,!1,null,"041928f9",null);e["default"]=p.exports},"66bc":function(t,e,a){"use strict";a.r(e);a("a4d3"),a("e01a"),a("b0c0"),a("498a");var i=function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:"定时备份库",visible:t.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1,loading:t.loading},on:{close:t.clickCancel}},[e("el-form",{ref:"formRef",attrs:{model:t.formData,"label-width":"120px",rules:t.rules}},[e("el-form-item",{attrs:{label:"当前集群",prop:"masterId"}},[t._v(" "+t._s(t.rowData.name)+" ")]),e("el-form-item",{attrs:{label:"任务名称",prop:"jobName"}},[e("el-input",{staticClass:"form-item-width",attrs:{placeholder:"请输入任务名称"},on:{change:t.changeJobName},model:{value:t.formData.jobName,callback:function(e){t.$set(t.formData,"jobName","string"===typeof e?e.trim():e)},expression:"formData.jobName"}})],1),e("el-form-item",{attrs:{label:"定时时间",prop:"jobCron"}},[e("CronGenerator",{attrs:{size:"small"},on:{change:t.changeCron,reset:t.resetCron},model:{value:t.formData.jobCron,callback:function(e){t.$set(t.formData,"jobCron",e)},expression:"formData.jobCron"}})],1),e("el-form-item",{attrs:{label:"目标集群",prop:"slaveId"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择目标集群",multiple:""},model:{value:t.formData.slaveId,callback:function(e){t.$set(t.formData,"slaveId",e)},expression:"formData.slaveId"}},t._l(t.targetClusterList,(function(a){return e("el-option",{key:a.id,staticClass:"el-option-box",attrs:{disabled:a.id===t.rowData.id,value:a.id,label:a.name}})})),1)],1),e("el-form-item",{attrs:{label:"任务描述",prop:"description"}},[e("el-input",{staticClass:"form-item-width",attrs:{placeholder:"请输入任务描述"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description","string"===typeof e?e.trim():e)},expression:"formData.description"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.clickConfirm}},[t._v("确定")]),e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],1)},r=[],n=a("5530"),o=(a("a15b"),a("d3b7"),a("ff32")),s=a("1b62"),l=a("58bf"),c=a("ec41"),u=a("65ce"),p="0 0 12 * * ?",d=s["a"].CommonSelectCreaterMix,m={components:{CronGenerator:u["a"]},mixins:[d(["csMixCity"])],model:{prop:"show",event:"change"},props:{show:Boolean,refresh:{type:Function,require:!0},rowData:{type:Object,default:function(){return{}}},clusterList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,registryClusterOptions:o["g"],configClusterRoleOptions:o["a"],targetClusterList:[],formData:{jobName:"",jobCron:p,masterId:"",slaveId:"",description:""},rules:{jobName:[{required:!0,trigger:"blur",message:"请输入任务名称"},{pattern:/^\w+$/,message:"格式不正确,只能输入数字、字母、_",trigger:"blur"}],jobCron:[{required:!0,trigger:"blur",message:"请输入定时时间"}],slaveId:[{required:!0,trigger:"change",message:"请选择目标集群"}]}}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("change",!1)}},orgId:function(){return this.$route.query.orgId},archId:function(){return this.$route.query.archId}},watch:{},created:function(){},mounted:function(){this.getTarget()},methods:{getTarget:function(){var t=this;Object(l["a"])().then((function(e){t.targetClusterList=Object(c["a"])(e,"data")}))},changeJobName:function(){this.$refs.formRef.validateField("jobGroup")},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var t=this;this.$refs.formRef.validate((function(e){if(e){var a=Object(n["a"])(Object(n["a"])({},t.formData),{},{multicenterClusterId:t.rowData.id,masterId:t.rowData.id});a.slaveId=a.slaveId.join(","),t.loading=!0,Object(l["d"])(a).then((function(e){e&&200===e.code&&(t.$message.success("定时配置成功"),t.$emit("change",!1),t.refresh())})).finally((function(){t.loading=!1}))}}))},changeCron:function(t){this.formData.jobCron=t},resetCron:function(t){this.formData.jobCron=p}}},f=m,g=a("2877"),h=Object(g["a"])(f,i,r,!1,null,"98b2df54",null);e["default"]=h.exports},"6b21":function(t,e,a){},"7b05":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"chartset"},[e("BarChart",{attrs:{"chart-data":t.countTop5}})],1),e("div",{staticClass:"chartset"},[e("BarChart",{attrs:{"chart-data":t.limitTop5}})],1),e("div",{staticClass:"chartset"},[e("BarChart",{attrs:{"chart-data":t.fuseTop5}})],1)])},r=[],n=a("4c5b"),o=a("e6c9"),s=a("ec41"),l={components:{BarChart:n["default"]},mixins:[],props:{date:String},data:function(){return{countTop5:{name:"应用总量TOP5",xData:[],yData:[]},limitTop5:{name:"应用限流TOP5",xData:[],yData:[]},fuseTop5:{name:"应用熔断TOP5",xData:[],yData:[]}}},computed:{},watch:{date:function(t){t&&(this.getTopCharts(),this.getTopCharts(0),this.getTopCharts(1))}},created:function(){},mounted:function(){this.getTopCharts(),this.getTopCharts(0),this.getTopCharts(1)},methods:{getTopCharts:function(t){var e=this;Object(o["b"])({date:this.date,consumerProviderFlag:t}).then((function(a){var i=Object(s["a"])(a,"data.appNames"),r=Object(s["a"])(a,"data.counts");void 0==t?(e.countTop5.xData=i,e.countTop5.yData=r):0==t?(e.limitTop5.xData=i,e.limitTop5.yData=r):(e.fuseTop5.xData=i,e.fuseTop5.yData=r)}))}}},c=l,u=a("2877"),p=Object(u["a"])(c,i,r,!1,null,"8dcee0b8",null);e["default"]=p.exports},"7ebc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-page"},[e("tableView",{attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,isPage:t.tableConfig.isPage,total:t.tableConfig.pagination.totalCount,rowKey:"id",operateSlice:2,currentPage:t.tableConfig.pagination.page,pageSize:t.tableConfig.pagination.limit},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"page",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"page",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"limit",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"limit",e)},changePage:t.changePage}})],1)},r=[],n=a("5530"),o=a("ade3"),s=(a("d3b7"),a("ec41")),l=a("ff51"),c=a("f926"),u=a("e6c9"),p={components:{},mixins:[],props:{searchData:{type:Object,default:null}},data:function(){this.$createElement;return{visible:!1,tableConfig:{loading:!1,pagination:{page:1,limit:10,totalCount:0},tableData:[],columns:[{label:"资源名称",prop:"resourceName"},{label:"实例",prop:"instanceName"},{label:"应用编码",prop:"appName"},Object(o["a"])(Object(o["a"])({label:"类型",prop:"resAppFlag"},"prop","resAppFlag"),"render",(function(t,e){var a=e.row,i=1===a.resAppFlag?"服务端应用":"服务端资源";return t("span",[i])})),{label:"规则类型",prop:"ipType",render:function(t,e){var a=e.row,i=1===a.ipType?"黑名单":"白名单";return t("span",[i])}},{label:"访问IP",prop:"ip"},{label:"访问时间",prop:"createDate",render:function(t,e){var a=e.row;return t("span",[Object(c["a"])(a.createDate,"yyyy-MM-dd HH:mm:ss")])}}],operate:{width:160,list:[]}}}},computed:{},watch:{},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var t=this,e=Object(n["a"])(Object(n["a"])({},this.tableConfig.pagination),this.searchData);e.startTime=this.searchData.timeRange[0],e.endTime=this.searchData.timeRange[1],delete e.timeRange,delete e.totalCount,delete e.status,this.tableConfig.loading=!0,Object(u["c"])(e).then((function(e){var a=Object(s["a"])(e,"data.results");t.tableConfig.tableData=Object(l["a"])(a)?a:[],t.tableConfig.pagination.totalCount=parseInt(Object(s["a"])(e,"data.count"))||0})).catch((function(t){})).finally((function(){t.tableConfig.loading=!1}))},onSearch:function(t){this.tableConfig.pagination.page=1,this.getList()},changePage:function(t,e){t&&(this.tableConfig.pagination.page=t),e&&(this.tableConfig.pagination.page=1,this.tableConfig.pagination.limit=e),this.getList()}}},d=p,m=a("2877"),f=Object(m["a"])(d,i,r,!1,null,"73fa7605",null);e["default"]=f.exports},8982:function(t,e,a){"use strict";a("f63f")},"8b48":function(t,e,a){"use strict";a.r(e);a("498a");var i=function(){var t=this,e=t._self._c;return e("div",[e("el-form",{ref:"formRef",attrs:{inline:"",model:t.formData,rules:t.rules}},[e("span",{staticClass:"mr-20"},[e("el-form-item",[e("el-radio-group",{on:{change:t.changeType},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-radio-button",{attrs:{label:"real-time-graph"}},[t._v("实时图")]),e("el-radio-button",{attrs:{label:"top5-graph"}},[t._v("TOP5")]),e("el-radio-button",{attrs:{label:"history-graph"}},[t._v("历史图")])],1)],1)],1),"top5-graph"!==t.activeName?e("el-form-item",{attrs:{label:"应用",prop:"appId"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择应用","value-key":"valueId"},on:{change:t.getInstanceOptions},model:{value:t.formData.appId,callback:function(e){t.$set(t.formData,"appId","string"===typeof e?e.trim():e)},expression:"formData.appId"}},t._l(t.appOptions,(function(t){return e("el-option",{key:t.valueId,attrs:{label:t.lableName,value:t}})})),1)],1):t._e(),"top5-graph"!==t.activeName?e("el-form-item",{attrs:{label:"实例",prop:"instanceName"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择实例","value-key":"valueId"},model:{value:t.formData.instanceName,callback:function(e){t.$set(t.formData,"instanceName","string"===typeof e?e.trim():e)},expression:"formData.instanceName"}},t._l(t.instanceOptions,(function(t){return e("el-option",{key:t.valueId,attrs:{label:t.lableName,value:t}})})),1)],1):t._e(),"real-time-graph"===t.activeName?e("el-form-item",{attrs:{prop:"realtime"}},[e("el-radio-group",{model:{value:t.formData.realtime,callback:function(e){t.$set(t.formData,"realtime",e)},expression:"formData.realtime"}},t._l(t.realtime_options,(function(a){return e("el-radio-button",{key:a.value,attrs:{label:a.value}},[t._v(" "+t._s(a.title)+" ")])})),1)],1):t._e(),"top5-graph"===t.activeName?e("el-form-item",{attrs:{prop:"todo_top5"}},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.formData.topDate,callback:function(e){t.$set(t.formData,"topDate",e)},expression:"formData.topDate"}})],1):t._e(),"history-graph"===t.activeName?e("el-form-item",{attrs:{prop:"historyDay"}},[e("el-radio-group",{model:{value:t.formData.historyDay,callback:function(e){t.$set(t.formData,"historyDay",e)},expression:"formData.historyDay"}},t._l(t.todo_history_options,(function(a){return e("el-radio-button",{key:a.value,attrs:{label:a.value}},[t._v(" "+t._s(a.title)+" ")])})),1)],1):t._e()],1),e(t.activeName,{tag:"component",attrs:{appId:t.formData.appId.lableName,instanceName:t.formData.instanceName.lableName,minute:t.formData.realtime,date:t.formData.topDate,day:t.formData.historyDay}})],1)},r=[],n=a("5481"),o=a("3314"),s=a("7b05"),l=a("e6c9"),c=a("ec41"),u=a("f926"),p={name:"app-monitor",components:{HistoryGraph:n["default"],Top5Graph:s["default"],RealTimeGraph:o["default"]},mixins:[],props:{},data:function(){return{formData:{appId:"",instanceName:"",realtime:15,topDate:Object(u["a"])(Date.now(),"yyyy-MM-dd"),historyDay:7},rules:{appId:[{required:!0,message:"请选择应用",trigger:"change"}],instanceName:[{required:!0,message:"请选择实例",trigger:"change"}]},appOptions:[],instanceOptions:[],realtime_options:[{title:"15分钟",value:15},{title:"30分钟",value:30},{title:"1小时",value:60}],todo_history_options:[{title:"一周",value:7},{title:"15天",value:15},{title:"一个月",value:30}],activeName:"real-time-graph"}},computed:{},watch:{},created:function(){},mounted:function(){this.getAppOptions()},methods:{changeType:function(t){},getAppOptions:function(){var t=this;Object(l["e"])().then((function(e){t.appOptions=Object(c["a"])(e,"data")}))},getInstanceOptions:function(t){var e=this;this.formData.instanceName="",this.$nextTick((function(){e.$refs.formRef.clearValidate("instanceName")})),Object(l["f"])({id:t.valueId}).then((function(t){e.instanceOptions=Object(c["a"])(t,"data")}))}}},d=p,m=a("2877"),f=Object(m["a"])(d,i,r,!1,null,"47cfa0d6",null);e["default"]=f.exports},"8b8c":function(t,e,a){"use strict";a("972f")},"8c3b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},r=[],n=(a("14d9"),a("b0c0"),a("d3b7"),a("159b"),a("313e")),o=a.n(n),s=a("f42c");a("817d");var l={mixins:[s["a"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"250px"},lineData:{type:Object,default:function(){return{xAxisData:[],data:[]}}}},data:function(){return{chart:null}},watch:{lineData:{handler:function(t){this.initChart()},deep:!0}},mounted:function(){this.initChart()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=o.a.init(this.$el,"macarons");var t=["#123dac","#73e2e2","#ff7e85","#9b52ff","#fac524","#46caff","#a1e867","#10b2b2","#ec87f7","#f4905a","#00baba","#facf24","#e89d67","#23c6c6","#fa8699","#40b7fc","#006d75","#595959","#f4764f","#a640fc","#fda23f","#2d7ae4","#5092ff","#9351ed","#8a89fe","#df89e8","#2797ff","#6ad089","#7c92e8 "],e=this.lineData.xAxisData,a=[];this.lineData.data.forEach((function(e,i){a.push({name:e.name,data:e.value,type:"line",smooth:!1,smoothMonotone:"x",cursor:"pointer",showSymbol:!1,lineStyle:{color:t[i]}})}));var i={textStyle:{fontFamily:"Din-Light"},color:t,title:{text:this.lineData.name,textStyle:{fontSize:14,color:"#000",fontWeight:600}},legend:this.lineData.legend,tooltip:{trigger:"axis",axisPointer:{type:"none"},confine:!0,extraCssText:"box-shadow: 0px 2px 8px 0px #cacaca;border-radius: 4px;opacity: 0.9;z-index:9999"},grid:{left:"7%",right:"5%",top:"15%",bottom:"23%"},xAxis:{type:"category",boundaryGap:!0,data:e,axisLabel:{color:"#a0a9bc",formatter:function(t,a){return 0===a||a===e.length-1?"":t}},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{name:"",nameTextStyle:{color:"#242e42",fontWeight:"bold",fontSize:14,lineHeight:30},type:"value",axisLabel:{color:"#a0a9bc",inside:!0,margin:0,verticalAlign:"bottom"},splitLine:{lineStyle:{type:"dashed"}},minInterval:1,axisLine:{show:!1},axisTick:{show:!1}},series:a};this.chart.setOption(i)}}},c=l,u=a("2877"),p=Object(u["a"])(c,i,r,!1,null,"73e7685d",null);e["default"]=p.exports},"972f":function(t,e,a){},ab94:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-page"},[e("search-form",{attrs:{searchConfig:t.searchConfig},on:{onSearch:t.onSearch}}),e("tableView",{attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,isPage:t.tableConfig.isPage,total:t.tableConfig.pagination.totalCount,rowKey:"id",operateSlice:2,currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},changePage:t.changePage}})],1)},r=[],n=a("ade3"),o=(a("d3b7"),a("ff81")),s=a("ec41"),l=a("ff51"),c={name:"resource-fault-inject",components:{},mixins:[],props:{},data:function(){return{searchConfig:{searchData:{operatorUserName:"",menuName:"",methonName:"",operateResult:"",operateTime:""},searchItem:[{type:"input",label:"用户",prop:"operatorUserName"},{type:"input",label:"功能",prop:"menuName"},{type:"input",label:"方法",prop:"methonName"},{type:"input",label:"操作结果",prop:"operateResult"},{type:"time",label:"操作时间",prop:"operateTime",valueFormat:"yyyy-MM-dd HH:mm:ss",width:"400px"}],rules:{}},visible:!1,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,totalCount:0},tableData:[],columns:[{prop:"operatorUserName",label:"用户",align:"center"},{prop:"menuName",label:"功能",align:"center"},{prop:"buttonName",label:"按钮",align:"center"},{prop:"operateResult",label:"操作结果",align:"center"},{prop:"operateIp",label:"访问IP",align:"center"},Object(n["a"])({prop:"createDate",label:"操作时间",align:"center"},"align","left")]},rowData:null}},computed:{},watch:{},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var t=this,e=this.searchConfig.searchData,a=e.operatorUserName,i=e.operateTime,r=e.desc,n=e.methonName,c=e.operateResult,u={pageSize:this.tableConfig.pagination.pageSize,pageNo:this.tableConfig.pagination.pageNo,requestObject:{operatorUserName:a,desc:r,methonName:n,operateResult:c,operateTime:Array.isArray(i)?i:[]}};this.tableConfig.loading=!0,Object(o["a"])(u).then((function(e){var a=Object(s["a"])(e,"data.data");t.tableConfig.tableData=Object(l["a"])(a)?a:[],t.tableConfig.pagination.totalCount=Object(s["a"])(e,"data.totalCount")||0})).catch((function(t){})).finally((function(){t.tableConfig.loading=!1}))},onSearch:function(t){this.tableConfig.pagination.pageNo=1,this.getList()},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()}}},u=c,p=a("2877"),d=Object(p["a"])(u,i,r,!1,null,"1ad8951b",null);e["default"]=d.exports},ce5a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("LineCharts",{attrs:{lineData:t.dataPut,height:"500px"}})],1)},r=[],n=(a("d81d"),a("a9e3"),a("8c3b")),o=a("e6c9"),s=a("ec41"),l={components:{LineCharts:n["default"]},mixins:[],props:{appId:String,instanceName:String,minute:Number,resource:String},data:function(){return{realTimeLenged:[{key:"counts",value:"资源总访问量"},{key:"limits",value:"资源总限流"},{key:"fuses",value:"资源总熔断"}],dataPut:{name:"实时图",legend:{data:[]},xAxisData:[],data:[],color:["rgba(18,61,172,0.5)"]}}},computed:{},watch:{appId:function(t){t&&this.instanceName&&this.resource&&this.getRealtimeGraph()},instanceName:function(t){t&&this.resource&&this.getRealtimeGraph()},resource:function(t){t&&this.getRealtimeGraph()},minute:function(t){t&&this.getRealtimeGraph()}},created:function(){},mounted:function(){this.getRealtimeGraph()},methods:{getRealtimeGraph:function(){var t=this;Object(o["h"])({resAppFlag:2,appName:this.appId,instanceName:this.instanceName,date:"",consumerProviderFlag:"",minute:this.minute,resourceName:this.resource}).then((function(e){var a=Object(s["a"])(e,"data.dates"),i=t.realTimeLenged.map((function(t){return{name:t.value,value:Object(s["a"])(e,"data."+t.key)}})),r=t.realTimeLenged.map((function(t){return t.value}));t.dataPut.legend.data=r,t.dataPut.data=i,t.dataPut.xAxisData=a}))}}},c=l,u=a("2877"),p=Object(u["a"])(c,i,r,!1,null,"56815a54",null);e["default"]=p.exports},dd2c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-page"},[e("tableView",{attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,isPage:t.tableConfig.isPage,total:t.tableConfig.pagination.totalCount,rowKey:"id",operateSlice:2,currentPage:t.tableConfig.pagination.page,pageSize:t.tableConfig.pagination.limit},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"page",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"page",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"limit",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"limit",e)},changePage:t.changePage}})],1)},r=[],n=a("5530"),o=(a("d3b7"),a("ec41")),s=a("ff51"),l=a("f926"),c=a("e6c9"),u={components:{},mixins:[],props:{searchData:{type:Object,default:null}},data:function(){this.$createElement;return{visible:!1,tableConfig:{loading:!1,pagination:{page:1,limit:10,totalCount:0},tableData:[],columns:[{label:"资源名称",prop:"resourceName"},{label:"实例",prop:"instanceName"},{label:"应用编码",prop:"appName"},{label:"流控框架",prop:"limiterFrame"},{label:"访问时间",prop:"createDate",render:function(t,e){var a=e.row;return t("span",[Object(l["a"])(a.createDate,"yyyy-MM-dd HH:mm:ss")])}},{label:"状态",prop:"status",render:function(t,e){var a=e.row,i=a.status?"成功":"失败(".concat(a.limitFuseFlag?"熔断":"限流",")");return t("span",[i])}}],operate:{width:160,list:[]}}}},computed:{},watch:{},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var t=this,e=Object(n["a"])(Object(n["a"])(Object(n["a"])({},this.tableConfig.pagination),this.searchData),{},{consumerProviderFlag:0});e.startTime=this.searchData.timeRange[0],e.endTime=this.searchData.timeRange[1],delete e.timeRange,delete e.totalCount,delete e.ip,this.tableConfig.loading=!0,Object(c["d"])(e).then((function(e){var a=Object(o["a"])(e,"data.results");t.tableConfig.tableData=Object(s["a"])(a)?a:[],t.tableConfig.pagination.totalCount=parseInt(Object(o["a"])(e,"data.count"))||0})).catch((function(t){})).finally((function(){t.tableConfig.loading=!1}))},onSearch:function(t){this.tableConfig.pagination.page=1,this.getList()},changePage:function(t,e){t&&(this.tableConfig.pagination.page=t),e&&(this.tableConfig.pagination.page=1,this.tableConfig.pagination.limit=e),this.getList()}}},p=u,d=a("2877"),m=Object(d["a"])(p,i,r,!1,null,"3ae1d6e1",null);e["default"]=m.exports},e7fe:function(t,e,a){},e81c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"chartset"},[e("BarChart",{attrs:{"chart-data":t.countTop10,height:"400px"}})],1),e("div",{staticClass:"chartset"},[e("BarChart",{attrs:{"chart-data":t.limitTop10,height:"400px"}})],1),e("div",{staticClass:"chartset"},[e("BarChart",{attrs:{"chart-data":t.fuseTop10,height:"400px"}})],1)])},r=[],n=a("4c5b"),o=a("e6c9"),s=a("ec41"),l={components:{BarChart:n["default"]},mixins:[],props:{date:String},data:function(){return{countTop10:{name:"资源总量Top5",xData:[],yData:[]},limitTop10:{name:"资源限流Top5",xData:[],yData:[]},fuseTop10:{name:"资源熔断Top5",xData:[],yData:[]}}},computed:{},watch:{date:function(t){t&&(this.getTopCharts(),this.getTopCharts(0),this.getTopCharts(1))}},created:function(){},mounted:function(){this.getTopCharts(),this.getTopCharts(0),this.getTopCharts(1)},methods:{getTopCharts:function(t){var e=this;Object(o["j"])({date:this.date,consumerProviderFlag:t}).then((function(a){var i=Object(s["a"])(a,"data.appNames"),r=Object(s["a"])(a,"data.counts");void 0==t?(e.countTop10.xData=i,e.countTop10.yData=r):0==t?(e.limitTop10.xData=i,e.limitTop10.yData=r):(e.fuseTop10.xData=i,e.fuseTop10.yData=r)}))}}},c=l,u=a("2877"),p=Object(u["a"])(c,i,r,!1,null,"637d8c65",null);e["default"]=p.exports},edfd:function(t,e,a){"use strict";a.r(e);a("498a");var i=function(){var t=this,e=t._self._c;return e("div",[e("el-form",{ref:"formRef",attrs:{inline:"",model:t.formData,rules:t.rules}},[e("span",[e("el-form-item",[e("el-radio-group",{on:{change:t.changeType},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-radio-button",{attrs:{label:"real-time-graph"}},[t._v("实时图")]),e("el-radio-button",{attrs:{label:"top5-graph"}},[t._v("TOP5")]),e("el-radio-button",{attrs:{label:"history-graph"}},[t._v("历史图")])],1)],1)],1),"top5-graph"!==t.activeName?e("span",[e("el-form-item",{attrs:{label:"应用",prop:"appId"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择应用","value-key":"valueId"},on:{change:t.getInstanceOptions},model:{value:t.formData.appId,callback:function(e){t.$set(t.formData,"appId","string"===typeof e?e.trim():e)},expression:"formData.appId"}},t._l(t.appOptions,(function(t){return e("el-option",{key:t.valueId,attrs:{label:t.lableName,value:t}})})),1)],1),e("el-form-item",{attrs:{label:"实例",prop:"instanceName"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择实例","value-key":"valueId"},model:{value:t.formData.instanceName,callback:function(e){t.$set(t.formData,"instanceName","string"===typeof e?e.trim():e)},expression:"formData.instanceName"}},t._l(t.instanceOptions,(function(t){return e("el-option",{key:t.valueId,attrs:{label:t.lableName,value:t}})})),1)],1),e("el-form-item",{attrs:{label:"资源",prop:"resource"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择实例","value-key":"valueId"},model:{value:t.formData.resource,callback:function(e){t.$set(t.formData,"resource","string"===typeof e?e.trim():e)},expression:"formData.resource"}},t._l(t.resourceOptions,(function(t){return e("el-option",{key:t.valueId,attrs:{label:t.lableName,value:t}})})),1)],1)],1):t._e(),"real-time-graph"===t.activeName?e("el-form-item",{attrs:{prop:"realtime"}},[e("el-radio-group",{model:{value:t.formData.realtime,callback:function(e){t.$set(t.formData,"realtime",e)},expression:"formData.realtime"}},t._l(t.realtime_options,(function(a){return e("el-radio-button",{key:a.value,attrs:{label:a.value}},[t._v(" "+t._s(a.title)+" ")])})),1)],1):t._e(),"top5-graph"===t.activeName?e("el-form-item",{attrs:{prop:"topDate"}},[e("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.formData.topDate,callback:function(e){t.$set(t.formData,"topDate",e)},expression:"formData.topDate"}})],1):t._e(),"history-graph"===t.activeName?e("el-form-item",{attrs:{prop:"historyDay"}},[e("el-radio-group",{model:{value:t.formData.historyDay,callback:function(e){t.$set(t.formData,"historyDay",e)},expression:"formData.historyDay"}},t._l(t.todo_history_options,(function(a){return e("el-radio-button",{key:a.value,attrs:{label:a.value}},[t._v(" "+t._s(a.title)+" ")])})),1)],1):t._e()],1),e(t.activeName,{tag:"component",attrs:{appId:t.formData.appId.lableName,instanceName:t.formData.instanceName.lableName,resource:t.formData.resource.lableName,minute:t.formData.realtime,date:t.formData.topDate,day:t.formData.historyDay}})],1)},r=[],n=a("1958"),o=a("ce5a"),s=a("e81c"),l=a("e6c9"),c=a("ec41"),u=a("f926"),p={name:"app-monitor",components:{HistoryGraph:n["default"],Top5Graph:s["default"],RealTimeGraph:o["default"]},mixins:[],props:{},data:function(){return{formData:{appId:"",instanceName:"",resource:"",realtime:15,topDate:Object(u["a"])(Date.now(),"yyyy-MM-dd"),historyDay:7},rules:{appId:[{required:!0,message:"请选择应用",trigger:"change"}],instanceName:[{required:!0,message:"请选择实例",trigger:"change"}]},appOptions:[],instanceOptions:[],resourceOptions:[],realtime_options:[{title:"15分钟",value:15},{title:"30分钟",value:30},{title:"1小时",value:60}],todo_history_options:[{title:"一周",value:7},{title:"15天",value:15},{title:"一个月",value:30}],activeName:"real-time-graph"}},computed:{},watch:{},created:function(){},mounted:function(){this.getAppOptions()},methods:{changeType:function(t){},getAppOptions:function(){var t=this;Object(l["e"])().then((function(e){t.appOptions=Object(c["a"])(e,"data")}))},getInstanceOptions:function(t){var e=this;this.formData.instanceName="",this.formData.resource="",this.$nextTick((function(){e.$refs.formRef.clearValidate("instanceName","resource")})),Object(l["f"])({id:t.valueId}).then((function(t){e.instanceOptions=Object(c["a"])(t,"data")})),Object(l["g"])({id:t.valueId}).then((function(t){e.resourceOptions=Object(c["a"])(t,"data")}))}}},d=p,m=a("2877"),f=Object(m["a"])(d,i,r,!1,null,"d06fc5b2",null);e["default"]=f.exports},f63f:function(t,e,a){}}]);