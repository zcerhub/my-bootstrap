(window["jsonpPaas4"]=window["jsonpPaas4"]||[]).push([["app~26caf97c"],{"064a4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"name-container"},[e("search-form",{attrs:{searchConfig:t.searchConfig},on:{onSearch:t.onSearch}}),e("button-list",{attrs:{data:t.buttonList}}),e("tableView",{ref:"tableView",attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,total:t.tableConfig.pagination.totalCount,rowKey:"id",currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},changePage:t.changePage,operate:t.getIndex}}),t.showDialog?e("AddAndEdit",{attrs:{rowData:t.rowData,refresh:t.getList},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}}):t._e()],1)},i=[],o=(a("14d9"),a("b0c0"),a("d3b7"),a("a4d3"),a("e01a"),a("498a"),function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:t.isEdit?"编辑":"新增",visible:t.show,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[e("el-form",{ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":t.labelPosition,"label-width":"100px",model:t.form,rules:t.rules}},[e("el-form-item",{attrs:{label:"名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"编码",prop:"code"}},[e("el-input",{attrs:{placeholder:"请输入编码"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code","string"===typeof e?e.trim():e)},expression:"form.code"}})],1),e("el-form-item",{attrs:{label:"描述",prop:"description"}},[e("el-input",{attrs:{placeholder:"请输入内容",type:"textarea",maxlength:"200","show-word-limit":""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.clickConfirm}},[t._v("确定")]),e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],1)}),r=[],c=a("c7eb"),l=a("1da1"),s=(a("b64b"),a("159b"),a("bc59")),u=a("5c8a"),d=a("6641");function p(t){var e={id:"",code:"",name:"",description:""};return t&&Object.keys(e).forEach((function(a){Object(s["a"])(t,a)&&(e[a]=t[a])})),e}var f={name:"AddAndEdit",components:{},model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function},data:function(){return{loading:!1,labelPosition:"right",form:p(),rules:{code:[{required:!0,message:"请输入编码",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},computed:{isEdit:function(){var t;return Boolean(null===(t=this.rowData)||void 0===t?void 0:t.id)}},watch:{},created:function(){},mounted:function(){this.isEdit&&(this.form=p(this.rowData))},methods:{clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var t=this;this.$refs.formRef.validate(function(){var e=Object(l["a"])(Object(c["a"])().mark((function e(a){var n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a&&(n=Object(u["a"])(t.form),t.loading=!0,t.isEdit?Object(d["e"])(n).then((function(e){200===e.code&&(t.$message({type:"success",message:e.msg}),t.$emit("change",!1),t.refresh())})).finally((function(){t.loading=!1})):(delete n.id,Object(d["b"])(n).then((function(e){200===e.code&&(t.$message({type:"success",message:e.msg}),t.$emit("change",!1),t.refresh())})).finally((function(){t.loading=!1}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},g=f,b=(a("d4238"),a("2877")),h=Object(b["a"])(g,o,r,!1,null,"4d5936da",null),m=h.exports,C=a("ec41"),v=a("ff51"),w={components:{AddAndEdit:m},data:function(){return{buttonList:[{label:"新增",type:"add",click:this.addInfo,btnPermCode:"add"}],showDialog:!1,rowData:null,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},columns:[{prop:"name",label:"名称",align:"center"},{prop:"code",label:"编码",align:"center"},{prop:"updateDate",label:"更新时间",align:"center"},{prop:"description",label:"描述",align:"center"}],operate:{width:220,list:[{label:"编辑",id:"edit",btnPermCode:"edit"},{label:"删除",id:"delete",btnPermCode:"config"},{label:"单元化配置",id:"unitConfig",btnPermCode:"config"}]}},searchConfig:{searchData:{name:"",code:""},searchItem:[{type:"input",label:"名称",prop:"name"},{type:"input",label:"编码",prop:"code"}],rules:{}}}},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var t=this,e={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:this.searchConfig.searchData};this.tableConfig.loading=!0,Object(d["d"])(e).then((function(e){var a,n=Object(C["a"])(e,"data.data");t.tableConfig.tableData=Object(v["a"])(n)?n:[],t.tableConfig.pagination.totalCount=null!==(a=Object(C["a"])(e,"data.totalCount"))&&void 0!==a?a:0})).finally((function(){t.tableConfig.loading=!1}))},addInfo:function(){this.showDialog=!0,this.rowData=null},onSearch:function(){this.tableConfig.pagination.pageNo=1,this.getList()},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()},getIndex:function(t){var e=this,a=(t.index,t.row),n=t.operate;"delete"===n.id?this.$confirm("确定要删除【".concat(a.name,"】吗?"),{type:"warning"}).then((function(){Object(d["a"])(a.id).then((function(t){e.$message.success("删除成功"),e.getList()})).catch((function(t){}))})).catch((function(t){})):"edit"===n.id?(this.rowData=a,this.showDialog=!0):"unitConfig"===n.id&&this.$router.push({path:"/kafka/unitization/unitary-configuration",query:{unitStructureId:a.id}})}}},k=w,y=Object(b["a"])(k,n,i,!1,null,"07effba7",null);e["default"]=y.exports},"06ac":function(t,e,a){"use strict";a("3117")},"093ba":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"name-container"},[e("search-form",{ref:"searchRef",attrs:{searchConfig:t.searchConfig},on:{onSearch:t.onSearch}}),e("button-list",{attrs:{data:t.buttonList}}),e("tableView",{ref:"tableView",attrs:{isPage:!1,loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,total:t.tableConfig.pagination.totalCount,rowKey:"id",currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},changePage:t.changePage,operate:t.getIndex}}),t.showDialog?e("AddAndEdit",{attrs:{rowData:t.rowData,refresh:t.getList,unitArchitecture:t.opts_arch},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}}):t._e(),t.startLogShow?e("el-dialog-limit",{attrs:{title:t.updateTime?"启动日志( ".concat(t.updateTime," )"):"启动日志",visible:t.startLogShow,size:"medium"},on:{"update:visible":function(e){t.startLogShow=e},close:t.clickCancel}},[e("InstancesStartLog",{ref:"terminaRef",attrs:{updateTime:"updateTime",rowData:t.rowData},on:{changeTime:t.changeTime}})],1):t._e()],1)},i=[],o=a("c7eb"),r=a("1da1"),c=(a("d9e2"),a("d81d"),a("b0c0"),a("99af"),a("caad"),a("2532"),function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:t.isEdit?"编辑":"新增",visible:t.show,size:"medium","append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[e("el-form",{ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":t.labelPosition,"label-width":"120px",model:t.form,rules:t.rules}},[e("el-form-item",{attrs:{label:"单元化架构",prop:"unitArcId"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择单元化架构"},on:{change:t.changeStructure},model:{value:t.form.unitArcId,callback:function(e){t.$set(t.form,"unitArcId",e)},expression:"form.unitArcId"}},t._l(t.unitArchitecture,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:11}},[e("el-card",{staticStyle:{height:"150px"}},[e("el-form-item",{attrs:{label:"源集群",prop:"sourceClusterIds","label-width":"100px"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择源集群",clearable:"",multiple:"",filterable:""},on:{change:t.changeSourceIds},model:{value:t.form.sourceIds,callback:function(e){t.$set(t.form,"sourceIds",e)},expression:"form.sourceIds"}},t._l(t.opts_cluster,(function(a){return e("el-option",{key:a.id,attrs:{label:a.clusterName,disabled:t.form.backupClusterIds===a.id,value:a.id}})})),1)],1),e("el-form-item",{attrs:{label:"源topic",prop:"topic","label-width":"100px"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择Topic",multiple:"",filterable:""},on:{change:t.changeSourceTopic},model:{value:t.form.sourceTopic,callback:function(e){t.$set(t.form,"sourceTopic",e)},expression:"form.sourceTopic"}},[e("el-option",{attrs:{value:".*",label:"全部"}}),e("div",{staticStyle:{"border-top":"1px dashed #c6c6c6"}},t._l(t.opts_topic,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)],1)],1),e("el-col",{staticStyle:{height:"150px","line-height":"150px","text-align":"center"},attrs:{span:2}},[e("i",{staticClass:"el-icon-right"})]),e("el-col",{attrs:{span:11}},[e("el-card",[e("el-form-item",{attrs:{label:"目标集群",prop:"backupClusterIds","label-width":"100px"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择目标集群",clearable:"",filterable:""},on:{change:t.changeCluster},model:{value:t.form.backupClusterIds,callback:function(e){t.$set(t.form,"backupClusterIds",e)},expression:"form.backupClusterIds"}},t._l(t.opts_cluster,(function(a){return e("el-option",{key:a.id,attrs:{label:a.clusterName,disabled:t.form.sourceIds.includes(a.id),value:a.id}})})),1)],1),e("el-form-item",{attrs:{label:"机器",prop:"machineId","label-width":"100px"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:t.form.machineId,callback:function(e){t.$set(t.form,"machineId",e)},expression:"form.machineId"}},t._l(t.opts_machine,(function(a){return e("el-option",{key:a.machineIp,staticClass:"el-option-box",attrs:{label:"".concat(a.machineIp,"(").concat(a.machineUserName,")"),value:a.id}},[e("ul",{staticClass:"el-option-ul-between"},[e("li",[t._v(t._s(a.machineIp))]),e("li",[t._v(t._s(a.machineUserName))])])])})),1)],1),e("el-form-item",{attrs:{label:"副本数",prop:"replicationFactor","label-width":"100px"}},[e("el-input-number",{staticStyle:{width:"100%"},attrs:{size:"mini","controls-position":"right",min:1,placeholder:"请输入副本数"},model:{value:t.form.replicationFactor,callback:function(e){t.$set(t.form,"replicationFactor",e)},expression:"form.replicationFactor"}})],1),e("el-form-item",{attrs:{label:"同步ACL",prop:"aclEnable","label-width":"100px"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,placeholder:"请选择同步ACL"},model:{value:t.form.aclEnable,callback:function(e){t.$set(t.form,"aclEnable",e)},expression:"form.aclEnable"}})],1)],1)],1)],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.clickConfirm}},[t._v("确定")]),e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],1)}),l=[],s=(a("a15b"),a("b64b"),a("d3b7"),a("498a"),a("159b"),a("d9bb")),u=a("54f4"),d=a("ff51"),p=a("3ad2"),f=a("5c8a"),g=a("8121"),b=a("bc59"),h={name:"AddAndEdit",components:{},model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function,unitArchitecture:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,opts_cluster_source:[],opts_cluster:[],opts_machine:[],opts_topic:[],labelPosition:"right",form:m(),rules:{unitArcId:[{required:!0,message:"请选择单元化架构",trigger:"change"}],sourceClusterIds:[{required:!0,message:"请选择源集群",trigger:"change"}],topic:[{required:!0,message:"请输入源topic",trigger:"blur"}],backupClusterIds:[{required:!0,message:"请选择目标集群",trigger:"change"}],machineId:[{required:!0,message:"请选择机器",trigger:"change"}]}}},computed:{isEdit:function(){var t;return Boolean(null===(t=this.rowData)||void 0===t?void 0:t.id)}},watch:{},created:function(){},mounted:function(){this.isEdit&&(this.form=m(this.rowData),this.changeStructure(this.form.unitArcId),this.getSourceTopic(this.form.sourceIds),this.getMachine(this.form.backupClusterIds))},methods:{changeStructure:function(t){var e=this;this.opts_cluster=[],Object(u["b"])({unitStructureId:t}).then((function(t){e.opts_cluster=t.data}))},changeSourceIds:function(t){this.form.topic="",this.opts_topic=[],this.getSourceTopic(t)},changeCluster:function(t){this.form.machineId="",this.opts_machine=[],this.getMachine(t)},changeSourceTopic:function(t){Object(d["a"])(t)&&t.includes(".*")&&(this.form.sourceTopic=".*"===t[t.length-1]?[".*"]:Object(p["a"])(t,".*"))},getSourceTopic:function(t){var e=this;return Object(r["a"])(Object(o["a"])().mark((function a(){var n,i;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,n="",!(Object(d["a"])(t)&&t.length>0)){a.next=8;break}return n=t.join("&&"),a.next=6,Object(s["d"])(n);case 6:i=a.sent,e.opts_topic=Object(d["a"])(null===i||void 0===i?void 0:i.data)?i.data:[];case 8:a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),e.opts_topic=[];case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},getMachine:function(t){var e=this;return Object(r["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,Object(s["c"])(t);case 5:n=a.sent,Object(d["a"])(null===n||void 0===n?void 0:n.data)&&(e.opts_machine=n.data),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),e.opts_machine=[];case 12:case"end":return a.stop()}}),a,null,[[2,9]])})))()},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var t=this;this.$refs.formRef.validate(function(){var e=Object(r["a"])(Object(o["a"])().mark((function e(a){var n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(n=Object(f["a"])(t.form),t.loading=!0,delete n.sourceIds,delete n.sourceTopic,!t.isEdit){e.next=9;break}return e.abrupt("return",Object(s["h"])(n).then((function(e){200===e.code&&(t.$message({type:"success",message:e.msg}),t.$emit("change",!1),t.refresh())})).finally((function(){t.loading=!1})));case 9:delete n.id,Object(s["b"])(n).then((function(e){200===e.code&&(t.$message({type:"success",message:e.msg}),t.$emit("change",!1),t.refresh())})).finally((function(){t.loading=!1}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}};function m(t){var e={id:"",unitArcId:"",aclEnable:0,backupClusterIds:"",groupRemark:"",machineId:"",replicationFactor:1,sourceIds:[],type:"",get sourceClusterIds(){return this.sourceIds.join(",")},set sourceClusterIds(t){Object(g["a"])(t)&&""!==t.trim()?this.sourceIds=t.split(","):this.sourceIds=[]},sourceTopic:[],get topic(){return this.sourceTopic.join(",")},set topic(t){Object(g["a"])(t)&&""!==t.trim()?this.sourceTopic=t.split(","):this.sourceTopic=[]}};return t&&Object.keys(e).forEach((function(a){Object(b["a"])(t,a)&&(e[a]=t[a])})),e}var C=h,v=(a("06ac"),a("2877")),w=Object(v["a"])(C,c,l,!1,null,"0876bf92",null),k=w.exports,y=a("6641"),O=a("ec41"),x=a("108e"),I={components:{AddAndEdit:k,InstancesStartLog:x["default"]},data:function(){this.$createElement;var t=this;return{opts_arch:[],buttonList:[{label:"新增",type:"add",click:this.addInfo,btnPermCode:"add"}],showDialog:!1,rowData:null,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},columns:[{prop:"unitArcName",label:"单元化架构",align:"center"},{prop:"sourceClusterNames",label:"源集群",align:"center"},{prop:"topic",label:"源Topic",align:"center"},{prop:"backupClusterNames",label:"目标集群",align:"center"},{prop:"machineIp",label:"部署机器IP",align:"center"},{prop:"replicationFactor",label:"副本数",align:"center"},{prop:"aclEnable",label:"是否开启ACL同步",align:"center",format:function(t){switch(t){case 1:return"是";case 0:return"否"}return""}},{prop:"type",label:"服务类型",align:"center"},{prop:"status",label:"状态",align:"center",width:100,render:function(t,e){var a=e.row,n=t("span");switch(a.status){case"good":n=t("el-tag",{attrs:{type:"success"}},["good"]);break;case"bad":n=t("el-tag",{attrs:{type:"error"}},["bad"]);break}return n}}],operate:{width:180,list:[{label:"启动",id:"start",isShow:function(t){return"bad"===t.status}},{label:"停止",id:"stop",isShow:function(t){return"good"===t.status}},{label:"启动日志",id:"startLog"},{label:"编辑",id:"edit"},{label:"删除",id:"delete"}]}},searchConfig:{searchData:{unitArcId:""},searchItem:[{type:"select",label:"单元化架构",prop:"unitArcId",get options(){return t.opts_arch}}],rules:{unitArcId:[{required:!0,message:"请选择单元化架构",trigger:"change"}]}},updateTime:"",startLogShow:!1}},created:function(){this.getArch()},mounted:function(){},methods:{getArch:function(){var t=this;return Object(r["a"])(Object(o["a"])().mark((function e(){var a,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,Object(y["c"])({code:"",name:""});case 4:n=e.sent,Object(d["a"])(null===n||void 0===n?void 0:n.data)&&(a=n.data.map((function(t){return{label:t.name,value:t.id}}))),t.opts_arch=a,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),t.opts_arch=a;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()},getList:function(){var t=this;return Object(r["a"])(Object(o["a"])().mark((function e(){var a,n,i,r,c,l;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(O["a"])(t.$refs,"searchRef.$refs.formRef"),e.next=3,a.validate();case 3:if(n=e.sent,n){e.next=6;break}return e.abrupt("return");case 6:if(i=[],e.prev=7,t.tableConfig.loading=!0,r=t.searchConfig.searchData,r.unitArcId){e.next=12;break}throw new Error("请选择单元化架构");case 12:return e.next=14,Object(s["g"])(r);case 14:c=e.sent,l=Object(O["a"])(c,"data"),i=Object(d["a"])(l)?l:[],e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](7);case 22:t.tableConfig.tableData=i,t.tableConfig.loading=!1;case 24:case"end":return e.stop()}}),e,null,[[7,19]])})))()},addInfo:function(){this.showDialog=!0,this.rowData=null},onSearch:function(){this.tableConfig.pagination.pageNo=1,this.getList()},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()},getIndex:function(t){var e=this;return Object(r["a"])(Object(o["a"])().mark((function a(){var n,i,r,c,l;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.index,n=t.row,i=t.operate,a.t0=i.id,a.next="edit"===a.t0?5:"delete"===a.t0?8:"start"===a.t0?13:"stop"===a.t0?26:"startLog"===a.t0?40:43;break;case 5:return e.rowData=n,e.showDialog=!0,a.abrupt("break",44);case 8:return a.next=10,e.$confirm("确定要删除【".concat(n.unitArcName,"】吗?"),{type:"warning"});case 10:return r=a.sent,"confirm"===r&&Object(s["a"])(n.groupId).then((function(t){e.$message.success("删除成功"),e.getList()})).catch((function(t){})),a.abrupt("break",44);case 13:return a.prev=13,a.next=16,Object(s["e"])(n.groupId);case 16:c=a.sent,200===(null===c||void 0===c?void 0:c.code)&&(e.$message.success(c.data),e.getList()),e.tableConfig.loading=!1,a.next=25;break;case 21:a.prev=21,a.t1=a["catch"](13),e.tableConfig.loading=!1;case 25:return a.abrupt("break",44);case 26:return e.tableConfig.loading=!0,a.prev=27,a.next=30,Object(s["f"])(n.groupId);case 30:l=a.sent,200===(null===l||void 0===l?void 0:l.code)&&(e.$message.success(l.data),e.getList()),e.tableConfig.loading=!1,a.next=39;break;case 35:a.prev=35,a.t2=a["catch"](27),e.tableConfig.loading=!1;case 39:return a.abrupt("break",44);case 40:return e.startLogShow=!0,e.rowData=n,a.abrupt("break",44);case 43:case 44:case"end":return a.stop()}}),a,null,[[13,21],[27,35]])})))()},changeTime:function(t){this.updateTime=t},clickCancel:function(){this.startLogShow=!1}}},D=I,j=Object(v["a"])(D,n,i,!1,null,"004e4b08",null);e["default"]=j.exports},"0afa":function(t,e,a){"use strict";a("5698")},"108e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main"},[e("div",{attrs:{id:"terminal-container"}}),e("div",{staticClass:"page-number"},[e("el-button",{attrs:{disabled:t.pageNum<=1},on:{click:t.upPage}},[t._v("上一页")]),e("span",{staticClass:"el-pagination-jump"},[t._v(" 前往 "),e("el-input",{staticClass:"number-input",attrs:{min:"1",size:"mini"},on:{change:t.getLogDetail},model:{value:t.pageNum,callback:function(e){t.pageNum=t._n(e)},expression:"pageNum"}}),t._v(" 页 ")],1),e("el-button",{attrs:{disabled:t.nextDisabled},on:{click:t.nextPage}},[t._v("下一页")])],1)])},i=[],o=(a("d3b7"),a("abb2"),a("fcf3")),r=a("47d0"),c=a("264f"),l=a("ec41"),s={name:"PrismjsLog",components:{},props:{updateTime:{type:String,default:null},terminalData:{type:String,default:null},rowData:{type:Object,default:null}},data:function(){return{terminal:{pid:1,name:"terminal",scrollback:1e4},pageNum:1,pageTotal:0,term:null,socket:null,nextDisabled:!1,loading:!1}},watch:{pageNum:function(t){t&&this.getLogDetail()}},mounted:function(){this.initTerm()},beforeDestroy:function(){this.term.dispose()},clickCancel:function(){this.startLogShow=!1},methods:{upPage:function(){this.pageNum>1&&this.pageNum--},nextPage:function(){this.pageNum++},initTerm:function(){var t=document.getElementById("terminal-container"),e=new o["Terminal"](this.terminal),a=new r["FitAddon"];e.loadAddon(a),e.open(t),a.fit(),e.focus(),this.term=e,this.getLogDetail()},getLogDetail:function(){var t=this;this.loading=!0,Object(c["k"])({instanceId:this.rowData.id,pageNum:this.pageNum}).then((function(e){var a=Object(l["a"])(e,"data.content"),n=Object(l["a"])(e,"data.date");t.pageTotal=Object(l["a"])(e,"data.pageTotal"),t.nextDisabled="读取文件失败没有更多的内容。"===a,t.term.clear(),t.term.write(a+"\r\n"),t.$emit("changeTime",n)})).finally((function(){t.loading=!1}))}}},u=s,d=(a("2e75"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,"256404ae",null);e["default"]=p.exports},"132d":function(t,e,a){},"167a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[e("el-tab-pane",{attrs:{label:"逻辑单元",name:"1"}}),e("el-tab-pane",{attrs:{label:"全局单元",name:"2"}}),e("el-tab-pane",{attrs:{label:"全局只读副本",name:"3"}})],1),e("search-form",{attrs:{searchConfig:t.searchConfig},on:{onSearch:t.onSearch}}),e(t.activeName,{ref:"componentRef",tag:"component",attrs:{unitType:t.activeIndex,searchData:this.searchConfig.searchData}})],1)},i=[],o=(a("99af"),a("d81d"),a("e579")),r=a("3a6f"),c=a("a103"),l=a("142c"),s=a("934b"),u={components:{LogicalUnit:o["default"],GlobalUnit:r["default"],GlobalReadOnlyCopy:c["default"]},data:function(){var t=this,e=this;return{dataCenter_options:[],unit_options:[],activeIndex:"1",activeName:"LogicalUnit",componentList:["LogicalUnit","GlobalUnit","GlobalReadOnlyCopy"],searchConfig:{searchData:{idcId:"",unitId:""},searchItem:[{type:"select",label:"数据中心",prop:"idcId",get options(){return e.dataCenter_options},change:function(e){t.searchConfig.searchData.unitId="",t.getUnitOptions(e)}},{type:"select",label:"单元",prop:"unitId",get options(){return e.unit_options}}],rules:{}}}},mounted:function(){this.getSelOptions(),this.getUnitOptions()},methods:{onSearch:function(){this.$refs.componentRef.getList()},handleClick:function(t){this.activeName=this.componentList[t.index],this.searchConfig.searchData.idcId="",this.searchConfig.searchData.unitId="",this.getUnitOptions()},getSelOptions:function(){var t=this;Object(l["f"])().then((function(e){t.dataCenter_options=e.data.map((function(t){return{label:"".concat(t.machineRoomCode,"(").concat(t.machineRoomName,")"),value:t.id}}))}))},getUnitOptions:function(t){var e=this,a={unitType:this.activeIndex};t&&(a.machineRoomId=t),Object(s["c"])(a).then((function(t){e.unit_options=t.data.map((function(t){return{label:t.bakNo?"".concat(t.unitName,"(").concat(t.bakNo,")"):"".concat(t.unitName),value:t.id}}))}))}}},d=u,p=a("2877"),f=Object(p["a"])(d,n,i,!1,null,"460eec61",null);e["default"]=f.exports},"2e75":function(t,e,a){"use strict";a("4d72")},3117:function(t,e,a){},"3a6f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"name-container"},[e("button-list",{attrs:{data:t.buttonList}}),e("tableView",{ref:"tableView",attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,total:t.tableConfig.pagination.totalCount,rowKey:"id",currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},changePage:t.changePage,operate:t.getIndex}}),t.showDialog?e("AddAndEdit",{attrs:{rowData:t.rowData,refresh:t.getList,unitType:t.unitType},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}}):t._e()],1)},i=[],o=a("5530"),r=(a("99af"),a("d3b7"),a("9401")),c=a("54f4"),l=a("ec41"),s=a("ff51"),u={components:{AddAndEdit:r["a"]},props:{unitType:{type:String,default:"1"},searchData:{type:Object,default:function(){return null}}},data:function(){this.$createElement;return{page:"2",dataCenter_options:[],unit_options:[],buttonList:[{label:"新增",type:"add",click:this.addInfo,btnPermCode:"add"}],showDialog:!1,rowData:null,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},columns:[{prop:"idcName",label:"数据中心",align:"center"},{prop:"unitName",label:"单元",align:"center",render:function(t,e){var a=e.row,n=a.bakNo?"".concat(a.unitName,"(").concat(a.bakNo,")"):"".concat(a.unitName);return t("span",[n])}},{prop:"clusterName",label:"集群名称",align:"center"},{prop:"description",label:"描述",align:"center"}],operate:{width:220,list:[{label:"编辑",id:"edit",btnPermCode:"edit"},{label:"删除",id:"delete",btnPermCode:"config"}]}}}},computed:{unitStructureId:function(){return this.$route.query.unitStructureId}},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var t=this,e={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:Object(o["a"])(Object(o["a"])({},this.searchData),{},{unitStructureId:this.unitStructureId,unitType:this.unitType})};this.tableConfig.loading=!0,Object(c["e"])(e).then((function(e){var a,n=Object(l["a"])(e,"data.data");t.tableConfig.tableData=Object(s["a"])(n)?n:[],t.tableConfig.pagination.totalCount=null!==(a=Object(l["a"])(e,"data.totalCount"))&&void 0!==a?a:0})).finally((function(){t.tableConfig.loading=!1}))},addInfo:function(){this.showDialog=!0,this.rowData=null},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()},getIndex:function(t){var e=this,a=(t.index,t.row),n=t.operate;"delete"===n.id?this.$confirm("确定要删除【".concat(a.idcName,"】吗?"),{type:"warning"}).then((function(){Object(c["c"])(a.id).then((function(t){e.$message.success("删除成功"),e.getList()})).catch((function(t){}))})).catch((function(t){})):"edit"===n.id&&(this.rowData=a,this.showDialog=!0)}}},d=u,p=a("2877"),f=Object(p["a"])(d,n,i,!1,null,"5814d3e0",null);e["default"]=f.exports},"4d72":function(t,e,a){},5698:function(t,e,a){},"8eaf":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"calc(100% - 54px)"}},[e("div",{ref:"wrapRef"},[e("search-form",{ref:"wrapRef",attrs:{searchConfig:t.searchConfig},on:{onSearch:t.onSearch}}),e("button-list",{attrs:{data:t.buttonList}})],1),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],style:{height:t.tableHeight}},[t.tableData.length>0?e("el-table",{ref:"tableView",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%","row-class-name":t.tableRowClassName},on:{"expand-change":t.expandChange}},[e("el-table-column",{attrs:{type:"expand",width:"50"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-table",{attrs:{data:a.row.children}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e("el-table-column",{attrs:{prop:"clusterId",label:"集群名称"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("getClusterName")(a.row.clusterId,t.csMixKafkaCluster)))])]}}],null,!0)}),e("el-table-column",{attrs:{prop:"name",label:"Topic"}}),e("el-table-column",{attrs:{prop:"brokerCount",label:"broker"}}),e("el-table-column",{attrs:{prop:"partitionCount",label:"分区数"}}),e("el-table-column",{attrs:{prop:"brokerSpread",label:"broker使用率"}}),e("el-table-column",{attrs:{prop:"brokerSkewed",label:"分区倾斜率"}}),e("el-table-column",{attrs:{prop:"brokerLeaderSkewed",label:"主分区倾斜率"}}),e("el-table-column",{attrs:{prop:"value",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row,i=a.$index;return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.getIndex(i,n,"msg_test")}}},[t._v("消息测试")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.getIndex(i,n,"extend")}}},[t._v("扩展分区")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.getIndex(i,n,"delete")}}},[t._v("删除")])]}}],null,!0)})],1)]}}],null,!1,2781980527)}),e("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e("el-table-column",{attrs:{prop:"topicName",label:"TOPIC"}}),e("el-table-column",{attrs:{prop:"unitType",label:"单元类型"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("getUnitType")(a.row.unitType)))])]}}],null,!1,2033223625)}),e("el-table-column",{attrs:{prop:"topicFormatOpen",label:"主题变换"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s("0"===a.row.topicFormatOpen?"否":"是"))])]}}],null,!1,2587808657)}),e("el-table-column",{attrs:{prop:"value",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.row;return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.clickDetail(n)}}},[t._v("主题详情")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.clickdelete(n)}}},[t._v("删除")])]}}],null,!1,3943468414)})],1):e("el-empty")],1),t.showDialog?e("AddAndEdit",{attrs:{rowData:t.rowData,refresh:t.onSearch},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}}):t._e(),t.showMsgTest?e("DialogMsgTest",{attrs:{rowData:t.rowData},model:{value:t.showMsgTest,callback:function(e){t.showMsgTest=e},expression:"showMsgTest"}}):t._e()],1)},i=[],o=a("5530"),r=a("c7eb"),c=a("1da1"),l=(a("d81d"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("00b4"),function(){var t=this,e=t._self._c;return e("el-dialog-limit",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.isEdit?"编辑":"新增",visible:t.show,size:"small","element-loading-text":"创建主题时间较长,请耐心等待","append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[e("el-form",{ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":t.labelPosition,"label-width":"100px",model:t.form,rules:t.rules}},[e("el-form-item",{attrs:{label:"集群",prop:"clusterId"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择集群",multiple:""},model:{value:t.form.clusterId,callback:function(e){t.$set(t.form,"clusterId",e)},expression:"form.clusterId"}},t._l(t.csMixKafkaCluster,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"单元类型",prop:"unitType"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择单元类型",clearable:"",filterable:""},model:{value:t.form.unitType,callback:function(e){t.$set(t.form,"unitType",e)},expression:"form.unitType"}},t._l(t.dict_unitType.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"主题名",prop:"topicName"}},[e("el-input",{attrs:{size:"mini"},model:{value:t.form.topicName,callback:function(e){t.$set(t.form,"topicName",e)},expression:"form.topicName"}})],1),e("el-form-item",{attrs:{label:"分区数",prop:"partitionCount"}},[e("el-input",{attrs:{size:"mini",type:"number",min:"0"},model:{value:t.form.partitionCount,callback:function(e){t.$set(t.form,"partitionCount",t._n(e))},expression:"form.partitionCount"}})],1),e("el-form-item",{attrs:{label:"副本数",prop:"replicaCount"}},[e("el-input",{attrs:{size:"mini",type:"number",min:"0"},model:{value:t.form.replicaCount,callback:function(e){t.$set(t.form,"replicaCount",t._n(e))},expression:"form.replicaCount"}})],1),e("el-form-item",{attrs:{label:"主题变换",prop:"topicFormatOpen"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.switchChange},model:{value:t.form.topicFormatOpen,callback:function(e){t.$set(t.form,"topicFormatOpen",e)},expression:"form.topicFormatOpen"}})],1),t.form.topicFormatOpen?e("div",[e("el-form-item",{attrs:{label:"主题格式",prop:"topicFormat"}},[e("el-input",{attrs:{size:"mini"},model:{value:t.form.topicFormat,callback:function(e){t.$set(t.form,"topicFormat",e)},expression:"form.topicFormat"}})],1),e("el-form-item",{attrs:{label:"包含单元",prop:"unitCode"}},[e("el-checkbox-group",{model:{value:t.form.unitCode,callback:function(e){t.$set(t.form,"unitCode",e)},expression:"form.unitCode"}},t._l(t.unitCodeOptions,(function(a){return e("el-checkbox",{key:a,attrs:{label:a}},[t._v(t._s(a))])})),1)],1)],1):t._e()],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.clickConfirm}},[t._v("确定")]),e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],1)}),s=[],u=(a("a15b"),a("b64b"),a("159b"),a("bc59")),d=a("5c8a"),p=a("72bb"),f=a("4879"),g=a("1b62"),b=g["a"].CommonSelectCreaterMix;function h(t){var e={clusterId:[],partitionCount:"",replicaCount:"",topicFormat:"%unit%_%topic%",topicFormatOpen:"",topicName:"",unitCode:[],unitType:""};return t&&Object.keys(e).forEach((function(a){Object(u["a"])(t,a)&&(e[a]=t[a])})),e}var m={name:"AddAndEdit",components:{},mixins:[b(["csMixKafkaCluster"])],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function},data:function(){return{unitCodeOptions:[],loading:!1,dict_unitType:f["g"],labelPosition:"right",form:h(),rules:{code:[{required:!0,message:"请输入编码",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},computed:{isEdit:function(){var t;return Boolean(null===(t=this.rowData)||void 0===t?void 0:t.id)}},watch:{},created:function(){},mounted:function(){this.isEdit&&(this.form=h(this.rowData))},methods:{switchChange:function(){var t=this;this.form.unitType?Object(p["e"])({unitType:this.form.unitType}).then((function(e){t.unitCodeOptions=e.data})):(this.$message.warning("请选择单元类型"),this.form.topicFormatOpen=!1)},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var t=this;this.$refs.formRef.validate(function(){var e=Object(c["a"])(Object(r["a"])().mark((function e(a){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a&&(n=Object(d["a"])(t.form),n.clusterId=t.form.clusterId.join(","),n.unitCode=t.form.unitCode.join(","),t.loading=!0,Object(p["c"])(n).then((function(e){200===e.code&&(t.$message({type:"success",message:e.msg}),t.$emit("change",!1),t.refresh())})).finally((function(){t.loading=!1})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},C=m,v=(a("cb36"),a("2877")),w=Object(v["a"])(C,l,s,!1,null,"7ba2da0b",null),k=w.exports,y=a("9fe7"),O=a("8a71"),x=a("ec41"),I=a("ff51"),D=a("2f7b"),j=a("49bb"),_=(a("498a"),function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:"消息测试",visible:t.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[e("el-form",{ref:"formRef",attrs:{model:t.formData,"label-width":"120px",rules:t.rules}},[e("el-form-item",{attrs:{label:"测试内容",prop:"details"}},[e("el-input",{staticClass:"w-100",attrs:{type:"textarea",placeholder:"请输入测试内容"},model:{value:t.formData.details,callback:function(e){t.$set(t.formData,"details","string"===typeof e?e.trim():e)},expression:"formData.details"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.clickConfirm}},[t._v("测试")]),e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],1)}),N=[],S={components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:function(){return{}}}},data:function(){return{formData:{details:""},rules:{details:[{required:!0,trigger:"blur",message:"请输入测试内容"}]}}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("change",!1)}}},watch:{},created:function(){},mounted:function(){},methods:{clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var t=this;this.$refs.formRef.validate((function(e){if(e){var a={clusterId:t.rowData.clusterId,topicName:t.rowData.name,details:t.formData.details};Object(y["b"])(a).then((function(e){e&&200===e.code&&(t.$message.success("测试成功"),t.$emit("change",!1))}))}}))}}},$=S,T=Object(v["a"])($,_,N,!1,null,"1fc50f60",null),L=T.exports,z=g["a"].CommonSelectCreaterMix,P={components:{AddAndEdit:k,DialogMsgTest:L},mixins:[z(["csMixKafkaCluster"])],data:function(){var t=this;return{showMsgTest:!1,hasMore:!1,loading:!1,formHeight:0,buttonList:[{label:"新增",type:"add",click:this.addInfo,btnPermCode:"add"}],showDialog:!1,rowData:null,tableData:[],searchConfig:{searchData:{clusterId:""},searchItem:[{type:"select",label:"集群",prop:"clusterId",get options(){return t.csMixKafkaCluster}}],rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}]}}}},filters:{getUnitType:function(t){return f["g"].get(t)},getClusterName:function(t,e){var a=Object(j["g"])(t,e);return a}},computed:{wrapRef:function(){return this.$refs.wrapRef},tableHeight:function(){var t=this.formHeight||46;return this.formHeight?"calc(100% - ".concat(t,"px)"):500}},beforeDestroy:function(){this.wrapRef&&this.handleResize&&Object(D["b"])(this.wrapRef,this.handleResize)},mounted:function(){Object(D["a"])(this.wrapRef,this.handleResize)},created:function(){},methods:{expandChange:function(t,e){var a=this;return Object(c["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(-1===e.indexOf(t)){n.next=5;break}return n.next=3,Object(p["b"])({clusterId:a.searchConfig.searchData.clusterId,id:t.id});case 3:i=n.sent,t.children=i.data;case 5:case"end":return n.stop()}}),n)})))()},tableRowClassName:function(t){var e=t.row;t.rowIndex;return"first-page"===e.class?"first-page":"next-page"===e.class?"next-page":""},handleResize:function(){var t=this.wrapRef;if(t){var e=t.getBoundingClientRect().height;this.formHeight=Math.ceil(parseFloat(e))}},clickdelete:function(t){var e=this;this.$confirm("确定要删除【".concat(t.topicName,"】吗?"),{type:"warning"}).then((function(){Object(p["a"])(t.id).then((function(t){e.$message.success("删除成功"),e.getFirst()})).catch((function(t){}))})).catch((function(t){}))},clickDetail:function(t){var e=this.$refs.tableView;e.toggleRowExpansion(t)},getFirst:function(){var t=this,e={pageNo:1,pageSize:10,requestObject:Object(o["a"])({},this.searchConfig.searchData)};this.loading=!0,this.hasMore=!0,this.tableData=[],Object(p["d"])(e).then((function(e){var a=Object(x["a"])(e,"data.data");Object(I["a"])(a)&&(t.tableData=a.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{children:[]})})),t.partitionOffsets=Object(x["a"])(e,"data.partitionOffsets"))})).catch((function(t){})).finally((function(){t.loading=!1}))},addInfo:function(){this.showDialog=!0,this.rowData=null},onSearch:function(t){var e=this;return Object(c["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=4;break}return e.searchConfig.searchData.clusterId="",e.tableData=[],a.abrupt("return");case 4:e.getFirst();case 5:case"end":return a.stop()}}),a)})))()},getIndex:function(t,e,a){var n=this;"delete"===a?this.$confirm("确定要删除【".concat(e.name,"】吗?"),{type:"warning"}).then((function(){var t={clusterId:e.clusterId,topicName:e.name};Object(O["b"])(t).then((function(t){n.$message.success("删除成功"),n.getFirst()})).catch((function(t){}))})).catch((function(t){})):"msg_test"===a?(this.rowData=e,this.showMsgTest=!0):"extend"===a&&(this.rowData=e,this.$prompt("请输入扩展分区",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputPlaceholder:"Partitions(Number>=1)",closeOnClickModal:!1,inputValidator:function(t){return!!/^[0-9]*$/.test(t)&&0!==Number(t)},inputErrorMessage:"Partitions(Number>=1)"}).then((function(t){var a=t.value,i={clusterId:e.clusterId,topicName:e.name,partitions:a};Object(y["a"])(i).then((function(t){200===t.code&&(n.$message.success("扩展分区设置成功"),n.getFirst())}))})).catch((function(){})))}}},A=P,E=(a("db82"),Object(v["a"])(A,n,i,!1,null,"cf614c4e",null));e["default"]=E.exports},9212:function(t,e,a){},9401:function(t,e,a){"use strict";a("a4d3"),a("e01a");var n=function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:t.isEdit?"编辑":"新增",visible:t.show,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[e("el-form",{ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":t.labelPosition,"label-width":"100px",model:t.form,rules:t.rules}},[e("el-form-item",{attrs:{label:"数据中心",prop:"idcId"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择数据中心",disabled:t.isEdit},on:{change:t.changDataCenter},model:{value:t.form.idcId,callback:function(e){t.$set(t.form,"idcId",e)},expression:"form.idcId"}},t._l(t.dataCenter_options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"单元",prop:"unitId"}},[e("el-select",{staticClass:"w-100",attrs:{disabled:t.isEdit,placeholder:"请选择单元"},model:{value:t.form.unitId,callback:function(e){t.$set(t.form,"unitId",e)},expression:"form.unitId"}},t._l(t.unit_options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"消息集群",prop:"clusterId"}},[e("el-select",{staticClass:"w-100",attrs:{placeholder:"请选择消息集群"},model:{value:t.form.clusterId,callback:function(e){t.$set(t.form,"clusterId",e)},expression:"form.clusterId"}},t._l(t.mqCluster_options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"描述",prop:"description"}},[e("el-input",{attrs:{placeholder:"请输入内容",type:"textarea",maxlength:"200","show-word-limit":""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.clickConfirm}},[t._v("确定")]),e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],1)},i=[],o=a("c7eb"),r=a("5530"),c=a("1da1"),l=(a("99af"),a("d81d"),a("b64b"),a("d3b7"),a("159b"),a("54f4")),s=a("934b"),u=a("142c"),d=a("bc59");function p(t){var e={id:"",idcId:"",unitId:"",clusterId:"",description:""};return t&&Object.keys(e).forEach((function(a){Object(d["a"])(t,a)&&(e[a]=t[a])})),e}var f={name:"AddAndEdit",components:{},model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function,unitType:{type:String,default:"1"}},data:function(){return{loading:!1,dataCenter_options:[],unit_options:[],mqCluster_options:[],labelPosition:"right",form:p(),rules:{idcId:[{required:!0,message:"请选择数据中心",trigger:"change"}],unitId:[{required:!0,message:"请选择单元",trigger:"change"}],clusterId:[{required:!0,message:"请选择消息集群",trigger:"change"}]}}},computed:{isEdit:function(){var t;return Boolean(null===(t=this.rowData)||void 0===t?void 0:t.id)},unitStructureId:function(){return this.$route.query.unitStructureId}},watch:{},created:function(){},mounted:function(){this.getDataCenterOptions(),this.isEdit&&(this.form=p(this.rowData),this.changDataCenter())},methods:{getDataCenterOptions:function(){var t=this;Object(u["f"])().then((function(e){t.dataCenter_options=e.data.map((function(t){return{label:"".concat(t.machineRoomCode,"(").concat(t.machineRoomName,")"),value:t.id}}))}))},changDataCenter:function(t){var e=this;Object(s["c"])({machineRoomId:this.form.idcId,unitType:this.unitType}).then((function(t){e.unit_options=t.data.map((function(t){return{label:t.bakNo?"".concat(t.unitName,"(").concat(t.bakNo,")"):"".concat(t.unitName),value:t.id}}))})),Object(l["a"])({machineRoomId:this.form.idcId}).then((function(t){e.mqCluster_options=t.data.map((function(t){return{label:t.clusterName,value:t.id}}))}))},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var t=this;this.$refs.formRef.validate(function(){var e=Object(c["a"])(Object(o["a"])().mark((function e(a){var n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a&&(n=Object(r["a"])(Object(r["a"])({},t.form),{},{unitStructureId:t.unitStructureId,componentType:t.unitType}),t.loading=!0,t.isEdit?Object(l["f"])(n).then((function(e){200===e.code&&(t.$message({type:"success",message:e.msg}),t.$emit("change",!1),t.refresh())})).finally((function(){t.loading=!1})):(delete n.id,Object(l["d"])(n).then((function(e){200===e.code&&(t.$message({type:"success",message:e.msg}),t.$emit("change",!1),t.refresh())})).finally((function(){t.loading=!1}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},g=f,b=(a("efa5"),a("2877")),h=Object(b["a"])(g,n,i,!1,null,"3e038582",null);e["a"]=h.exports},a103:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"name-container"},[e("button-list",{attrs:{data:t.buttonList}}),e("tableView",{ref:"tableView",attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,total:t.tableConfig.pagination.totalCount,rowKey:"id",currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},changePage:t.changePage,operate:t.getIndex}}),t.showDialog?e("AddAndEdit",{attrs:{rowData:t.rowData,refresh:t.getList,unitType:t.unitType},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}}):t._e()],1)},i=[],o=a("5530"),r=(a("99af"),a("d3b7"),a("9401")),c=a("54f4"),l=a("ec41"),s=a("ff51"),u={components:{AddAndEdit:r["a"]},props:{unitType:{type:String,default:"1"},searchData:{type:Object,default:function(){return null}}},data:function(){this.$createElement;return{dataCenter_options:[],unit_options:[],buttonList:[{label:"新增",type:"add",click:this.addInfo,btnPermCode:"add"}],showDialog:!1,rowData:null,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},columns:[{prop:"idcName",label:"数据中心",align:"center"},{prop:"unitName",label:"单元",align:"center",render:function(t,e){var a=e.row,n=a.bakNo?"".concat(a.unitName,"(").concat(a.bakNo,")"):"".concat(a.unitName);return t("span",[n])}},{prop:"clusterName",label:"集群名称",align:"center"},{prop:"description",label:"描述",align:"center"}],operate:{width:220,list:[{label:"编辑",id:"edit",btnPermCode:"edit"},{label:"删除",id:"delete",btnPermCode:"config"}]}}}},computed:{unitStructureId:function(){return this.$route.query.unitStructureId}},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var t=this,e={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:Object(o["a"])(Object(o["a"])({},this.searchData),{},{unitStructureId:this.unitStructureId,unitType:this.unitType})};this.tableConfig.loading=!0,Object(c["e"])(e).then((function(e){var a,n=Object(l["a"])(e,"data.data");t.tableConfig.tableData=Object(s["a"])(n)?n:[],t.tableConfig.pagination.totalCount=null!==(a=Object(l["a"])(e,"data.totalCount"))&&void 0!==a?a:0})).finally((function(){t.tableConfig.loading=!1}))},addInfo:function(){this.showDialog=!0,this.rowData=null},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()},getIndex:function(t){var e=this,a=(t.index,t.row),n=t.operate;"delete"===n.id?this.$confirm("确定要删除【".concat(a.idcName,"】吗?"),{type:"warning"}).then((function(){Object(c["c"])(a.id).then((function(t){e.$message.success("删除成功"),e.getList()})).catch((function(t){}))})).catch((function(t){})):"edit"===n.id&&(this.rowData=a,this.showDialog=!0)}}},d=u,p=a("2877"),f=Object(p["a"])(d,n,i,!1,null,"ac35bbbc",null);e["default"]=f.exports},a9d9:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{key:"consume",staticClass:"page-box"},[e("search-form",{attrs:{searchConfig:t.searchConfig},on:{onSearch:t.onSearch}}),e("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{gutter:16}},t._l(t.cardData,(function(a,n){return e("el-col",{key:n,attrs:{xs:8,sm:8,md:6,lg:6,xl:4}},[e("el-descriptions",{staticClass:"mb-20",staticStyle:{"min-width":"300px"},attrs:{column:1,border:"",labelStyle:{"font-weight":"normal","font-size":"14px","line-height":"20px",align:"center",width:"34%"},size:"mini"}},[e("el-descriptions-item",{attrs:{label:"应用名称",contentClassName:"contentClassName"}},[e("el-tooltip",{attrs:{content:a.applicationName,effect:"dark",placement:"top-start"}},[e("span",{staticClass:"content-value"},[t._v(t._s(a.applicationName))])])],1),e("el-descriptions-item",{attrs:{label:"IP",contentClassName:"contentClassName"}},[e("el-tooltip",{attrs:{effect:"dark",content:a.hostIp,placement:"top-start"}},[e("span",{staticClass:"content-value"},[t._v(t._s(a.hostIp))])])],1),e("el-descriptions-item",{attrs:{label:"端口",contentClassName:"contentClassName"}},[e("el-tooltip",{attrs:{effect:"dark",content:a.serverPort,placement:"top-start"}},[e("span",{staticClass:"content-value"},[t._v(t._s(a.serverPort))])])],1),e("el-descriptions-item",{attrs:{label:"应用启动时间",contentClassName:"contentClassName"}},[e("el-tooltip",{attrs:{effect:"dark",content:a.createDate,placement:"top-start"}},[e("span",{staticClass:"content-value"},[t._v(t._s(a.createDate))])])],1),e("el-descriptions-item",{attrs:{label:"消费者主题",contentClassName:"contentClassName"}},[e("el-tooltip",{attrs:{effect:"dark",content:a.consumerInfor,placement:"top-start"}},[e("span",{staticClass:"content-value"},[t._v(t._s(a.consumerInfor))])])],1),e("el-descriptions-item",{attrs:{label:"生产者组",contentClassName:"contentClassName"}},[e("el-tooltip",{attrs:{effect:"dark",content:a.productInfor,placement:"top-start"}},[e("span",{staticClass:"content-value"},[t._v(t._s(a.productInfor))])])],1)],1)],1)})),1)],1)},i=[],o=(a("d81d"),a("d3b7"),a("ff51")),r=(a("feb8"),a("2f7b"),a("1b62")),c=a("f423"),l=r["a"].CommonSelectCreaterMix,s={name:"CentralizedSdk",components:{},mixins:[l(["csMixKafkaCluster"])],props:{},data:function(){var t=this,e=this;return{cardData:[],applyList:[],jsp:null,loading:!1,appName:"",appList:[{id:123123,appName:"ESFS"}],searchConfig:{searchData:{clusterId:"",applicationName:""},searchItem:[{type:"select",label:"所属集群",prop:"clusterId",get options(){return e.csMixKafkaCluster},change:function(e){e?t.getapplyList(e):t.applyList=[]}},{type:"select",label:"应用名称",prop:"applicationName",get options(){return e.applyList}}],rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}]}}}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{getapplyList:function(){var t=this,e=this.searchConfig.searchData.clusterId;this.searchConfig.searchData.applicationName="",this.applyList=[],Object(c["b"])(e).then((function(e){var a=[];Object(o["a"])(null===e||void 0===e?void 0:e.data)&&(a=e.data.map((function(t){return{label:t,value:t}}))),t.applyList=a}))},onSearch:function(t){t?this.cardData=[]:this.getData()},getData:function(){var t=this;this.loading=!0;var e=this.searchConfig.searchData,a=e.clusterId,n=e.applicationName,i={clusterId:a,applicationName:n};Object(c["a"])(i).then((function(e){Object(o["a"])(null===e||void 0===e?void 0:e.data)&&(t.cardData=e.data)})).catch((function(t){})).finally((function(){t.loading=!1}))}}},u=s,d=(a("0afa"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,"9ee6f95a",null);e["default"]=p.exports},cb36:function(t,e,a){"use strict";a("9212")},d4238:function(t,e,a){"use strict";a("e613")},db82:function(t,e,a){"use strict";a("ee8d")},e579:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"name-container"},[e("button-list",{attrs:{data:t.buttonList}}),e("tableView",{ref:"tableView",attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,total:t.tableConfig.pagination.totalCount,rowKey:"id",currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},changePage:t.changePage,operate:t.getIndex}}),t.showDialog?e("AddAndEdit",{attrs:{unitType:t.unitType,rowData:t.rowData,refresh:t.getList},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}}):t._e()],1)},i=[],o=a("5530"),r=(a("99af"),a("d3b7"),a("9401")),c=a("54f4"),l=a("ec41"),s=a("ff51"),u={components:{AddAndEdit:r["a"]},props:{unitType:{type:String,default:"1"},searchData:{type:Object,default:function(){return null}}},data:function(){this.$createElement;return{page:"1",buttonList:[{label:"新增",type:"add",click:this.addInfo,btnPermCode:"add"}],showDialog:!1,rowData:null,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},columns:[{prop:"idcName",label:"数据中心",align:"center"},{prop:"unitName",label:"单元",align:"center",render:function(t,e){var a=e.row,n=a.bakNo?"".concat(a.unitName,"(").concat(a.bakNo,")"):"".concat(a.unitName);return t("span",[n])}},{prop:"clusterName",label:"集群名称",align:"center"},{prop:"description",label:"描述",align:"center"}],operate:{width:220,list:[{label:"编辑",id:"edit",btnPermCode:"edit"},{label:"删除",id:"delete",btnPermCode:"config"}]}}}},computed:{unitStructureId:function(){return this.$route.query.unitStructureId}},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var t=this,e={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:Object(o["a"])(Object(o["a"])({},this.searchData),{},{unitStructureId:this.unitStructureId,unitType:this.unitType})};this.tableConfig.loading=!0,Object(c["e"])(e).then((function(e){var a,n=Object(l["a"])(e,"data.data");t.tableConfig.tableData=Object(s["a"])(n)?n:[],t.tableConfig.pagination.totalCount=null!==(a=Object(l["a"])(e,"data.totalCount"))&&void 0!==a?a:0})).finally((function(){t.tableConfig.loading=!1}))},addInfo:function(){this.showDialog=!0,this.rowData=null},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()},getIndex:function(t){var e=this,a=(t.index,t.row),n=t.operate;"delete"===n.id?this.$confirm("确定要删除【".concat(a.idcName,"】吗?"),{type:"warning"}).then((function(){Object(c["c"])(a.id).then((function(t){e.$message.success("删除成功"),e.getList()})).catch((function(t){}))})).catch((function(t){})):"edit"===n.id&&(this.rowData=a,this.showDialog=!0)}}},d=u,p=a("2877"),f=Object(p["a"])(d,n,i,!1,null,"d7e1dc00",null);e["default"]=f.exports},e613:function(t,e,a){},ee8d:function(t,e,a){},efa5:function(t,e,a){"use strict";a("132d")}}]);