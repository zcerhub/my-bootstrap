(window["jsonpPaas4"]=window["jsonpPaas4"]||[]).push([["app~f6f6ed3b"],{"0c88":function(e,t,a){"use strict";a("848b")},"121e":function(e,t,a){"use strict";a("3795")},"1eeb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"role-authorization"},[t("el-row",{attrs:{gutter:5}},[t("el-col",{attrs:{span:5}},[t("el-card",{staticClass:"left-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("系统角色")])]),t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingSystem,expression:"loadingSystem"}],attrs:{"expand-on-click-node":!1,"render-content":e.renderSysContent,data:e.sysData,props:e.defaultSysProps,"default-expand-all":!0,"highlight-current":!0},on:{"node-click":e.handleSysClick}})],1)],1),t("el-col",{attrs:{span:19}},[t("div",{staticClass:"p-15"},[t("headersearch",{attrs:{"search-model":e.searchModel,show:!0},on:{onSearch:e.onSearch}}),t("comp-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"compTable",attrs:{"table-model":e.tableModel,"form-model":e.formModel,"search-model":e.searchModel,isPage:!0},on:{addModal:e.addModal,delInfo:e.delInfo,changePage:e.changePage}})],1)])],1),t("el-dialog-limit",{attrs:{title:"关联",visible:e.dialogFormVisible,size:"medium",width:"65%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("div",[t("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:10}},[t("el-col",{staticStyle:{display:"flex",margin:"5px 0"},attrs:{span:2}},[t("span",[e._v("用户名")])]),t("el-col",{attrs:{span:6}},[t("el-input",{model:{value:e.authsearchModel.formModel.nickName,callback:function(t){e.$set(e.authsearchModel.formModel,"nickName",t)},expression:"authsearchModel.formModel.nickName"}})],1),t("el-col",{attrs:{span:6}},[t("el-button",{staticStyle:{"margin-right":"5px"},attrs:{type:""},on:{click:e.findUser}},[e._v("查询")]),t("el-button",{attrs:{type:""},on:{click:e.clenNickName}},[e._v("重置")])],1)],1),t("comp-table",{ref:"authTable",attrs:{"table-model":e.authtableModel,"form-model":e.authformModel,"search-model":e.authsearchModel},on:{addModal:e.addModal,changePage:e.changePageAuth}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitRoleUsers}},[e._v("确定")]),t("el-button",{attrs:{type:""},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)])],1)},n=[],l=a("c7eb"),o=a("1da1"),i=(a("4de4"),a("14d9"),a("d3b7"),a("159b"),a("743a")),s=a("ba47"),c=a("ec41"),u=a("ff51"),d={components:{headersearch:i["default"]},data:function(){return{dialogFormVisible:!1,checknode:"",from:{},checked:!1,sysData:[],roleData:[],defaultSysProps:{children:"children",label:"name"},defaultProps:{children:"children",label:"roleName"},tableModel:{tableData:[],rowData:[{prop:"name",label:"用户名"},{prop:"account",label:"工号"},{prop:"companyOrgName",label:"公司名称"},{prop:"orgName",label:"部门名称"}],operateData:[],pagination:{pageNo:1,pageSize:10,total:0}},formModel:{formData:{teamName:""},formLabelWidth:"80px",formFilds:[{label:"团队名称",prop:"teamName",type:"input",disabled:!1},{label:"团队名称",prop:"teamName",type:"input",disabled:!1}],btnData:[{type:"submit",style:"primary",label:"确定",handle:function(){}},{type:"cancle",label:"取消",style:"",handle:function(){}}],rules:{tenantName:[{required:!0,message:"请输入名称",trigger:"blur"}]}},searchModel:{show:!0,btnSpan:5,btnGroup:[{type:"relation",style:"primary",label:"关联用户",url:"",funName:"addModal",btnPermCode:"relation"},{type:"delete",style:"",label:"删除",url:"",btnPermCode:"delete"}],formModel:{account:""},searchFild:[{type:"input",label:"用户名称",prop:"account",span:8}]},authtableModel:{tableData:[],rowData:[{prop:"name",label:"用户名"},{prop:"account",label:"工号"},{prop:"companyOrgName",label:"公司名称"},{prop:"orgName",label:"部门名称"}],operateData:[],pagination:{pageNo:1,pageSize:10,total:0}},authformModel:{formData:{teamName:""},formLabelWidth:"80px",formFilds:[{label:"团队名称",prop:"teamName",type:"input",disabled:!1},{label:"团队名称",prop:"teamName",type:"input",disabled:!1}],btnData:[{type:"submit",style:"primary",label:"确定",handle:function(){}},{type:"cancle",label:"取消",style:"",handle:function(){}}],rules:{tenantName:[{required:!0,message:"请输入名称",trigger:"blur"}]}},authsearchModel:{show:!1,btnSpan:6,btnGroup:[],formModel:{},searchFild:[{type:"input",label:"用户名称",prop:"nickName",span:8}]},tableDataAuth:[{code:"0070070",name:"李某某",role:"总行技术管理岗",phone:"13000000001",address:"",status:"启用"},{code:"0070070",name:"张某某",role:"总行技术管理岗",phone:"13000000001",address:"",status:"启用"}],rowDataAuth:[{prop:"name",label:"用户名"},{prop:"account",label:"工号"},{prop:"companyOrgName",label:"公司名称"},{prop:"orgName",label:"部门名称"}],currentRole:"",currentSysRole:"",activeName:"system",loading:!1,loadingSystem:!1,loadingRole:!1}},mounted:function(){this.getSysRolesList()},methods:{getSysRolesList:function(){var e=this;this.loadingSystem=!0,Object(s["d"])().then((function(t){e.sysData=(null===t||void 0===t?void 0:t.data)||[]})).finally((function(){e.loadingSystem=!1}))},handleSysClick:function(e){this.currentSysRole=e.id,this.searchModel.formModel.account=null,this.tableModel.pagination.pageNo=1,this.getSysList()},onSearch:function(){this.currentChange(1)},changePage:function(e,t){e&&(this.tableModel.pagination.pageNo=e),t&&(this.tableModel.pagination.pageSize=t),this.getSysList()},getSysList:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){var a,r,n,o,i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e.currentSysRole,name:e.searchModel.formModel.account},e.loading=!0,t.next=4,Object(s["b"])(a);case 4:r=t.sent,n=Object(c["a"])(r,"data.data"),Object(u["a"])(n)?(o=e.tableModel.pagination.pageNo,i=e.tableModel.pagination.pageSize,e.tableModel.tableData=n.filter((function(e,t){return t<o*i&&t>=i*(o-1)})),e.tableModel.pagination.total=n.length):(e.tableModel.pagination.total=0,e.tableModel.tableData=[]),e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},renderSysContent:function(e,t){var a=t.node;t.data,t.store;return e("div",{style:{width:"80%"},attrs:{type:"flex",justify:"space-between"},on:{click:function(){}}},a.label)},addModal:function(){this.dialogFormVisible=!0,this.querrySysUsers()},findUser:function(){this.authtableModel.pagination.pageNo=1,this.querrySysUsers()},changePageAuth:function(e,t){e&&(this.authtableModel.pagination.pageNo=e),t&&(this.authtableModel.pagination.pageSize=t),this.querrySysUsers()},querrySysUsers:function(){var e=this,t={roleId:this.currentSysRole,name:this.authsearchModel.formModel.nickName};Object(s["c"])(t).then((function(t){var a=Object(c["a"])(t.data,"data");if(Object(u["a"])(a)){var r=e.authtableModel.pagination.pageNo,n=e.authtableModel.pagination.pageSize;e.authtableModel.tableData=a.filter((function(e,t){return t<r*n&&t>=n*(r-1)})),e.authtableModel.pagination.total=a.length}else e.authtableModel.pagination.total=0,e.authtableModel.tableData=[]}))},clenNickName:function(){this.authsearchModel.formModel.nickName="",this.findUser()},submitRoleUsers:function(){var e=this.$refs.authTable.$refs.commonTable.selection,t=e.length>0,a=[];e.forEach((function(e){a.push(e.id)})),t?(this.dialogFormVisible=!1,this.insertSysUser({roleId:this.currentSysRole,userIdList:a})):this.$message({message:"请选择一条数据",type:"warning"})},insertSysUser:function(e){var t=this;Object(s["e"])(e).then((function(e){200===e.code&&(t.getSysList(),t.$message({message:"关联成功",type:"success"}))}))},delInfo:function(e){var t=this;Object(s["a"])({ids:e}).then((function(e){200===e.code?(t.$refs.compTable.hideDialog(),t.getSysList(),t.$message.success("删除关联成功")):t.$message.error(e.msg)}))}}},p=d,m=(a("ae1d"),a("2877")),f=Object(m["a"])(p,r,n,!1,null,"421b638c",null);t["default"]=f.exports},"21ef":function(e,t,a){},"229a":function(e,t,a){},2762:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("button-list",{attrs:{data:e.data},scopedSlots:e._u([{key:"upload",fn:function(){return[t("span",[e._v("插槽")])]},proxy:!0}])}),t("h1",[e._v(e._s(e.msg))])],1)},n=[],l=(a("14d9"),a("e9c4"),{name:"ComponentName",components:{},mixins:[],props:{},data:function(){var e=this;return{msg:"",data:[{type:"add",label:"新增",click:this.clickAdd},{type:"edit",label:"编辑",click:this.clickEdit},{type:"asas",label:"配置项",icon:"edit",click:this.clickEdit},{type:"yytas",label:"跳转",icon:"el-icon-platform-eleme位",click:function(){return e.$router.push("/")}},{type:"slot",slot:"upload"}]}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{clickEdit:function(e){this.msg="点击-item:".concat(JSON.stringify(e))},clickAdd:function(e){this.msg="点击-item:".concat(JSON.stringify(e))}}}),o=l,i=a("2877"),s=Object(i["a"])(o,r,n,!1,null,"2c827544",null);t["default"]=s.exports},"354a":function(e,t,a){},3795:function(e,t,a){},"37b3":function(e,t,a){},"3de6":function(e,t,a){"use strict";a.r(t),a.d(t,"ruleOptions",(function(){return i}));a("a4d3"),a("e01a");var r=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"ruleForm",attrs:{model:e.groupRuleForm,"label-position":"right",rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"规则类型"}},[t("el-radio-group",{on:{change:e.changeType},model:{value:e.groupRuleForm.type,callback:function(t){e.$set(e.groupRuleForm,"type",t)},expression:"groupRuleForm.type"}},[t("el-radio",{attrs:{label:"0"}},[e._v("非自定义规则 ")]),t("el-radio",{attrs:{label:"1"}},[e._v("自定义规则")])],1)],1),"0"===e.groupRuleForm.type?t("el-form-item",{attrs:{prop:"customNameNon",label:"规则名称"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择规则名称",clearable:"",filterable:""},on:{change:e.ruleChange},model:{value:e.groupRuleForm.customNameNon,callback:function(t){e.$set(e.groupRuleForm,"customNameNon",t)},expression:"groupRuleForm.customNameNon"}},e._l(e.ruleOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1):"1"===e.groupRuleForm.type?t("el-form-item",{attrs:{prop:"customName",label:"自定义规则名称"}},[t("el-input",{attrs:{placeholder:"请输入自定义规则名称"},model:{value:e.groupRuleForm.customName,callback:function(t){e.$set(e.groupRuleForm,"customName",t)},expression:"groupRuleForm.customName"}})],1):e._e(),"0"===e.groupRuleForm.type?t("el-form-item",{attrs:{prop:"rule",label:"规则值"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.groupRuleForm.rule,callback:function(t){e.$set(e.groupRuleForm,"rule",t)},expression:"groupRuleForm.rule"}})],1):e._e(),"1"===e.groupRuleForm.type?t("el-form-item",{attrs:{prop:"ruleSql",label:"自定义sql"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.groupRuleForm.ruleSql,callback:function(t){e.$set(e.groupRuleForm,"ruleSql",t)},expression:"groupRuleForm.ruleSql"}})],1):e._e(),t("el-form-item",{attrs:{prop:"path",label:"查询路径"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.groupRuleForm.path,callback:function(t){e.$set(e.groupRuleForm,"path",t)},expression:"groupRuleForm.path"}}),t("span",{staticClass:"path-info"},[e._v("请求方式+请求路径,例如:POST/esbBaseAdaptationFlow/selectAll")])],1),t("el-form-item",{attrs:{prop:"desc",label:"描述"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.groupRuleForm.description,callback:function(t){e.$set(e.groupRuleForm,"description",t)},expression:"groupRuleForm.description"}})],1)],1)],1)},n=[],l=(a("7db0"),a("d3b7"),a("ca17")),o=a.n(l),i=(a("542c"),[{label:"查询所有数据",value:"1",desc:"1 = 1 "},{label:"查询本部门的数据",value:"2",desc:"create_user_id IN (SELECT og.user_id  FROM base_sys_user_org og ,base_sys_user_org org WHERE    org.user_id = ${userId}   AND og.org_id=org.org_id) "},{label:"只查询自己的数据",value:"3",desc:"create_user_id = ${userId} "}]),s={components:{Treeselect:o.a},props:["groupRuleForm"],data:function(){return{ruleOptions:i,options:[{id:"10001",label:"通用组件",children:[{id:"10002",label:"协议类型"},{id:"10003",label:"报文解析器"}]}],rules:{customNameNon:[{required:!0,message:"请选择规则名称",trigger:"change"}],customName:[{required:!0,message:"请输入自定义规则名称",trigger:"blur"}],rule:[{required:!0,message:"请输入规则值",trigger:"blur"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}],ruleSql:[{required:!0,message:"请输入sql",trigger:"blur"}]}}},methods:{getSaveForm:function(){return this.groupRuleForm},ruleChange:function(e){var t=this.ruleOptions.find((function(t){return t.value===e}));this.$emit("changerRule",t.desc)},changeType:function(e){this.$emit("changeRuleType",e),this.$refs.ruleForm.clearValidate()}}},c=s,u=(a("121e"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"3f1cb9b4",null);t["default"]=d.exports},4582:function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("99af"),a("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"ruleForm",attrs:{model:e.groupForm,"label-position":"right",rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{prop:"name",label:"按钮名称"}},[t("el-input",{staticClass:"btns-form-item",attrs:{placeholder:"请输入"},model:{value:e.groupForm.name,callback:function(t){e.$set(e.groupForm,"name",t)},expression:"groupForm.name"}})],1),t("el-form-item",{attrs:{prop:"code",label:"权限类型编码"}},[t("el-select",{staticClass:"btns-form-item",attrs:{placeholder:"请选择权限类型编码",clearable:"",filterable:""},model:{value:e.groupForm.code,callback:function(t){e.$set(e.groupForm,"code",t)},expression:"groupForm.code"}},e._l(e.permButtonTypes,(function(a,r){return t("el-option",{key:r,attrs:{value:r,label:"".concat(r," (").concat(a,")")}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(r))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(a))])])})),1)],1),t("el-form-item",{attrs:{prop:"path",label:"请求路径"}},[t("el-input",{staticClass:"btns-form-item",attrs:{placeholder:"请输入"},model:{value:e.groupForm.path,callback:function(t){e.$set(e.groupForm,"path",t)},expression:"groupForm.path"}})],1),t("el-form-item",{attrs:{prop:"type",label:"请求方式"}},[t("el-select",{staticClass:"btns-form-item",attrs:{placeholder:"请输入",clearable:"",filterable:""},model:{value:e.groupForm.type,callback:function(t){e.$set(e.groupForm,"type",t)},expression:"groupForm.type"}},e._l(e.requestTypeList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{prop:"description",label:"按钮描述"}},[t("el-input",{staticClass:"btns-form-item",attrs:{type:"textarea",placeholder:"请输入"},model:{value:e.groupForm.description,callback:function(t){e.$set(e.groupForm,"description",t)},expression:"groupForm.description"}})],1)],1)],1)},n=[],l=a("1214"),o=a("ca17"),i=a.n(o),s=(a("542c"),{components:{Treeselect:i.a},props:["groupForm"],data:function(){return{permButtonTypes:l["a"],requestTypeList:[{label:"POST",value:"POST"},{label:"DELETE",value:"DELETE"},{label:"PUT",value:"PUT"},{label:"GET",value:"GET"}],options:[{id:"10001",label:"通用组件",children:[{id:"10002",label:"协议类型"},{id:"10003",label:"报文解析器"}]}],rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请选择权限类型",trigger:"change"}],path:[{required:!0,message:"请输入请求路径",trigger:"blur"}]}}},methods:{getSaveForm:function(){return this.groupForm}}}),c=s,u=(a("758d"),a("2877")),d=Object(u["a"])(c,r,n,!1,null,"49535c07",null);t["default"]=d.exports},"4a75":function(e,t,a){"use strict";a("37b3")},"5f20":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("router-view")},n=[],l={name:"TwoRouter",computed:{}},o=l,i=(a("d8e2"),a("2877")),s=Object(i["a"])(o,r,n,!1,null,"54786466",null);t["default"]=s.exports},"63fe":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"culster-container"},[t("search-form",{attrs:{searchConfig:e.searchModel},on:{onSearch:e.onSearch}}),t("tableView",{ref:"tableView",attrs:{loading:e.tableConfig.loading,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,total:e.tableConfig.pagination.total,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage}})],1)},n=[],l=(a("d3b7"),a("743a")),o=a("b5b4"),i={name:"LogApproval",components:{headersearch:l["default"]},data:function(){return{tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"operatorUserName",label:"用户"},{prop:"desc",label:"功能"},{prop:"buttonName",label:"按钮"},{prop:"operateResult",label:"操作结果",widht:80},{prop:"operateIp",label:"访问IP"},{prop:"createDate",label:"操作时间",width:160,align:"left"}]},searchModel:{searchData:{operatorUserName:"",methonName:"",desc:"",operateResult:"",operateTime:[]},searchItem:[{type:"input",label:"用户",prop:"operatorUserName"},{type:"input",label:"功能",prop:"desc"},{type:"input",label:"方法",prop:"methonName"},{type:"input",label:"操作结果",prop:"operateResult"},{type:"time",label:"操作时间",prop:"operateTime",valueFormat:"yyyy-MM-dd HH:mm:ss",width:"400px"}],rules:{}},addVisible:!1,fileData:{name:"",virtulname:"",content:[{workload:"",versions:""}]}}},mounted:function(){this.getList()},methods:{getList:function(){var e=this,t=this.searchModel.searchData,a=t.operatorUserName,r=t.operateTime,n=t.desc,l=t.methonName,i=t.operateResult,s={requestObject:{operatorUserName:a,desc:n,methonName:l,operateResult:i,operateTime:Array.isArray(r)?r:[]},pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize};this.tableConfig.loading=!0,Object(o["a"])(s).then((function(t){200===t.code&&(e.tableConfig.tableData=t.data.data,e.tableConfig.pagination.total=t.data.totalCount)})).finally((function(){e.tableConfig.loading=!1}))},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},onSearch:function(){this.tableConfig.pagination.currentPage=1,this.getList()}}},s=i,c=a("2877"),u=Object(c["a"])(s,r,n,!1,null,"06169f27",null);t["default"]=u.exports},"758d":function(e,t,a){"use strict";a("229a")},"76cb":function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("b0c0"),a("498a");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"menu-management"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:8}},[t("el-card",{attrs:{shadow:"never"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("菜单")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.addModal}},[e._v("新增")])],1),t("el-form",{ref:"appForm",attrs:{model:e.appForm,"label-position":"right","label-width":"75px"}},[t("el-form-item",{attrs:{label:"所属应用",prop:"text"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"value-key":"id"},on:{change:e.changeApp},model:{value:e.appForm.currentApp,callback:function(t){e.$set(e.appForm,"currentApp",t)},expression:"appForm.currentApp"}},e._l(e.appOptions,(function(e){return t("el-option",{key:e.id,attrs:{value:e,label:e.name}})})),1)],1)],1),t("el-input",{staticStyle:{"margin-bottom":"20px"},attrs:{clearable:"",placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText="string"===typeof t?t.trim():t},expression:"filterText"}}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTree,expression:"loadingTree"}]},[t("el-tree",{ref:"tree",staticClass:"menu-tree-class",attrs:{draggable:"","node-key":"menuId","highlight-current":"","current-node-key":e.currentMenu.menuId,"filter-node-method":e.filterNode,"expand-on-click-node":!1,data:e.treeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderContent},on:{"node-click":e.handleNodeClick,"node-drop":e.handleDrop}})],1)],1)],1),t("el-col",{staticClass:"rightTab-content",attrs:{span:16}},[t("span",{staticClass:"rightTab-title"},[e._v(e._s(e.currentSelectMenuTitle))]),t("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.rightHandleClick},model:{value:e.rightActiveName,callback:function(t){e.rightActiveName=t},expression:"rightActiveName"}},[t("el-tab-pane",{attrs:{label:"按钮",name:"buttons"}},[t("comp-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingButtons,expression:"loadingButtons"}],ref:"btnTable",staticClass:"p-15",attrs:{isPage:!1,"table-model":e.tableModel,"search-model":e.searchModel},on:{addBtnFun:e.addBtnFun,editBtnFun:e.editBtnFun,delInfo:e.delBtn}})],1),t("el-tab-pane",{attrs:{label:"规则",name:"rules"}},[t("comp-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingRules,expression:"loadingRules"}],ref:"ruleTable",staticClass:"p-15",attrs:{isPage:!1,"table-model":e.tableRuleModel,"search-model":e.searchRuleModel},on:{addRuleFun:e.addRuleFun,editRuleFun:e.editRuleFun,delInfo:e.delRule}})],1)],1)],1)],1),e.addMenuVisible?t("el-dialog-limit",{attrs:{title:"菜单",visible:e.addMenuVisible,width:"60%"},on:{close:e.menuCancel}},[t("el-form",{ref:"ruleForm",attrs:{model:e.menuForm,"label-position":"right",rules:e.formModel.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{prop:"teamName",label:"应用"}},[t("span",[e._v(e._s(e.appForm.appName))])]),t("el-form-item",{attrs:{prop:"teamName",label:"上级菜单"}},[t("treeselect",{attrs:{multiple:!1,options:e.options,normalizer:e.normalizer,placeholder:"请选择上级菜单"},model:{value:e.menuForm.parentId,callback:function(t){e.$set(e.menuForm,"parentId",t)},expression:"menuForm.parentId"}})],1),t("el-form-item",{attrs:{label:"菜单名称",prop:"text"}},[t("el-input",{attrs:{placeholder:"请输入菜单名称",maxlength:"12","show-word-limit":""},model:{value:e.menuForm.text,callback:function(t){e.$set(e.menuForm,"text","string"===typeof t?t.trim():t)},expression:"menuForm.text"}})],1),t("el-form-item",{attrs:{prop:"routePath",label:"前端路由"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入前端路由"},model:{value:e.menuForm.routePath,callback:function(t){e.$set(e.menuForm,"routePath","string"===typeof t?t.trim():t)},expression:"menuForm.routePath"}})],1),t("el-form-item",{attrs:{prop:"teamName",label:"链接"}},[t("el-input",{attrs:{placeholder:"请输入链接"},model:{value:e.menuForm.path,callback:function(t){e.$set(e.menuForm,"path","string"===typeof t?t.trim():t)},expression:"menuForm.path"}})],1),t("el-form-item",{attrs:{prop:"icon",label:"菜单图标"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:""},model:{value:e.menuForm.icon,callback:function(t){e.$set(e.menuForm,"icon",t)},expression:"menuForm.icon"}},e._l(e.svgIconlist,(function(a,r){return t("el-option",{key:r,attrs:{value:a,lable:a}},[t("span",{staticStyle:{float:"left"}},[t("svg-icon",{attrs:{"icon-class":a}})],1),t("span",{staticStyle:{float:"right"}},[e._v(e._s(a))])])})),1)],1),t("el-form-item",{attrs:{prop:"description",label:"描述"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入描述",maxlength:"50","show-word-limit":""},model:{value:e.menuForm.description,callback:function(t){e.$set(e.menuForm,"description","string"===typeof t?t.trim():t)},expression:"menuForm.description"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.addMenuFun}},[e._v("确定")]),t("el-button",{attrs:{type:""},on:{click:e.menuCancel}},[e._v("取消")])],1)],1):e._e(),t("el-dialog-limit",{attrs:{title:"addBtn"===e.componentType?"按钮":"规则",visible:e.btnRuleVisible,width:"40%"},on:{"update:visible":function(t){e.btnRuleVisible=t}}},["addBtn"===e.componentType?t("modal-buttons",{ref:"buttonsRef",attrs:{"group-form":e.groupForm}}):"addRule"===e.componentType?t("modal-rules",{ref:"rulesRef",attrs:{"group-rule-form":e.groupRuleForm},on:{changerRule:e.changerRule,changeRuleType:e.changeRuleType}}):e._e(),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.loadingConfirm},on:{click:e.btnsAndRulesConfirm}},[e._v("确定")]),t("el-button",{attrs:{type:""},on:{click:e.btnsAndRulesCancel}},[e._v("取消")])],1)],1)],1)},n=[],l=a("15fd"),o=a("5530"),i=a("c7eb"),s=a("1da1"),c=(a("4de4"),a("7db0"),a("d81d"),a("4e82"),a("b64b"),a("d3b7"),a("ca17")),u=a.n(c),d=(a("542c"),a("4582")),p=a("3de6"),m=a("985d"),f=a("ff51"),b=a("1147"),h=a("bc59"),g=a("5c8a"),v=a("153c"),y=["type","customName","customNameNon","rule","ruleSql"],w={name:"Menumanagement",components:{Treeselect:u.a,"modal-buttons":d["default"],"modal-rules":p["default"]},data:function(){this.$createElement;return{appOptions:[],appForm:{currentApp:null,appId:"",appName:""},loadingTree:!1,svgIconlist:m["b"],addMenuVisible:!1,menuForm:{id:"",menuId:"",parentId:"",text:"",path:"",routePath:"",description:"",icon:""},rightActiveName:"buttons",loadingRules:!1,groupRuleForm:{id:"",menuId:"",type:"0",customNameNon:"",customName:"",rule:"",ruleSql:"",path:"",description:""},loadingButtons:!1,loadingConfirm:!1,groupForm:{id:"",menuId:"",name:"",code:"",path:"",type:"",description:""},componentType:"addBtn",btnRuleVisible:!1,filterText:"",title:"新增",treeData:[],dialogFormVisible:!1,searchTableData:[{userName:"admin",email:"yo@163.com",ldap:"s",manage:"admin"}],options:[],normalizer:function(e){return e.id=e.menuId,e.label=e.text,Object(f["a"])(e.children)&&e.children.length>0||delete e.children,e},tableModel:{tableData:[],rowData:[{prop:"name",label:"按钮名称  ",width:"200"},{prop:"code",label:"权限类型编码",width:"200"},{prop:"path",label:"路径"}],operateData:[],defaultExpand:!1},formModel:{formData:{teamName:""},formLabelWidth:"80px",formFilds:[{label:"菜单名称",prop:"teamName",type:"input",disabled:!1},{label:"菜单编码",prop:"num",type:"input",disabled:!1}],btnData:[{type:"submit",style:"primary",label:"确定",handle:function(){}},{type:"cancle",label:"取消",style:"",handle:function(){}}],rules:{text:[{required:!0,message:"请输入名称",trigger:"blur"}],routePath:[{required:!0,message:"请输入路由",trigger:"blur"}]}},searchModel:{show:!1,btnGroup:[{type:"addBtnFun",style:"primary",label:"新增按钮",funName:"addBtnFun",btnPermCode:"add"},{type:"editBtnFun",style:"primary",label:"编辑",funName:"editBtnFun",btnPermCode:"edit"},{type:"delete",label:"删除",btnPermCode:"delete"}],formModel:{},searchFild:[]},tableRuleModel:{tableData:[],rowData:[{prop:"name",label:"规则名称",width:"200",render:function(e,t){var a=t.row,r=a.name||"";if("0"===a.type){var n=p["ruleOptions"].find((function(e){return e.value===a.name}));n&&(r=e("span",[n.label]))}return r}},{prop:"path",label:"路径",width:"200"},{prop:"rule",label:"规则"}],operateData:[],defaultExpand:!1},formRuleModel:{formData:{teamName:""},formLabelWidth:"80px",formFilds:[{label:"菜单名称",prop:"teamName",type:"input",disabled:!1},{label:"菜单编码",prop:"num",type:"input",disabled:!1}],btnData:[{type:"submit",style:"primary",label:"确定",handle:function(){}},{type:"cancle",label:"取消",style:"",handle:function(){}}]},searchRuleModel:{show:!1,btnGroup:[{type:"addRuleFun",style:"primary",label:"新增规则",url:"",funName:"addRuleFun",btnPermCode:"add"},{type:"editRuleFun",style:"primary",label:"编辑",url:"",funName:"editRuleFun",btnPermCode:"edit"},{type:"delete",label:"删除",btnPermCode:"delete"}],formModel:{},searchFild:[]},defaultProps:{children:"children",label:"text"},checkMenu:"",currentMenu:"",addMenuType:"",addBtnType:""}},computed:{currentSelectMenuTitle:function(){return Object(b["a"])(this.currentMenu)?this.currentMenu.text:""}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},created:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getSelectAll();case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){this.getListButtons(""),this.getListRules("")},methods:{getSelectAll:function(){var e=this;Object(v["a"])().then((function(t){if(Object(f["a"])(null===t||void 0===t?void 0:t.data)){var a=t.data.sort((function(e,t){return e.sort-t.sort}));e.appOptions=a,e.appOptions[0].id&&(e.appForm={appId:e.appOptions[0].id,appName:e.appOptions[0].name},e.appForm.currentApp=e.appOptions[0],e.getTree())}})).catch((function(e){}))},changeApp:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];this.appForm.appId=e.id,this.appForm.appName=e.name,this.getTree()},handleDrop:function(e,t,a,r){var n=this,l={position:a,targetId:t.data.menuId,id:e.data.menuId};Object(v["o"])(l).then((function(e){200===e.code&&(n.$message({type:"success",message:"成功"}),n.getTree())}))},delBtn:function(e){var t=this;Object(v["d"])({idList:e}).then((function(e){200===e.code&&(t.$message({type:"success",message:"删除成功"}),t.getListButtons(t.currentMenu.menuId))}))},delRule:function(e){var t=this;Object(v["b"])({idList:e}).then((function(e){200===e.code&&(t.$message({type:"success",message:"删除成功"}),t.getListRules(t.currentMenu.menuId))}))},addMenuFun:function(){var e=this;this.$refs["ruleForm"].validate((function(t){t&&("add"===e.addMenuType?e.submitMenus():"edit"===e.addMenuType&&e.editMenus())}))},submitMenus:function(){var e=this,t={menuId:this.menuForm.menuId,parentId:this.menuForm.parentId,text:this.menuForm.text,path:this.menuForm.path,routePath:this.menuForm.routePath,description:this.menuForm.description,icon:this.menuForm.icon,appId:this.appForm.appId};Object(v["m"])(t).then((function(t){200===t.code&&(e.$message({type:"success",message:"新增成功"}),e.addMenuVisible=!1,e.getTree())}))},editMenus:function(){var e=this,t={id:this.menuForm.id,menuId:this.menuForm.menuId,parentId:this.menuForm.parentId,text:this.menuForm.text,path:this.menuForm.path,routePath:this.menuForm.routePath,description:this.menuForm.description,icon:this.menuForm.icon};Object(v["f"])(t).then((function(t){200===t.code&&(e.$message({type:"success",message:"编辑成功"}),e.addMenuVisible=!1,e.getTree())}))},btnsAndRulesConfirm:function(){var e=this;if("addBtn"===this.componentType){var t=this.$refs.buttonsRef.$refs.ruleForm;t.validate((function(t){if(t){var a={add:v["n"],edit:v["g"]},r=a[e.addBtnType],n=Object(o["a"])({},e.groupForm);r&&("add"===e.addBtnType&&delete n.id,e.loadingConfirm=!0,r(n).then((function(t){e.btnRuleVisible=!1,e.getListButtons(e.currentMenu.menuId)})).finally((function(){e.loadingConfirm=!1})))}}))}else if("addRule"===this.componentType){var a=this.$refs.rulesRef.$refs.ruleForm;a.validate((function(t){if(t){var a={add:v["l"],edit:v["e"]},r=a[e.addBtnType];if(r){var n=e.groupRuleForm,i=n.type,s=n.customName,c=n.customNameNon,u=n.rule,d=n.ruleSql,p=Object(l["a"])(n,y),m=Object(o["a"])(Object(o["a"])({},p),{},{type:i,name:"0"===i?c:s,rule:"0"===i?u:d});"add"===e.addBtnType&&delete m.id,e.loadingConfirm=!0,r(m).then((function(t){e.btnRuleVisible=!1,e.getListRules(e.currentMenu.menuId)})).finally((function(){e.loadingConfirm=!1}))}}}))}},btnsAndRulesCancel:function(){this.btnRuleVisible=!1},filterNode:function(e,t){return!e||-1!==t.text.indexOf(e)},handleNodeClick:function(e,t){this.currentMenu=e,this.rightHandleClick({name:this.rightActiveName})},renderContent:function(e,t){var a=this,r=t.node,n=t.data,l=(t.store,Object(f["a"])(n.children)&&n.children.length>0),o=e("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(e){return a.delMenu(n,e)}}}),i=e("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(e){return a.editMenu(n,e)}}});return e("ul",{class:"menu-tree-ul"},[e("li",[r.label]),e("li",[i,!l&&o])])},addBtnFun:function(){var e,t=this;this.groupForm={id:"",menuId:this.currentMenu.menuId,name:"",code:"",path:"",type:"",description:""};var a=Object(f["a"])(null===(e=this.currentMenu)||void 0===e?void 0:e.children)&&this.currentMenu.children.length>0;this.currentMenu.menuId&&!a?(this.btnRuleVisible=!0,this.componentType="addBtn",this.addBtnType="add",this.$nextTick((function(){t.$refs.buttonsRef.$refs.ruleForm.clearValidate()}))):this.$message({message:"请选中一条叶子菜单",type:"warning"})},editBtnFun:function(){var e=this;this.addBtnType="edit";var t=this.$refs.btnTable.$refs.commonTable.selection;if(1==t.length){var a=t[0];this.groupForm.menuId=a.menuId,this.groupForm.name=a.name,this.groupForm.code=a.code,this.groupForm.path=a.path,this.groupForm.type=a.type,this.groupForm.id=a.id,this.groupForm.description=a.description,this.checkMenu=!0,this.btnRuleVisible=!0,this.componentType="addBtn",this.$nextTick((function(){e.$refs.buttonsRef.$refs.ruleForm.clearValidate()}))}else this.$message({message:"请选中一条菜单",type:"warning"})},changerRule:function(e){this.groupRuleForm.rule=e},changeRuleType:function(e){},addRuleFun:function(){var e,t=this;this.groupRuleForm={menuId:this.currentMenu.menuId,type:"0",customNameNon:"",customName:"",rule:"",ruleSql:"",path:"",description:""};var a=Object(f["a"])(null===(e=this.currentMenu)||void 0===e?void 0:e.children)&&this.currentMenu.children.length>0;this.currentMenu.menuId&&!a?(this.componentType="addRule",this.addBtnType="add",this.btnRuleVisible=!0,this.$nextTick((function(){t.$refs.rulesRef&&t.$refs.rulesRef.$refs.ruleForm.clearValidate()}))):this.$message({message:"请选中一条叶子菜单",type:"warning"})},editRuleFun:function(){var e=this;this.addBtnType="edit",this.componentType="addRule";var t=this.$refs.ruleTable.$refs.commonTable.selection;if(1===t.length){var a=t[0];this.groupRuleForm={id:a.id,menuId:a.menuId,type:a.type,customNameNon:"0"===a.type?a.name:"",customName:"1"===a.type?a.name:"",rule:"0"===a.type?a.rule:"",ruleSql:"1"===a.type?a.rule:"",path:a.path,description:a.description},this.btnRuleVisible=!0}else this.$message({message:"请选中一条菜单",type:"warning"});this.$nextTick((function(){e.$refs.rulesRef&&e.$refs.rulesRef.$refs.ruleForm.clearValidate()}))},addModal:function(){var e=this;this.addMenuVisible=!0,this.addMenuType="add",this.$nextTick((function(){e.$refs.ruleForm.resetFields(),Object.keys(e.menuForm).map((function(t){return e.menuForm[t]=""})),e.menuForm.parentId=e.currentMenu.menuId}))},delMenu:function(e,t){var a=this;t.stopPropagation(),this.$confirm("确定要删除【".concat(e.text,"】吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(v["c"])(e.menuId).then((function(e){200===e.code&&(a.$message({type:"success",message:"成功"}),a.getTree())}))})).catch((function(){}))},menuCancel:function(){var e=this;Object.keys(this.menuForm).map((function(t){return e.menuForm[t]=""})),this.addMenuVisible=!1},editMenu:function(e,t){var a=this;return Object(s["a"])(Object(i["a"])().mark((function r(){return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.addMenuType="edit",t.stopPropagation(),Object.keys(a.menuForm).map((function(t){return a.menuForm[t]=e[t]})),r.next=5,a.getMenuDetail(e.id);case 5:a.addMenuVisible=!0;case 6:case"end":return r.stop()}}),r)})))()},getMenuDetail:function(e){var t=this;Object(v["i"])(e).then((function(e){200===e.code&&(t.menuForm.id=e.data.id,t.menuForm.menuId=e.data.menuId,t.menuForm.icon=e.data.icon,t.menuForm.parentId=e.data.parentId,t.menuForm.text=e.data.text,t.menuForm.path=e.data.path,t.menuForm.routePath=e.data.routePath,t.menuForm.description=e.data.description)}))},getTree:function(){var e=this;this.loadingTree=!0,Object(v["j"])({appId:this.appForm.appId}).then((function(t){200===t.code&&Object(h["a"])(t,"data")&&Object(f["a"])(t.data)?(e.treeData=Object(g["a"])(t.data),e.options=t.data):(e.treeData=[],e.options=[],e.$message({type:"error",message:t.message}))})).finally((function(){e.loadingTree=!1}))},rightHandleClick:function(e){Object(b["a"])(this.currentMenu)&&this.currentMenu.menuId&&("buttons"===e.name?this.getListButtons(this.currentMenu.menuId):"rules"===e.name&&this.getListRules(this.currentMenu.menuId))},getListButtons:function(e){var t=this;e?(this.loadingButtons=!0,Object(v["k"])({id:e}).then((function(e){t.tableModel.tableData=e.data})).finally((function(){t.loadingButtons=!1}))):this.tableModel.tableData=[]},getListRules:function(e){var t=this;e?(this.loadingRules=!0,Object(v["h"])({id:e}).then((function(e){t.tableRuleModel.tableData=e.data})).finally((function(){t.loadingRules=!1}))):this.tableRuleModel.tableData=[]}}},x=w,O=(a("a0f8"),a("2877")),k=Object(O["a"])(x,r,n,!1,null,"31ec2ed2",null);t["default"]=k.exports},"848b":function(e,t,a){},"84a0":function(e,t,a){},"9b88":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("498a");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"culster-container"},[t("headersearch",{attrs:{"search-model":e.searchModel},on:{onSearch:e.onSearch}}),e._l(e.searchModel.btnGroup,(function(a,r){return t("el-button",{directives:[{name:"perm-code",rawName:"v-perm-code",value:a.btnPermCode,expression:"btn.btnPermCode"}],key:r,staticStyle:{"margin-bottom":"20px"},attrs:{type:void 0===a.btnType?"primary":a.btnType},on:{click:function(t){return e.addsetup(a)}}},[e._v(e._s(a.label))])})),t("dragTreeTable",{attrs:{data:e.treeData,"on-drag":e.onTreeDataChange,fixed:""}}),t("el-dialog-limit",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"ruleForm",attrs:{model:e.groupForm,rules:e.formModel.rules,"label-position":"right","label-width":"120px"}},[t("el-form-item",{attrs:{prop:"teamName",label:"上级机构"}},[t("treeselect",{staticClass:"form-item",attrs:{multiple:!1,options:e.treeOptions,normalizer:e.normalizer,placeholder:"请选择上级机构"},model:{value:e.groupForm.parentId,callback:function(t){e.$set(e.groupForm,"parentId",t)},expression:"groupForm.parentId"}})],1),t("el-form-item",{attrs:{prop:"name",label:"机构名称"}},[t("el-input",{staticClass:"form-item",attrs:{placeholder:"请输入机构名称"},model:{value:e.groupForm.name,callback:function(t){e.$set(e.groupForm,"name","string"===typeof t?t.trim():t)},expression:"groupForm.name"}})],1),t("el-form-item",{attrs:{prop:"simpleName",label:"机构简称"}},[t("el-input",{attrs:{placeholder:"请输入机构简称"},model:{value:e.groupForm.simpleName,callback:function(t){e.$set(e.groupForm,"simpleName","string"===typeof t?t.trim():t)},expression:"groupForm.simpleName"}})],1),t("el-form-item",{attrs:{prop:"orgType",label:"机构类型"}},[t("el-select",{staticClass:"form-item",attrs:{clearable:"",filterable:"",placeholder:"请选择机构类型"},model:{value:e.groupForm.orgType,callback:function(t){e.$set(e.groupForm,"orgType",t)},expression:"groupForm.orgType"}},e._l(e.getOrganizationType,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{prop:"teamName",label:"描述"}},[t("el-input",{staticClass:"form-item",attrs:{type:"desc",placeholder:"请输入描述"},model:{value:e.groupForm.orgDesc,callback:function(t){e.$set(e.groupForm,"orgDesc","string"===typeof t?t.trim():t)},expression:"groupForm.orgDesc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addClick()}}},[e._v("确定")]),t("el-button",{attrs:{type:""},on:{click:function(t){return e.cancelClick()}}},[e._v("取消")])],1)],1)],2)},n=[],l=a("c7eb"),o=a("1da1"),i=a("5530"),s=(a("d81d"),a("14d9"),a("b64b"),a("d3b7"),a("159b"),a("ca17")),c=a.n(s),u=(a("542c"),a("a5d4")),d=a("743a"),p=a("518b"),m=a.n(p),f=a("2f62"),b=a("ff51"),h=a("5c8a"),g=Object(f["a"])("common"),v=g.mapGetters,y=function e(t,a){var r=[];return a.forEach((function(a){if(a.name.indexOf(t)>-1)r.push(a);else if(a.children&&a.children.length>0){var n=e(t,a.children),l=Object(i["a"])(Object(i["a"])({},a),{},{children:n});n&&n.length>0&&r.push(l)}})),r},w={name:"organizationManagement",components:{Treeselect:c.a,headersearch:d["default"],dragTreeTable:m.a},data:function(){var e=this;return{selectionRows:[],treeData:{lists:[],custom_field:{id:"id",order:"orgSort",lists:"children",parent_id:"parentId"},columns:[{type:"checkbox",width:100,align:"center",isContainChildren:!1,onChange:function(t){e.selectionRows=t}},{type:"selection",title:"名称",field:"name",width:300,align:"left",titleAlign:"left"},{type:"",title:"简称",field:"simpleName",width:200,align:"left",titleAlign:"left"},{type:"",title:"机构类型",field:"orgType",width:200,align:"left",titleAlign:"left",formatter:function(e){var t="",a=e.orgType;return 0==a?t="公司":1==a?t="部门":2==a?t="项目":3==a&&(t="其它"),"<a>"+t+"</a>"}},{type:"",title:"描述",field:"orgDesc",width:200,align:"left",titleAlign:"left"}]},title:"新增机构",dialogType:"add",dialogFormVisible:!1,groupForm:{parentId:null,name:"",simpleName:"",orgType:"",orgLevel:1,orgDesc:""},normalizer:function(e){return e.id=e.id,e.label=e.name,Object(b["a"])(e.children)&&e.children.length>0||delete e.children,e},formModel:{formData:{parentId:"",name:"",simpleName:"",orgType:"",orgLevel:1,orgSort:1,orgDesc:""},formLabelWidth:"80px",formFilds:[{label:"上级机构",prop:"parentId",type:"selectTree",disabled:!1,multiple:!1,options:[],normalizer:[]},{label:"机构名称",prop:"name",type:"input",disabled:!1},{label:"机构简称",prop:"simpleName",type:"input",disabled:!1},{label:"机构类型",prop:"orgType",type:"select",disabled:!1,options:[{label:"公司",value:1},{label:"部门",value:2}]},{label:"机构类别",prop:"orgLevel",type:"select",disabled:!1,options:[{label:"一级",value:1},{label:"二级",value:2},{label:"三级",value:3},{label:"四级",value:4}]},{label:"机构排序",prop:"orgSort",type:"select",disabled:!1,options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}]},{label:"描述",prop:"orgDesc",type:"textarea",disabled:!1}],btnData:[{type:"submit",style:"primary",label:"确定",handle:function(){}},{type:"cancle",label:"取消",style:"",handle:function(){}}],rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],simpleName:[{required:!0,message:"请输入简称",trigger:"blur"}],orgType:[{required:!0,message:"请选择机构类型",trigger:"change"}]}},searchModel:{btnGroup:[{type:"add",style:"primary",label:"新增机构",url:"",funName:"addModal",btnPermCode:"add"},{type:"edit",style:"primary",label:"编辑",url:"",funName:"editModal",btnPermCode:"edit"},{type:"delete",label:"删除",btnPermCode:"delete"}],formModel:{name:""},searchFild:[{type:"input",label:"机构名称",prop:"name",span:6}]},treeOptions:[]}},created:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getList();case 2:case"end":return t.stop()}}),t)})))()},computed:Object(i["a"])(Object(i["a"])({},v(["getDictOptionsByKey"])),{},{getOrganizationType:function(){return this.getDictOptionsByKey("organization_type")}}),methods:{onTreeDataChange:function(e,t,a,r){var n=this;this.treeData.lists=e;var l={position:r,targetId:a.id,id:t.id};Object(u["e"])(l).then((function(e){200===e.code&&(n.$message({type:"info",message:e.message}),n.getList())}))},addsetup:function(e){var t=this,a=this.selectionRows;if("add"===e.type)this.addModal();else if("edit"===e.type)this.editModal(a);else if("delete"===e.type){var r=[];if(a.forEach((function(e){r.push(e.id)})),1!==a.length)return this.$message({message:"请选择一条数据",type:"warning"}),!1;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.delInfo(r)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},cancelClick:function(){this.dialogFormVisible=!1},addClick:function(){var e=this,t=this.groupForm;this.$refs["ruleForm"].validate((function(a){a&&("add"==e.dialogType?e.submitInfo(t):e.editInfo(t))}))},addModal:function(){var e=this;this.dialogType="add",this.title="新增机构",Object.keys(this.groupForm).map((function(t){return e.groupForm[t]=""})),this.groupForm.parentId=null,this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs.ruleForm.clearValidate()}))},editModal:function(e){var t=this;this.dialogType="edit",this.title="编辑机构",1!==e.length?this.$message({message:"请选择一条数据",type:"warning"}):(this.dialogFormVisible=!0,Object.keys(this.groupForm).forEach((function(a){t.groupForm[a]=e[0][a]})),""===this.groupForm.parentId&&(this.groupForm.parentId=null),this.$nextTick((function(){t.$refs.ruleForm.clearValidate()})),this.groupForm=Object(i["a"])({id:e[0].id},this.groupForm))},getList:function(){var e=this;Object(u["c"])({simpleName:"",orgIds:[]}).then((function(t){200===t.code&&(e.formModel.formFilds.forEach((function(a){"parentId"==a.prop&&e.$set(a,"options",Object(h["a"])(t.data))})),e.treeOptions=Object(h["a"])(t.data),e.treeData.lists=t.data)}))},submitInfo:function(e){var t=this;Object(u["d"])(e).then((function(e){200===e.code?(t.dialogFormVisible=!1,t.$message({type:"success",message:"创建成功"}),t.getList()):t.$message.error(e.msg)}))},editInfo:function(e){var t=this;Object(u["b"])(e).then((function(e){200===e.code?(t.dialogFormVisible=!1,t.$message({type:"success",message:"编辑成功"}),t.getList()):t.$message.error(e.msg)}))},delInfo:function(e){var t=this;Object(u["a"])({idList:e}).then((function(e){200===e.code?(t.dialogFormVisible=!1,t.getList(),t.$message({message:"删除成功",type:"success"})):t.$message({message:e.msg,type:"error"})}))},onSearch:function(){var e=this.searchModel.formModel.name;if(e){var t=y(e,this.treeData.lists);this.treeData.lists=t}else this.getList()}}},x=w,O=(a("cb20"),a("2877")),k=Object(O["a"])(x,r,n,!1,null,"4cef9cda",null);t["default"]=k.exports},"9e3c":function(e,t,a){},a0f8:function(e,t,a){"use strict";a("354a")},ae1d:function(e,t,a){"use strict";a("9e3c")},b8f1:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",[t("el-form",{attrs:{inline:!0,model:a.formInline}},[t("el-form-item",{attrs:{label:"菜单所属应用"}},[t("el-select",{attrs:{loading:a.loadings.application,"popper-append-to-body":!1,placeholder:a.loadings.application?"查询中, 请稍等...":"请选择"},on:{change:a.changeAppId},model:{value:a.formInline.appId,callback:function(t){e.$set(a.formInline,"appId",t)},expression:"formInline.appId"}},e._l(a.applicationRef,(function(e){return t("el-option",{key:e.id,attrs:{value:e.id,label:"".concat(e.name)}})})),1)],1),t("el-form-item",[t("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",loading:a.loadings.tree,disabled:a.loadings.application,icon:"el-icon-search"},on:{click:a.onSubmit}},[e._v(e._s(a.loadings.tree?"查询中":"查询"))])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loadings.tree,expression:"loadings.tree"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:a.tableData,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-class-name":a.rowClassName,"row-key":"id","default-expand-all":"",border:""}},[t("el-table-column",{attrs:{prop:"text","header-align":"left",label:"菜单名称",width:200}}),t("el-table-column",{attrs:{prop:"routePath",label:"前端路由"}}),t("el-table-column",{attrs:{prop:"description",label:"描述",width:"100",align:"left","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"isLeaf",label:"类型",width:"80",align:"left","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.row;return[n.isLeaf==a.IS_PAGE?[t("el-tag",{attrs:{size:"mini",type:n.children&&n.children.length>0?"danger":"info",effect:"dark"}},[e._v(" 页面 ")]),t("i",{directives:[{name:"show",rawName:"v-show",value:n.children&&n.children.length>0,expression:"row.children && row.children.length > 0"}],staticClass:"el-icon-warning-outline ml-5",attrs:{title:"可能存在错误, 页面下不能挂载页面"}})]:n.isLeaf==a.IS_DIR?[t("el-tag",{attrs:{size:"mini",type:a.isEmpty(n.children)?"danger":"success",effect:"dark"}},[e._v(" 目录 ")]),t("i",{directives:[{name:"show",rawName:"v-show",value:a.isEmpty(n.children),expression:"isEmpty(row.children)"}],staticClass:"el-icon-warning-outline ml-5",attrs:{title:"可能存在错误, 目录下没有页面"}})]:[t("el-tag",{attrs:{size:"mini",type:"danger",effect:"dark"}},[e._v(" 异常 ")]),t("i",{staticClass:"el-icon-warning-outline ml-5",attrs:{title:"请打开编辑--\x3e选择类型--\x3e确定 "}})]]}}])}),t("el-table-column",{attrs:{label:"权限",width:"120",prop:"permission",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.row;return[t("el-button",{attrs:{type:"text",size:"mini",disabled:n.isLeaf==a.IS_DIR},on:{click:function(e){return a.clickAction("button",n)}}},[e._v("按钮")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-button",{attrs:{type:"text",size:"mini",disabled:n.isLeaf==a.IS_DIR},on:{click:function(e){return a.clickAction("rule",n)}}},[e._v("规则")])]}}])}),t("el-table-column",{attrs:{prop:"sort",label:"排序",width:"80",align:"center"}}),t("el-table-column",{attrs:{prop:"action",width:"160",align:"left"},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(e){return a.clickAction("add_level_1")}}},[e._v("添加")]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",[e._v("操作")])]},proxy:!0},{key:"default",fn:function(r){var n=r.row;return[t("el-button",{attrs:{type:"text",icon:"el-icon-plus",disabled:"Y"==n.isLeaf},on:{click:function(e){return a.clickAction("add",n)}}},[e._v("添加")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-button",{attrs:{type:"text"},on:{click:function(e){return a.clickAction("edit",n)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(e){return a.clickAction("delete",n)}}},[e._v("删除")])]}}])})],1),a.visibles.menu?t(a.DialogMenu,{attrs:{show:a.visibles.menu,parentId:a.parentIdRef,appId:a.formInline.appId,treeList:a.treeList,rowData:a.rowData,refresh:a.getList},on:{"update:show":function(t){return e.$set(a.visibles,"menu",t)}}}):e._e(),a.visibles.button?t(a.DrawerButtonList,{attrs:{show:a.visibles.button,rowData:a.rowData},on:{"update:show":function(t){return e.$set(a.visibles,"button",t)}}}):e._e(),a.visibles.rule?t(a.DrawerRuleList,{attrs:{show:a.visibles.rule,rowData:a.rowData},on:{"update:show":function(t){return e.$set(a.visibles,"rule",t)}}}):e._e()],1)},n=[],l=a("c7eb"),o=a("1da1"),i=(a("a4d3"),a("e01a"),a("4e82"),a("498a"),function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("el-dialog-limit",{attrs:{title:a.title,visible:a.props.show,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:a.clickCancel}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:a.loadings.form,expression:"loadings.form"}],ref:"formRef",attrs:{model:a.formData,"label-width":"120px",rules:a.rules}},[a.isFormType!==a.MENU_ADD_NEW?t("el-form-item",{attrs:{label:"上级菜单",prop:"parentId"}},[t(a.TreeSelect,{attrs:{multiple:!1,options:a.treeDIR,normalizer:a.normalizer,placeholder:"请选择上级菜单"},model:{value:a.formData.parentId,callback:function(t){e.$set(a.formData,"parentId",t)},expression:"formData.parentId"}})],1):e._e(),t("el-form-item",{attrs:{label:"菜单名称",prop:"text"}},[t("el-input",{attrs:{maxlength:"12","show-word-limit":"",placeholder:"请输入"},model:{value:a.formData.text,callback:function(t){e.$set(a.formData,"text","string"===typeof t?t.trim():t)},expression:"formData.text"}})],1),t("el-form-item",{attrs:{prop:"isLeaf",label:"类型"}},[t("el-radio",{attrs:{label:"N",title:"目录下可以再添加目录或页面"},model:{value:a.formData.isLeaf,callback:function(t){e.$set(a.formData,"isLeaf",t)},expression:"formData.isLeaf"}},[e._v("目录")]),t("el-radio",{attrs:{disabled:a.disablePageType,label:"Y",title:"页面下不能再继续添加目录或页面"},model:{value:a.formData.isLeaf,callback:function(t){e.$set(a.formData,"isLeaf",t)},expression:"formData.isLeaf"}},[e._v("页面")])],1),t("el-form-item",{attrs:{label:"前端路由",prop:"routePath"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:a.formData.routePath,callback:function(t){e.$set(a.formData,"routePath","string"===typeof t?t.trim():t)},expression:"formData.routePath"}})],1),t("el-form-item",{attrs:{prop:"path",label:"链接"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:a.formData.path,callback:function(t){e.$set(a.formData,"path","string"===typeof t?t.trim():t)},expression:"formData.path"}})],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"sort",label:"排序"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:0,placeholder:"请输入"},model:{value:a.formData.sort,callback:function(t){e.$set(a.formData,"sort",e._n(t))},expression:"formData.sort"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"icon",label:"菜单图标"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:""},model:{value:a.formData.icon,callback:function(t){e.$set(a.formData,"icon",t)},expression:"formData.icon"}},e._l(a.svgIconlist,(function(a,r){return t("el-option",{key:r,attrs:{value:a,lable:a}},[t("span",{staticStyle:{float:"left"}},[t("svg-icon",{attrs:{"icon-class":a}})],1),t("span",{staticStyle:{float:"right"}},[e._v(e._s(a))])])})),1)],1)],1)],1),t("el-form-item",{attrs:{prop:"description",label:"描述"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入",maxlength:"50","show-word-limit":""},model:{value:a.formData.description,callback:function(t){e.$set(a.formData,"description","string"===typeof t?t.trim():t)},expression:"formData.description"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",disabled:a.loadings.form},on:{click:a.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:a.clickCancel}},[e._v("取消")])],1)],1)}),s=[],c=a("ade3"),u=(a("4de4"),a("b64b"),a("d3b7"),a("159b"),a("2b0e")),d=a("153c"),p=a("ff51"),m=a("5c8a"),f=a("7ee8"),b=a("ec41"),h=a("985d"),g=a("5c96"),v=a("ca17"),y=a.n(v),w=(a("542c"),{name:"DialogMenu"}),x=Object.assign(w,{props:{show:Boolean,appId:{type:String,default:void 0,required:!0},parentId:{default:null,type:String},treeList:{default:[],type:Array},rowData:{type:Object,default:null},refresh:{type:Function,required:!0}},emits:["update:show"],setup:function(e,t){var a=t.emit,r=e,n="MENU_ADD_CHILD",i="MENU_ADD_NEW",s="MENU_EDIT",v=Object(u["computed"])((function(){return r.parentId?n:r.rowData?s:i})),w=Object(u["computed"])((function(){var e="菜单";switch(v.value){case n:e="添加子菜单";break;case s:e="编辑菜单";break;case i:e="添加一级菜单";break}return e})),x=Object(u["computed"])((function(){return!(v.value!==s||!Object(p["a"])(r.rowData.children))&&r.rowData.children.length>0})),O=Object(u["computed"])((function(){var e=Object(m["a"])(r.treeList);return S(e)})),k=function(){a("update:show",!1)},_=Object(u["reactive"])({id:void 0,menuId:void 0,parentId:void 0,text:"",path:"",routePath:"",description:"",icon:"",appId:"",isLeaf:"N",sort:1}),F=Object(u["reactive"])(Object(c["a"])({text:[{required:!0,message:"请输入名称",trigger:"blur"}],routePath:[{required:!0,message:"请输入路由",trigger:"blur"}],isLeaf:[{required:!0,message:"请选择类型",trigger:"change"}]},"routePath",[{required:!0,message:"请输入前端路由",trigger:"change"},{message:"请输入正确的前端路由, 例如: /xxx/xx",trigger:"change",pattern:/\/[a-zA-Z0-9-]+(?<!\/)/g}])),D=Object(u["ref"])(),j=Object(u["reactive"])({form:!1});function M(e){return e.id=e.menuId,e.label=e.text,Object(f["a"])(e.children)&&delete e.children,e}function N(){return R.apply(this,arguments)}function R(){return R=Object(o["a"])(Object(l["a"])().mark((function e(){var t;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(v.value===s){e.next=2;break}return e.abrupt("return");case 2:return j.form=!0,e.next=5,Object(d["i"])(r.rowData.id).catch((function(e){}));case 5:t=e.sent,Object.keys(_).forEach((function(e){_[e]=Object(b["a"])(t,"data.".concat(e))})),j.form=!1;case 8:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}Object(u["onMounted"])((function(){v.value===n&&(_.parentId=r.parentId),_.appId=r.appId,N()}));var I=function(){var e=Object(o["a"])(Object(l["a"])().mark((function e(){var t;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D.value.validate();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:if(j.form=!0,v.value!==s){e.next=16;break}return e.next=10,Object(d["f"])(_).catch((function(e){}));case 10:return e.sent,g["Message"].success("".concat(w.value,"成功")),k(),r.refresh(),j.form=!1,e.abrupt("return");case 16:return e.next=18,Object(d["m"])(_).catch((function(e){}));case 18:e.sent,g["Message"].success("".concat(w.value,"成功")),r.refresh(),j.form=!1,k();case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function S(e){return Array.isArray(e)?e.filter((function(e){return e.children=S(e.children),"N"===e.isLeaf})):[]}return{__sfc:!0,props:r,MENU_ADD_CHILD:n,MENU_ADD_NEW:i,MENU_EDIT:s,isFormType:v,title:w,disablePageType:x,treeDIR:O,emit:a,clickCancel:k,formData:_,rules:F,formRef:D,loadings:j,normalizer:M,getMenuDetail:N,clickConfirm:I,filterY:S,svgIconlist:h["b"],TreeSelect:y.a}}}),O=x,k=a("2877"),_=Object(k["a"])(O,i,s,!1,null,"207c2972",null),F=_.exports,D=a("d66c"),j=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("el-drawer",{attrs:{visible:a.props.show,size:"800px","append-to-body":!0,"destroy-on-close":!0,wrapperClosable:!1},on:{"update:visible":function(t){return e.$set(a.props,"show",t)},close:a.clickCancel}},[t("el-page-header",{attrs:{slot:"title",content:a.title},on:{back:a.clickCancel},slot:"title"}),t("el-scrollbar",{staticStyle:{height:"calc(100vh - 60px)"}},[t("div",{staticClass:"p-10"},[a.props.rowData?t("el-descriptions",[t("el-descriptions-item",{attrs:{label:"菜单名称"}},[e._v(e._s(a.props.rowData.text))]),t("el-descriptions-item",{attrs:{label:"前端路由"}},[e._v(e._s(a.props.rowData.routePath))])],1):e._e(),t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:a.clickAdd}},[e._v("添加")]),t("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",loading:a.loadings.table},on:{click:a.getButtonsById}},[e._v("刷新")]),t("el-button",{attrs:{type:"danger",loading:a.loadings.delete,disabled:0==a.selectionRef.length},on:{click:function(e){return a.clickDelete("batch")}}},[e._v("批量删除")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loadings.table,expression:"loadings.table"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:a.tableData,"row-key":"id","element-loading-text":"加载中..."},on:{"selection-change":a.onSelectionChange}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{label:"按钮名称",prop:"name"}}),t("el-table-column",{attrs:{label:"按钮权限标识",prop:"code"}}),t("el-table-column",{attrs:{label:"路径",prop:"path"}}),t("el-table-column",{attrs:{label:"操作",prop:"action",width:"120"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(e){return a.clickEdit(n)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(e){return a.clickDelete("single",n)}}},[e._v("删除")])]}}])})],1)],1)]),a.visibleButton?t(a.DialogButton,{attrs:{show:a.visibleButton,rowButton:a.rowButton,menuId:e.rowData.id,refresh:a.getButtonsById},on:{"update:show":function(e){a.visibleButton=e}}}):e._e()],1)},M=[],N=(a("d81d"),function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("el-dialog-limit",{attrs:{title:a.title,visible:a.props.show,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:a.clickCancel}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"formRef",attrs:{model:a.formData,"label-width":"120px",rules:a.rules}},[t("el-form-item",{attrs:{label:"按钮名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:a.formData.name,callback:function(t){e.$set(a.formData,"name",t)},expression:"formData.name"}})],1),t("el-form-item",{attrs:{label:"按钮权限标识",prop:"code"}},[t("el-input",{attrs:{placeholder:"请输入按钮权限标识, 需和对应页面按钮绑定的标识对应",maxlength:"20","show-word-limit":""},model:{value:a.formData.code,callback:function(t){e.$set(a.formData,"code","string"===typeof t?t.trim():t)},expression:"formData.code"}})],1),t("el-form-item",{attrs:{label:"请求路径",prop:"path"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:a.formData.path,callback:function(t){e.$set(a.formData,"path",t)},expression:"formData.path"}})],1),t("el-form-item",{attrs:{label:"请求方式",prop:"type"}},[t("el-select",{staticClass:"w-100",attrs:{placeholder:"请输入"},model:{value:a.formData.type,callback:function(t){e.$set(a.formData,"type",t)},expression:"formData.type"}},e._l(a.requestTypeList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{prop:"description",label:"描述"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入",maxlength:"20","show-word-limit":""},model:{value:a.formData.description,callback:function(t){e.$set(a.formData,"description",t)},expression:"formData.description"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:a.loading,type:"primary"},on:{click:a.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:a.clickCancel}},[e._v("取消")])],1)],1)}),R=[],I=a("5530"),S={__name:"dialog-button",props:{show:Boolean,rowButton:{type:Object,default:null},menuId:{type:String,default:void 0},refresh:{type:Function,required:!0}},emits:["update:show"],setup:function(e,t){var a=t.emit,r=e,n=Object(u["computed"])((function(){return i.value?"编辑按钮":"新增按钮"})),i=Object(u["computed"])((function(){return Boolean(r.rowButton)})),s=[{label:"POST",value:"POST"},{label:"DELETE",value:"DELETE"},{label:"PUT",value:"PUT"},{label:"GET",value:"GET"}],p=function(){a("update:show",!1)},m=Object(u["reactive"])({id:void 0,name:"",code:void 0,path:void 0,type:"POST",description:""}),f=Object(u["ref"])(!1);Object(u["onMounted"])((function(){i.value&&Object.assign(m,r.rowButton)}));var b=Object(u["reactive"])(Object(c["a"])(Object(c["a"])({name:[{required:!0,message:"请输入",trigger:"blur"}],code:[{required:!0,message:"请输入权限标识(可F12打开开发者工具查找对应按钮data-authcode字段)",trigger:"blur"},{pattern:/^[a-zA-Z0-9_\-:]+$/,trigger:"blur",message:"请输入a-z 0-9 或_ - :组成的字符"}]},"name",[{required:!0,message:"请输入",trigger:"blur"}]),"name",[{required:!0,message:"请输入",trigger:"blur"}])),h=Object(u["ref"])(),v=function(){var e=Object(o["a"])(Object(l["a"])().mark((function e(){var t;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.value.validate();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:if(f.value=!0,!i.value){e.next=8;break}return e.abrupt("return",Object(d["g"])(Object(I["a"])(Object(I["a"])({},m),{},{menuId:r.menuId})).then((function(){g["Message"].success({message:"编辑成功",offset:45}),r.refresh(),p()})).finally((function(){f.value=!1})));case 8:return e.abrupt("return",Object(d["n"])(Object(I["a"])(Object(I["a"])({},m),{},{menuId:r.menuId})).then((function(){g["Message"].success({message:"新增成功",offset:45}),r.refresh(),p()})).finally((function(){f.value=!1})));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{__sfc:!0,props:r,title:n,isUpdate:i,requestTypeList:s,emit:a,clickCancel:p,formData:m,loading:f,rules:b,formRef:h,clickConfirm:v}}},T=S,C=Object(k["a"])(T,N,R,!1,null,"22c5116c",null),$=C.exports,L={__name:"drawer-button-list",props:{show:Boolean,rowData:{type:Object,default:null}},emits:["update:show"],setup:function(e,t){var a=t.emit,r=e,n=Object(u["reactive"])({table:!1,delete:!1}),i=Object(u["ref"])([]),s=Object(u["ref"])(!1),c=Object(u["ref"])(null),p="按钮",m=function(){a("update:show",!1)};Object(u["onMounted"])((function(){x()}));var f=function(){c.value=null,s.value=!0},h=function(e){c.value=e,s.value=!0},v=Object(u["ref"])([]);function y(e){v.value=e}var w=function(){var e=Object(o["a"])(Object(l["a"])().mark((function e(t,a){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"single"===t?g["MessageBox"].confirm("确定要删除【".concat(a.text,"】吗?")).then((function(){n.delete=!0,Object(d["d"])({idList:[a.id]}).then((function(){g["Message"].success({message:"删除成功",offset:45}),x()})).finally((function(){n.delete=!1}))})):"batch"===t&&g["MessageBox"].confirm("确定要批量删除所选吗?").then((function(){var e=v.value.map((function(e){return e.id}));n.delete=!0,Object(d["d"])({idList:e}).then((function(){g["Message"].success({message:"批量删除成功",offset:45}),x()})).finally((function(){n.delete=!1}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function x(){n.table=!0,i.value=[],Object(d["k"])({id:r.rowData.id}).then((function(e){i.value=Object(b["a"])(e,"data",[])})).finally((function(){n.table=!1}))}return{__sfc:!0,props:r,loadings:n,tableData:i,visibleButton:s,rowButton:c,emit:a,title:p,clickCancel:m,clickAdd:f,clickEdit:h,selectionRef:v,onSelectionChange:y,clickDelete:w,getButtonsById:x,DialogButton:$}}},B=L,P=Object(k["a"])(B,j,M,!1,null,"7276848a",null),E=P.exports,q=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("el-drawer",{attrs:{visible:a.props.show,size:"800px","append-to-body":!0,"destroy-on-close":!0,wrapperClosable:!1},on:{"update:visible":function(t){return e.$set(a.props,"show",t)},close:a.clickCancel}},[t("el-page-header",{attrs:{slot:"title",content:a.title},on:{back:a.clickCancel},slot:"title"}),t("el-scrollbar",{staticStyle:{height:"calc(100vh - 60px)"}},[t("div",{staticClass:"p-10"},[a.props.rowData?t("el-descriptions",[t("el-descriptions-item",{attrs:{label:"菜单名称"}},[e._v(e._s(a.props.rowData.text))]),t("el-descriptions-item",{attrs:{label:"前端路由"}},[e._v(e._s(a.props.rowData.routePath))])],1):e._e(),t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:a.clickAdd}},[e._v("添加")]),t("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",loading:a.loadings.table},on:{click:a.getRulesById}},[e._v("刷新")]),t("el-button",{attrs:{type:"danger",loading:a.loadings.delete,disabled:0==a.selectionRef.length},on:{click:function(e){return a.clickDelete("batch")}}},[e._v("批量删除")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loadings.table,expression:"loadings.table"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:a.tableData,"row-key":"id","element-loading-text":"加载中..."},on:{"selection-change":a.onSelectionChange}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{label:"规则名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.row;return[n.type==a.NOT_CUSTOM_RULE?[t("span",[e._v(e._s(a.dict_ruleOptions.get(n.name)||n.name))])]:t("span",[e._v(e._s(n.name||""))])]}}])}),t("el-table-column",{attrs:{label:"规则类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.row;return[n.type==a.NOT_CUSTOM_RULE?t("span",[e._v(" 非自定义规则 ")]):n.type==a.IS_CUSTOM_RULE?t("span",[e._v(" 自定义规则 ")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"路径",prop:"path"}}),t("el-table-column",{attrs:{label:"规则",prop:"rule"}}),t("el-table-column",{attrs:{label:"操作",prop:"action",width:"120"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.row;return[t("el-button",{attrs:{type:"text"},on:{click:function(e){return a.clickEdit(n)}}},[e._v("编辑")]),t("el-divider",{attrs:{direction:"vertical"}}),t("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(e){return a.clickDelete("single",n)}}},[e._v("删除")])]}}])})],1)],1)]),a.visibleRule?t(a.DialogRule,{attrs:{show:a.visibleRule,rowRule:a.rowRule,menuId:e.rowData.id,refresh:a.getRulesById},on:{"update:show":function(e){a.visibleRule=e}}}):e._e()],1)},A=[],U=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("el-dialog-limit",{attrs:{title:a.title,visible:a.props.show,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:a.clickCancel}},[t("el-form",{ref:"formRef",attrs:{model:a.formData,"label-position":"right",rules:a.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"规则类型"}},[t("el-radio-group",{attrs:{disabled:a.isUpdate},model:{value:a.formData.type,callback:function(t){e.$set(a.formData,"type",t)},expression:"formData.type"}},[t("el-radio",{attrs:{label:a.NOT_CUSTOM_RULE}},[e._v("非自定义规则 ")]),t("el-radio",{attrs:{label:a.IS_CUSTOM_RULE}},[e._v("自定义规则")])],1)],1),a.formData.type===a.NOT_CUSTOM_RULE?[t("el-form-item",{attrs:{prop:"customNameNon",label:"规则名称"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择规则名称",clearable:"",filterable:"",disabled:a.isUpdate},on:{change:a.ruleChange},model:{value:a.formData.customNameNon,callback:function(t){e.$set(a.formData,"customNameNon",t)},expression:"formData.customNameNon"}},e._l(a.dict_ruleOptions.options,(function(e,a){return t("el-option",{key:a,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{prop:"rule",label:"规则值"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:a.formData.rule,callback:function(t){e.$set(a.formData,"rule",t)},expression:"formData.rule"}})],1)]:a.formData.type===a.IS_CUSTOM_RULE?[t("el-form-item",{attrs:{prop:"customName",label:"自定义规则名称"}},[t("el-input",{attrs:{disabled:a.isUpdate,placeholder:"请输入自定义规则名称"},model:{value:a.formData.customName,callback:function(t){e.$set(a.formData,"customName","string"===typeof t?t.trim():t)},expression:"formData.customName"}})],1),t("el-form-item",{attrs:{prop:"ruleSql",label:"自定义sql"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:a.formData.ruleSql,callback:function(t){e.$set(a.formData,"ruleSql",t)},expression:"formData.ruleSql"}})],1)]:e._e(),t("el-form-item",{attrs:{prop:"path",label:"查询路径"}},[t("el-input",{attrs:{placeholder:"请输入"},model:{value:a.formData.path,callback:function(t){e.$set(a.formData,"path",t)},expression:"formData.path"}}),t("span",{staticClass:"path-info"},[e._v("请求方式+请求路径,例如:POST/esbBaseAdaptationFlow/selectAll")])],1),t("el-form-item",{attrs:{prop:"desc",label:"描述"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入"},model:{value:a.formData.description,callback:function(t){e.$set(a.formData,"description",t)},expression:"formData.description"}})],1)],2),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{loading:a.loading,type:"primary"},on:{click:a.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:a.clickCancel}},[e._v("取消")])],1)],1)},z=[],V=a("a6e9"),G={__name:"dialog-rule",props:{show:Boolean,rowRule:{type:Object,default:null},menuId:{type:String,default:void 0},refresh:{type:Function,required:!0}},emits:["update:show"],setup:function(e,t){var a=t.emit,r=e,n="1",i="0",s=Object(u["computed"])((function(){return c.value?"编辑规则":"新增规则"})),c=Object(u["computed"])((function(){return Boolean(r.rowRule)}));function p(e){var t=V["a"].getItem[e];f.rule=t?t.desc:""}var m=function(){a("update:show",!1)},f=Object(u["reactive"])({id:void 0,menuId:"",type:"0",customNameNon:"",customName:"",rule:"",ruleSql:"",path:"",description:""}),b=Object(u["ref"])(!1);Object(u["onMounted"])((function(){if(c.value){Object.assign(f,r.rowRule);var e=r.rowRule,t=e.name,a=e.rule;"0"===r.rowRule.type?(f.customNameNon=t,f.customName=void 0,f.rule=a,f.ruleSql=""):"1"===r.rowRule.type&&(f.customNameNon=void 0,f.customName=t,f.rule=void 0,f.ruleSql=a)}}));var h=Object(u["reactive"])({customNameNon:[{required:!0,message:"请选择规则名称",trigger:"change"}],customName:[{required:!0,message:"请输入自定义规则名称",trigger:"blur"},{pattern:/^(?!0$|1$)/,message:"自定义规则名称不能是1或0, 请修改",trigger:"blur"}],rule:[{required:!0,message:"请输入规则值",trigger:"blur"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}],ruleSql:[{required:!0,message:"请输入sql",trigger:"blur"}]}),v=Object(u["ref"])(),y=function(){var e=Object(o["a"])(Object(l["a"])().mark((function e(){var t,a,n;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.value.validate();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:if(a=f.customName,n=f.ruleSql,"0"===f.type&&(a=f.customNameNon,n=f.rule),b.value=!0,!c.value){e.next=11;break}return e.abrupt("return",Object(d["e"])(Object(I["a"])(Object(I["a"])({},f),{},{name:a,rule:n,menuId:r.menuId})).then((function(){g["Message"].success({message:"编辑成功",offset:45}),r.refresh(),m()})).finally((function(){b.value=!1})));case 11:return e.abrupt("return",Object(d["l"])(Object(I["a"])(Object(I["a"])({},f),{},{name:a,rule:n,menuId:r.menuId})).then((function(){g["Message"].success({message:"新增成功",offset:45}),r.refresh(),m()})).finally((function(){b.value=!1})));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{__sfc:!0,IS_CUSTOM_RULE:n,NOT_CUSTOM_RULE:i,props:r,title:s,isUpdate:c,ruleChange:p,emit:a,clickCancel:m,formData:f,loading:b,rules:h,formRef:v,clickConfirm:y,dict_ruleOptions:V["a"]}}},W=G,H=(a("4a75"),Object(k["a"])(W,U,z,!1,null,"3e77c216",null)),Y=H.exports,K={__name:"drawer-rule-list",props:{show:Boolean,rowData:{type:Object,default:null}},emits:["update:show"],setup:function(e,t){var a=t.emit,r=e,n="1",i="0",s=Object(u["reactive"])({table:!1,delete:!1}),c=Object(u["ref"])([]),p=Object(u["ref"])(!1),m=Object(u["ref"])(null),f="规则",h=function(){a("update:show",!1)};Object(u["onMounted"])((function(){k()}));var v=function(){m.value=null,p.value=!0},y=function(e){m.value=e,p.value=!0},w=Object(u["ref"])([]);function x(e){w.value=e}var O=function(){var e=Object(o["a"])(Object(l["a"])().mark((function e(t,a){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"single"===t?g["MessageBox"].confirm("确定要删除该条规则吗?").then((function(){s.delete=!0,Object(d["b"])({idList:[a.id]}).then((function(){g["Message"].success({message:"删除成功",offset:45}),k()})).finally((function(){s.delete=!1}))})):"batch"===t&&g["MessageBox"].confirm("确定要批量删除所选吗?").then((function(){var e=w.value.map((function(e){return e.id}));s.delete=!0,Object(d["b"])({idList:e}).then((function(){g["Message"].success({message:"批量删除成功",offset:45}),k()})).finally((function(){s.delete=!1}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function k(){s.table=!0,c.value=[],Object(d["h"])({id:r.rowData.id}).then((function(e){c.value=Object(b["a"])(e,"data",[])})).finally((function(){s.table=!1}))}return{__sfc:!0,IS_CUSTOM_RULE:n,NOT_CUSTOM_RULE:i,props:r,loadings:s,tableData:c,visibleRule:p,rowRule:m,emit:a,title:f,clickCancel:h,clickAdd:v,clickEdit:y,selectionRef:w,onSelectionChange:x,clickDelete:O,getRulesById:k,get:b["a"],DialogRule:Y,dict_ruleOptions:V["a"]}}},J=K,Z=Object(k["a"])(J,q,A,!1,null,"02d4196e",null),Q=Z.exports,X={name:"MenuManageIndex"},ee=Object.assign(X,{setup:function(e){var t=Object(u["reactive"])({appId:void 0}),a=Object(u["ref"])([]),r="Y",n="N",i=Object(u["reactive"])({application:!1,tree:!1}),s=Object(u["ref"])([]),c=Object(u["ref"])(null),h=Object(u["reactive"])({menu:!1,button:!1,rule:!1}),v=Object(u["ref"])(null),y=function(e){var t=e.row;e.rowIndex;return Object(f["a"])(t.children)?"":"table-parent-row"},w=function(e){M()},x=function(){var e=Object(o["a"])(Object(l["a"])().mark((function e(t,a){var r;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=t,e.next="edit"===e.t0?3:"add_level_1"===e.t0?7:"add"===e.t0?11:"delete"===e.t0?15:"button"===e.t0?22:"rule"===e.t0?25:28;break;case 3:return v.value=null,c.value=Object(m["a"])(a),h.menu=!0,e.abrupt("break",28);case 7:return v.value=null,c.value=null,h.menu=!0,e.abrupt("break",28);case 11:return v.value=a.id,c.value=null,h.menu=!0,e.abrupt("break",28);case 15:return e.next=17,g["MessageBox"].confirm("确定要删除【".concat(a.text,"】吗?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(){}));case 17:if(r=e.sent,"confirm"===r){e.next=20;break}return e.abrupt("return");case 20:return Object(d["c"])(a.menuId).then((function(e){g["Message"].success("删除成功"),O()})),e.abrupt("break",28);case 22:return c.value=a,h.button=!0,e.abrupt("break",28);case 25:return c.value=a,h.rule=!0,e.abrupt("break",28);case 28:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){M()};function k(){return _.apply(this,arguments)}function _(){return _=Object(o["a"])(Object(l["a"])().mark((function e(){var t,a;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.application=!0,e.next=3,Object(d["a"])().catch((function(e){}));case 3:return t=e.sent,a=t.data,s.value=Object(p["a"])(a)?a:[],i.application=!1,e.abrupt("return",s.value);case 8:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}var j=Object(u["ref"])([]);function M(){return N.apply(this,arguments)}function N(){return N=Object(o["a"])(Object(l["a"])().mark((function e(){var r,n,o;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.tree=!0,r={appId:t.appId},e.next=4,Object(d["j"])(r).catch((function(e){}));case 4:n=e.sent,o=Object(b["a"])(n,"data",[]),a.value=Object(p["a"])(o)?Object(D["a"])(o,"sort"):[],j.value=Object(m["a"])(a.value),i.tree=!1;case 9:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}return Object(u["onMounted"])((function(){k().then((function(e){t.appId=Object(b["a"])(e,"0.id",""),M()}))})),{__sfc:!0,formInline:t,tableData:a,IS_PAGE:r,IS_DIR:n,loadings:i,applicationRef:s,rowData:c,visibles:h,parentIdRef:v,rowClassName:y,changeAppId:w,clickAction:x,onSubmit:O,getApp:k,treeList:j,getList:M,DialogMenu:F,isEmpty:f["a"],DrawerButtonList:E,DrawerRuleList:Q}}}),te=ee,ae=(a("0c88"),Object(k["a"])(te,r,n,!1,null,"1caf5893",null));t["default"]=ae.exports},cb20:function(e,t,a){"use strict";a("84a0")},d8e2:function(e,t,a){"use strict";a("21ef")}}]);