(window["jsonpPaas4"]=window["jsonpPaas4"]||[]).push([["app~c6ef1366"],{"03c1":function(t,e,a){"use strict";a("20ea")},"20ea":function(t,e,a){},"23d2":function(t,e,a){"use strict";a("2703")},2703:function(t,e,a){},"279d":function(t,e,a){"use strict";a.r(e);a("4de4"),a("caad"),a("d3b7"),a("2532");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-kafka"},[e("div",{staticClass:"page-traffic"},[e("span",{staticClass:"page-traffic-right"},[t._v("选择集群： "),e("el-select",{attrs:{placeholder:"请选择集群"},model:{value:t.clusterId,callback:function(e){t.clusterId=e},expression:"clusterId"}},t._l(t.csMixKafkaCluster.filter((function(t){return"2"===t.deployMode})),(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("div",[e("el-tabs",{model:{value:t.activePage,callback:function(e){t.activePage=e},expression:"activePage"}},[e("el-tab-pane",{attrs:{label:"broker",name:"1"}}),e("el-tab-pane",{attrs:{label:"主题",name:"2"}})],1),e(["PageBroker","PageTheme"][t.activePage-1],{tag:"component",attrs:{clusterId:t.clusterId,activePage:t.activePage}})],1),Boolean(t.clusterId)?e("div",[e("div",{staticClass:"statistics-traffic"},[e("el-tabs",{staticStyle:{"margin-top":"10px"},on:{"tab-click":t.changeTab},model:{value:t.activeStatistics,callback:function(e){t.activeStatistics=e},expression:"activeStatistics"}},[e("el-tab-pane",{attrs:{label:"明细统计",name:"today"}},[e("span",{staticClass:"statistics-traffic-right"},[t._v(" 日期: "),e("el-date-picker",{attrs:{type:"date","picker-options":t.pickerOptions,placeholder:"选择日期","value-format":"timestamp",clearable:!1},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1),"today"===t.activeStatistics?e("PageBrokerCurrent",{staticClass:"mt-10",attrs:{dateTimeRange:t.dateTimeRange,dateTime:t.dateTime,clusterId:t.clusterId,activePage:t.activePage}}):t._e()],1),e("el-tab-pane",{attrs:{label:"历史统计",name:"history"}},["history"===t.activeStatistics?e("PageBrokerHistory",{attrs:{clusterId:t.clusterId,activePage:t.activePage}}):t._e()],1)],1)],1),"today"===t.activeStatistics?e("div",{staticStyle:{"padding-bottom":"50px"}},[e("el-divider"),e("div",{staticClass:"pb-20 pt-20",attrs:{type:"flex"}},[e("el-checkbox-group",{model:{value:t.checkedIndex,callback:function(e){t.checkedIndex=e},expression:"checkedIndex"}},t._l(t.rateIndexOptions,(function(a){return e("el-checkbox",{key:a.value,attrs:{label:a.value,disabled:!t.checkedIndex.includes(a.value)&&t.checkedIndex.length>=6}},[t._v(" "+t._s(a.label)+" ")])})),1)],1),t._l(t.checkedChartsList,(function(a){return e("div",{key:a.indexKey,staticClass:"chartset"},[t.checkedIndex.includes(a.indexKey)?e("el-card",{staticClass:"mt-15"},[e("div",{staticClass:"flex-inline-between",staticStyle:{"font-size":"14px"}},[e("span",[t._v(t._s(t.getTitle(a.indexKey)))]),e("span",[e("span",[t._v(t._s(1==t.activePage?"Broker：":"Topic："))]),e("el-select",{staticStyle:{width:"500px"},attrs:{multiple:"",placeholder:"请选择","multiple-limit":4},on:{change:function(e){t.getPicture(e,a)}},model:{value:a.checkedBroker,callback:function(e){t.$set(a,"checkedBroker",e)},expression:"item.checkedBroker"}},["message_count"===a.indexKey?t._l(t.checkBrokerListMessageCount,(function(t){return e("el-option",{key:t.id,attrs:{label:t.relationKey,value:t.relationKey}})})):t._l(t.checkBrokerList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.relationKey,value:t.relationKey}})}))],2)],1)]),e("PageBrokerLineCharts",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"item.loading"}],style:{height:"300px",width:"100%"},attrs:{"line-data":a.brokerLineData}})],1):t._e()],1)}))],2):t._e()]):t._e()])},n=[],o=(a("7db0"),a("d81d"),a("14d9"),a("b0c0"),a("b64b"),a("159b"),a("1b62")),r=a("28ce"),c=a("b186"),s=a("3a98"),l=a("b659"),u=a("9a80"),d=(a("f926"),a("ed08")),g=a("ec41"),f=a("ff51"),p=a("064a"),h=a("9fe7"),b=a("d7d7"),m=a("e422"),v=o["a"].CommonSelectCreaterMix,C={name:"kafka-traffic-monitor",mixins:[v(["csMixKafkaCluster"])],components:{PageBroker:r["default"],PageTheme:c["default"],PageBrokerCurrent:s["default"],PageBrokerHistory:l["default"],PageBrokerLineCharts:u["default"]},data:function(){var t=this;return{activePage:"1",clusterId:"",activeStatistics:"today",checkedIndex:[],rateIndexOptions:[],checkBrokerList:[],checkBrokerListMessageCount:[],checkedChartsList:[],dateTime:new Date((new Date).setHours(0,0,0,0)),pickerCurrent:null,tomorrow:(new Date).setHours(23,59,59,1e3),pickerOptions:{disabledDate:function(e){return t.tomorrow<=e.getTime()}},pickerOptionsRange:{disabledDate:function(e){return t.tomorrow<=e.getTime()||!!t.pickerCurrent&&0!==Math.abs(e.getTime()-t.pickerCurrent.getTime())},onPick:function(e){var a=e.minDate,i=e.maxDate;t.pickerCurrent=a&&i?null:a||i}}}},watch:{checkedIndex:function(t){var e=this;this.clusterId&&this.checkBrokerList.length>0&&this.checkedChartsList.forEach((function(a){t.includes(a.indexKey)&&e.getPicture(a.checkedBroker,a)}))},clusterId:function(){this.getBrokerlist(),this.getMessageCountBrokerList()},dateTimeRange:function(){this.getBrokerlist(),this.getMessageCountBrokerList()},activePage:function(){this.clusterId&&(this.getBrokerlist(),this.getMessageCountBrokerList())}},computed:{dateTimeRange:function(){var t=Object(d["d"])(this.dateTime),e=Object(d["d"])(new Date(this.dateTime).setHours(23,59,59,999));return[t,e]}},created:function(){this.getIndexkey()},mounted:function(){var t=this.$route.query.id,e=void 0===t?null:t;e&&(this.clusterId=null!==e&&void 0!==e?e:"",this.getList())},methods:{changeTab:function(t,e){this.activeStatistics=t.name},getIndexkey:function(){var t=this;Object(p["d"])().then((function(e){var a=Object(g["a"])(e,"data"),i=[{value:"message_count",label:"消息总量"}];Object.keys(a).forEach((function(t){i.push({label:a[t],value:t})})),t.rateIndexOptions=i,t.checkedIndex=i[0].value.split(","),t.checkedChartsList=k(i)}))},getMessageCountBrokerList:function(){var t=this,e=!0;if(this.clusterId&&Object(f["a"])(this.dateTimeRange)&&2===this.dateTimeRange.length&&(e=!1),!e){var a={clusterId:this.clusterId,type:this.activePage,startTime:this.dateTimeRange[0],endTime:this.dateTimeRange[1]};Object(m["c"])(a).then((function(e){var a=Object(g["a"])(e,"data");if(t.checkBrokerListMessageCount=a,a.length>0){var i=t.checkedChartsList.find((function(t){return"message_count"===t.indexKey}));i&&(t.$set(i,"checkedBroker",a[0].relationKey.split(",")),t.checkedIndex.includes("message_count")&&t.getPicture(i.checkedBroker,i))}})).catch((function(t){}))}},getBrokerlist:function(){var t=!0;this.clusterId&&Object(f["a"])(this.dateTimeRange)&&2===this.dateTimeRange.length&&(t=!1),t||("1"===this.activePage?this.getBrokerSelectOptions(this.clusterId):this.getTopicSelectOptions(this.clusterId))},getBrokerSelectOptions:function(t){var e=this;Object(b["e"])(t).then((function(t){e.$nextTick((function(){var a=Object(g["a"])(t,"data");e.checkBrokerList=a.map((function(t){return{relationKey:t.nodeId,id:t.id}})),e.checkBrokerList.length>0&&e.checkedChartsList.forEach((function(t){e.$set(t,"checkedBroker",[e.checkBrokerList[0].relationKey]),e.checkedIndex.includes(t.indexKey)&&e.getPicture(t.checkedBroker,t)}))}))}))},getTopicSelectOptions:function(t){var e=this;Object(h["c"])(t).then((function(t){var a=Object(g["a"])(t,"data");e.checkBrokerList=a.map((function(t){return{relationKey:t.name,id:t.id}})),e.checkBrokerList.length>0&&e.checkedChartsList.forEach((function(t){e.$set(t,"checkedBroker",[e.checkBrokerList[0].relationKey]),e.checkedIndex.includes(t.indexKey)&&e.getPicture(t.checkedBroker,t)}))}))},getPicture:function(t,e){var a=this,i=!0;if(this.clusterId&&Object(f["a"])(this.dateTimeRange)&&2===this.dateTimeRange.length&&Object(f["a"])(t)&&t.length>0&&(i=!1),!i){var n=e.indexKey,o=p["a"],r={clusterId:this.clusterId,type:this.activePage,indexKey:n,startTime:this.dateTimeRange[0],endTime:this.dateTimeRange[1],relationKey:t};"message_count"===n&&(o=m["a"],delete r.indexKey),this.$set(e,"loading",!0),o(r).then((function(t){var e=Object(g["a"])(t,"data"),i=[],o=[];Object.keys(e).forEach((function(t,a){var r=e[t].map((function(t){return 0===a&&o.push(t.recordTime),"message_count"===n?t.currentSize:t.oneMinuteRate}));i.push({name:t,value:r})}));var r={xAxisData:o,data:i};a.checkedChartsList.forEach((function(t){t.indexKey==n&&a.$set(t,"brokerLineData",r)}))})).catch((function(t){})).finally((function(){a.$set(e,"loading",!1)}))}},getTitle:function(t){var e,a=this.rateIndexOptions.find((function(e){return e.value===t}));return null!==(e=null===a||void 0===a?void 0:a.label)&&void 0!==e?e:""}}};function k(t){var e=t.map((function(t){var e={indexKey:t.value,checkedBroker:[],loading:!1,brokerLineData:{xAxisData:[],data:[{name:"",value:[]}]}};return e}));return e}var y=C,x=(a("6c09"),a("2877")),_=Object(x["a"])(y,i,n,!1,null,"1a6ef4c8",null);e["default"]=_.exports},"28ce":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("tableView",{ref:"tableView",attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,isPage:t.tableConfig.isPage,isExpand:!0,rowKey:"id"},on:{getExpandChange:t.expandRow},scopedSlots:t._u([{key:"expand",fn:function(a){var i=a.row;return[e("div",{staticClass:"pl-20"},[e("table",{staticClass:"custom-table w-100"},[e("thead",[i.list.length>0?e("tr",{staticClass:"p-5"},[e("th",[t._v("时间范围")]),t._l(i.list,(function(a,i){return e("th",{key:i,attrs:{align:"center"}},[t._v(" "+t._s(a.indexName)+" ")])}))],2):e("tr",{staticClass:"p-5"},[e("th",{attrs:{align:"center"}},[t._v("时间范围")]),e("th",[t._v("消息接入速率")]),e("th",[t._v("流量接入速率")]),e("th",[t._v("流量接出速率")]),e("th",[t._v("请求拒绝速率")]),e("th",[t._v("副本接入速率")]),e("th",[t._v("副本接出速率")])])]),i.list.length>0?e("tbody",[e("tr",[e("td",[t._v("1分钟")]),t._l(i.list,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v(" "+t._s(a.oneMinuteRate||0)+" ")])}))],2),e("tr",[e("td",[t._v("5分钟")]),t._l(i.list,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v(" "+t._s(a.fiveMinuteRate||0)+" ")])}))],2),e("tr",[e("td",[t._v("15分钟")]),t._l(i.list,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v(" "+t._s(a.fifteenMinuteRate||0)+" ")])}))],2)]):e("tbody",[e("tr",[e("td",[t._v("1分钟")]),t._l(6,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v("0")])}))],2),e("tr",[e("td",[t._v("5分钟")]),t._l(6,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v("0")])}))],2),e("tr",[e("td",[t._v("15分钟")]),t._l(6,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v("0")])}))],2)])])])]}}])})],1)},n=[],o=(a("d81d"),a("a9e3"),a("d3b7"),a("25f0"),a("159b"),a("ec41")),r=a("064a"),c=a("1b62"),s=c["a"].CommonSelectCreaterMix,l={components:{},props:{clusterId:String,activePage:String},mixins:[s(["csMixKafkaCluster"])],data:function(){this.$createElement;var t=this;return{rowData:null,showDialog:!1,get clusterList(){return t.csMixKafkaCluster},tableConfig:{isPage:!1,loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"nodeIp",label:"IP"},{prop:"nodePort",label:"端口"},{prop:"nodeStatus",label:"状态",render:function(t,e){var a=e.row;return t("span",[1===a.nodeStatus?"正常":"异常"])}},{prop:"jmxPort",label:"JMX端口"},{prop:"jmxPortStatus",label:"JMX端口状态",render:function(t,e){var a=e.row;return t("span",[1===a.jmxPortStatus?"正常":"异常"])}},{prop:"nodeCreatDate",label:"创建时间"},{prop:"nodeUpdateDate",label:"更新时间"}]}}},created:function(){},watch:{clusterId:{handler:function(){this.getList()},immediate:!0},activePage:{handler:function(){this.getList()},immediate:!0}},methods:{expandRow:function(t){var e=this,a=t.row,i=t.expandedRows;if(i.length>0){var n=a.nodeId.toString().split(",");Object(r["b"])({type:this.activePage,clusterId:this.clusterId,relationKey:n}).then((function(t){var i=Object(o["a"])(t,"data");e.tableConfig.tableData.forEach((function(t){t.id===a.id&&e.$set(t,"list",i)}))}))}},getList:function(){var t=this;this.clusterId&&(this.tableConfig.loading=!0,Object(r["e"])(this.clusterId).then((function(e){var a,i=Object(o["a"])(e,"data.data");t.tableConfig.tableData=i.map((function(t){return t.list=[],t})),t.tableConfig.pagination.total=Number(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.totalCount)||0})).finally((function(){t.tableConfig.loading=!1})))}}},u=l,d=(a("cfe7"),a("2877")),g=Object(d["a"])(u,i,n,!1,null,"1bc4a454",null);e["default"]=g.exports},"2cbd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("el-card",{staticClass:"marginB"})},n=[],o={components:{},data:function(){return{}}},r=o,c=(a("32bd"),a("2877")),s=Object(c["a"])(r,i,n,!1,null,"18f4c5fe",null);e["default"]=s.exports},"32bd":function(t,e,a){"use strict";a("e69c")},3562:function(t,e,a){"use strict";a("35cc")},"35cc":function(t,e,a){},"3a98":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-traffic"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.currentFlowLoad,expression:"currentFlowLoad"}],staticStyle:{height:"300px"}},[t.barData.yData.length>0?e("BarChart",{attrs:{"chart-data":t.barData}}):e("el-empty")],1)])},n=[],o=(a("99af"),a("14d9"),a("a9e3"),a("d3b7"),a("159b"),a("34c7")),r=a("064a"),c=a("ec41"),s=a("ed08"),l={components:{BarChart:o["a"]},props:{show:Boolean,clusterId:String,dateTimeRange:Array,activePage:String,dateTime:{type:[Date,Number],default:null}},watch:{clusterId:{handler:function(){this.getTopCharts()},immediate:!0},dateTime:{handler:function(){this.getTopCharts()},immediate:!0},activePage:{handler:function(){this.getTopCharts()},immediate:!0}},computed:{},data:function(){return{currentFlowLoad:!1,barData:{name:"流量排行",xData:[],yData:[]}}},mounted:function(){},methods:{getTopCharts:function(){var t=this;if(this.clusterId&&this.dateTime){var e={clusterId:this.clusterId,type:this.activePage,time:Object(s["d"])(this.dateTime,"{y}-{m}-{d}")};Object(r["c"])(e).then((function(e){var a=Object(c["a"])(e,"data"),i=[],n=[];a.forEach((function(e){var a="";"1"===t.activePage?a="broker":"2"===t.activePage&&(a="topic"),i.push("".concat(a,"-").concat(e.relationKey)),n.push(e.currentSize)})),t.barData.xData=i,t.barData.yData=n}))}}}},u=l,d=(a("03c1"),a("2877")),g=Object(d["a"])(u,i,n,!1,null,"25a83f1e",null);e["default"]=g.exports},4214:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:"状态",visible:t.show,size:"medium","append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[e("table",{staticClass:"table-bordered"},[e("tbody",t._l(t.rowData,(function(a,i,n){return e("tr",{key:n},[e("td",[t._v(t._s(i))]),e("td",[t._v(t._s(a))])])})),0)]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.clickCancel}},[t._v("确定")]),e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)])},n=[],o={model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function},data:function(){return{}},methods:{clickCancel:function(){this.$emit("change",!1)}}},r=o,c=(a("d991"),a("2877")),s=Object(c["a"])(r,i,n,!1,null,"e2bf87b0",null);e["default"]=s.exports},"422f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("search-form",{attrs:{searchConfig:t.searchConfig},on:{onSearch:t.onSearch}}),e("tableView",{ref:"tableView",attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,total:t.tableConfig.pagination.total,rowKey:"id",currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)}}})],1)},n=[],o=(a("4de4"),a("d3b7"),a("f5cc")),r=a("ec41"),c=a("ff51"),s=a("1b62"),l=s["a"].CommonSelectCreaterMix,u={mixins:[l(["csMixKafkaCluster"])],data:function(){this.$createElement;var t=this;return{tableConfig:{loading:!1,tableData:[],pagination:{pageNo:1,pageSize:10,total:0},columns:[{prop:"host",label:"IP",align:"center"},{prop:"port",label:"端口",align:"center"},{prop:"mode",label:"节点类型",align:"center"},{prop:"version",label:"版本",align:"center"},{prop:"status",label:"状态",align:"center",render:function(t,e){var a=e.row;switch(a.status){case!1:return t("el-tag",{attrs:{type:"danger",effect:"dark"}},["异常"]);case!0:return t("el-tag",{attrs:{type:"success",effect:"dark"}},["正常"]);default:return t("span")}}}],operate:{width:220,list:[]}},searchConfig:{searchData:{clusterId:""},searchItem:[{type:"select",label:"集群",prop:"clusterId",get options(){return t.csMixKafkaCluster}}],rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}]}}}},mounted:function(){var t=this.$route.query.id,e=void 0===t?null:t;e&&(this.searchConfig.searchData.clusterId=null!==e&&void 0!==e?e:"",this.getList())},methods:{getList:function(){var t=this,e=this.searchConfig.searchData.clusterId;this.tableConfig.loading=!0,this.tableConfig.tableData=[],Object(o["a"])(e).then((function(e){var a=Object(r["a"])(e,"data");if(Object(c["a"])(null===e||void 0===e?void 0:e.data)){var i=t.tableConfig.pagination.pageNo,n=t.tableConfig.pagination.pageSize;t.tableConfig.tableData=a.filter((function(t,e){return e<i*n&&e>=n*(i-1)})),t.tableConfig.pagination.total=a.length}else t.tableConfig.pagination.total=0,t.tableConfig.tableData=[]})).finally((function(){t.tableConfig.loading=!1}))},onSearch:function(){this.tableConfig.pagination.pageNo=1,this.getList()}}},d=u,g=a("2877"),f=Object(g["a"])(d,i,n,!1,null,null,null);e["default"]=f.exports},6889:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("search-form",{attrs:{searchConfig:t.searchConfig},on:{onSearch:t.onSearch}}),e("button-list",{attrs:{data:t.buttonList}}),e("tableView",{ref:"tableView",attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,isPage:t.tableConfig.isPage,total:t.tableConfig.pagination.total,rowKey:"id",currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},changePage:t.changePage}})],1)},n=[],o=(a("4de4"),a("d3b7"),a("5ff5")),r=a("1b62"),c=a("ec41"),s=a("ff51"),l=r["a"].CommonSelectCreaterMix,u={mixins:[l(["csMixKafkaCluster"])],data:function(){var t=this;return{buttonList:[],searchConfig:{searchData:{clusterId:""},searchItem:[{type:"select",label:"集群",prop:"clusterId",get options(){return t.csMixKafkaCluster.filter((function(t){return"2"===t.deployMode}))}}],rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}]}},tableData:[{city:"西安",room:"数据中心",ip:"192.168.1.1",cpu:"9.9%",userName:"kafka",memory:"320M-90%",disc:"7G-40%"}],tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"city",label:"城市",align:"center"},{prop:"computerRoom",label:"数据中心",align:"center"},{prop:"hostSshAccount",label:"用户名",align:"center"},{prop:"hostIp",label:"IP",align:"center"},{prop:"cpu",label:"CPU(使用率)",align:"center"},{prop:"memory",label:"内存(总使用率)",align:"center"},{prop:"disk",label:"磁盘(总使用率)",align:"center"}],operate:{width:220,list:[]}}}},mounted:function(){var t=this.$route.query.id,e=void 0===t?null:t;e&&(this.searchConfig.searchData.clusterId=null!==e&&void 0!==e?e:"",this.getList())},methods:{onSearch:function(){this.tableConfig.pagination.currentPage=1,this.getList()},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()},getList:function(){var t=this;this.tableConfig.loading=!0,Object(o["a"])(this.searchConfig.searchData.clusterId).then((function(e){var a=Object(c["a"])(e,"data");if(Object(s["a"])(null===e||void 0===e?void 0:e.data)){var i=t.tableConfig.pagination.pageNo,n=t.tableConfig.pagination.pageSize;t.tableConfig.tableData=a.filter((function(t,e){return e<i*n&&e>=n*(i-1)})),t.tableConfig.pagination.total=a.length}else t.tableConfig.pagination.total=0,t.tableConfig.tableData=[]})).finally((function(){t.tableConfig.loading=!1}))}}},d=u,g=a("2877"),f=Object(g["a"])(d,i,n,!1,null,null,null);e["default"]=f.exports},6958:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-page"},[e("header-line",{attrs:{title:"消费者 - ".concat(t.groupId),size:"small",fontStyle:{"font-size":"14px",fontWeight:600}}}),e("tableView",{attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,isPage:t.tableConfig.isPage,total:t.tableConfig.pagination.totalCount,rowKey:"id",currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},changePage:t.changePage,operate:t.getIndex}}),t.visible?e("ConsumerClientDetail",{attrs:{rowData:t.rowData,refresh:t.getList},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}}):t._e()],1)},n=[],o=a("5530"),r=(a("d3b7"),a("d08c")),c=a("fc18"),s=a("ec41"),l=a("ff51"),u={name:"consumer-client",components:{ConsumerClientDetail:c["default"]},mixins:[],props:{},data:function(){return{visible:!1,rowData:null,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,totalCount:0},tableData:[],columns:[{prop:"consumerId",label:"消费者ID"},{prop:"consumerHost",label:"host",width:200},{prop:"topicCount",label:"主题数量",width:120},{prop:"partitionCount",label:"分区数量",width:120}],operate:{width:220,list:[{label:"消费者明细",id:"detail"}]}}}},computed:{groupId:function(){return this.$route.query.groupId},clusterId:function(){return this.$route.query.clusterId}},watch:{},created:function(){this.getList()},mounted:function(){},methods:{getIndex:function(t){t.index;var e=t.row,a=t.operate;"detail"===a.id&&(this.rowData=e,this.visible=!0)},getList:function(){var t=this,e=Object(o["a"])(Object(o["a"])({},this.tableConfig.pagination),{},{requestObject:{clusterId:this.clusterId,groupId:this.groupId}});this.tableConfig.loading=!0,Object(r["a"])(e).then((function(e){var a=Object(s["a"])(e,"data.data");t.tableConfig.tableData=Object(l["a"])(a)?a:[],t.tableConfig.pagination.totalCount=Object(s["a"])(e,"data.totalCount")||0})).catch((function(t){})).finally((function(){t.tableConfig.loading=!1}))},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()}}},d=u,g=a("2877"),f=Object(g["a"])(d,i,n,!1,null,"595414ee",null);e["default"]=f.exports},"6c09":function(t,e,a){"use strict";a("9588")},"709b":function(t,e,a){"use strict";a.r(e);a("b0c0");var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"wrapRef"},[e("el-form",{ref:"formRef",attrs:{model:t.formData,inline:!0,size:"mini",rules:t.rules}},[e("el-form-item",{attrs:{label:"集群",prop:"clusterId"}},[e("el-select",{staticClass:"w-100",attrs:{loading:t.csMixKafkaClusterLoading,placeholder:"请选择集群"},on:{change:t.getTopic},model:{value:t.formData.clusterId,callback:function(e){t.$set(t.formData,"clusterId",e)},expression:"formData.clusterId"}},t._l(t.csMixKafkaCluster,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"主题",prop:"topicName"}},[e("el-select",{attrs:{loading:t.topicListLoading,filterable:""},model:{value:t.formData.topicName,callback:function(e){t.$set(t.formData,"topicName",e)},expression:"formData.topicName"}},t._l(t.topicList,(function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.name}})})),1)],1),e("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间","value-format":"timestamp","picker-options":t.pickerOptionsStart},model:{value:t.formData.startTime,callback:function(e){t.$set(t.formData,"startTime",e)},expression:"formData.startTime"}})],1),e("el-form-item",{attrs:{label:"结束时间",prop:"endTime"}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间","value-format":"timestamp","picker-options":t.pickerOptionsEnd},model:{value:t.formData.endTime,callback:function(e){t.$set(t.formData,"endTime",e)},expression:"formData.endTime"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSearch(!1)}}},[t._v("查询")]),e("el-button",{on:{click:function(e){return t.onSearch(!0)}}},[t._v("重置")])],1)],1)],1),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],style:{height:t.tableHeight}},[t.tableData.length>0?e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%","row-class-name":t.tableRowClassName}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e("el-table-column",{attrs:{prop:"topic",label:"主题名称",width:"180"}}),e("el-table-column",{attrs:{prop:"partition",label:"分区数",width:"180"}}),e("el-table-column",{attrs:{prop:"offset",label:"偏移量"}}),e("el-table-column",{attrs:{prop:"timestamp",label:"发送时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("F_message_time")(a.row.timestamp)))])]}}],null,!1,3156718857)}),e("el-table-column",{attrs:{prop:"value",label:"消息内容"}}),e("a",{staticClass:"load-more",attrs:{slot:"append",href:"javascript:void 0"},on:{click:t.clickMore},slot:"append"},[t._v(t._s(t.hasMore?"加载更多":"没有了哟"))])],1):e("el-empty")],1)])},n=[],o=a("c7eb"),r=a("1da1"),c=a("2909"),s=a("5530"),l=(a("14d9"),a("d3b7"),a("ec41")),u=a("ff51"),d=a("9fe7"),g=a("e422"),f=a("2f7b"),p=a("1b62"),h=a("ed08"),b=p["a"].CommonSelectCreaterMix,m={name:"message-query",mixins:[b("csMixKafkaCluster")],filters:{F_message_time:function(t){return Object(h["d"])(t)}},data:function(){var t=this;return{formData:{pageSize:20,clusterId:"",startTime:null,endTime:null,topicName:""},pickerOptionsStart:{disabledDate:function(e){return!!t.formData.endTime&&e.getTime()>t.formData.endTime}},pickerOptionsEnd:{disabledDate:function(e){return!!t.formData.startTime&&e.getTime()<t.formData.startTime}},rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}],topicName:[{required:!0,message:"请选择主题",trigger:"change"}]},clusterList:[],topicList:[],topicListLoading:!1,partitionOffsets:{},count:0,tableData:[],formHeight:0,loading:!1,hasMore:!1}},computed:{wrapRef:function(){return this.$refs.wrapRef},tableHeight:function(){var t=this.formHeight||46;return this.formHeight?"calc(100% - ".concat(t,"px)"):500}},created:function(){},mounted:function(){Object(f["a"])(this.wrapRef,this.handleResize)},beforeDestroy:function(){this.wrapRef&&this.handleResize&&Object(f["b"])(this.wrapRef,this.handleResize)},methods:{handleResize:function(){var t=this.wrapRef;if(t){var e=t.getBoundingClientRect().height;this.formHeight=Math.ceil(parseFloat(e))}},load:function(){this.count+=2},clickMore:function(){var t=this,e=Object(s["a"])(Object(s["a"])({},this.formData),{},{partitionOffsets:this.partitionOffsets});this.loading=!0,Object(g["d"])(e).then((function(e){t.partitionOffsets=Object(l["a"])(e,"data.partitionOffsets");var a,i=Object(l["a"])(e,"data.messages");Object(u["a"])(i)&&i.length>0?(i[i.length-1].class="next-page",(a=t.tableData).push.apply(a,Object(c["a"])(i))):t.hasMore=!1})).catch((function(t){})).finally((function(){t.loading=!1}))},onSearch:function(t){var e=this;return Object(r["a"])(Object(o["a"])().mark((function a(){var i;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=7;break}return e.tableData=[],e.formData={pageSize:20,clusterId:"",startTime:null,endTime:null,topicName:""},e.$nextTick((function(){e.$refs.formRef.clearValidate()})),a.abrupt("return");case 7:return a.next=9,e.$refs.formRef.validate();case 9:if(i=a.sent,i){a.next=12;break}return a.abrupt("return");case 12:e.tableData=[],e.getFirst();case 14:case"end":return a.stop()}}),a)})))()},getFirst:function(){var t=this,e=Object(s["a"])({},this.formData);this.loading=!0,this.hasMore=!0,Object(g["b"])(e).then((function(e){var a,i=null!==(a=Object(l["a"])(e,"data.messages"))&&void 0!==a?a:[];i.length>0&&(i[i.length-1].class="first-page"),t.tableData=Object(u["a"])(i)?i:[],t.partitionOffsets=Object(l["a"])(e,"data.partitionOffsets")})).catch((function(t){})).finally((function(){t.loading=!1}))},getTopic:function(t){var e=this;return Object(r["a"])(Object(o["a"])().mark((function a(){var i;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.topicList=[],e.formData.topicName="",e.topicListLoading=!0,a.prev=3,a.next=6,Object(d["c"])(t);case 6:i=a.sent,e.topicList=Object(u["a"])(null===i||void 0===i?void 0:i.data)?i.data:[],a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](3);case 13:e.topicListLoading=!1;case 14:case"end":return a.stop()}}),a,null,[[3,10]])})))()},tableRowClassName:function(t){var e=t.row;t.rowIndex;return"first-page"===e.class?"first-page":"next-page"===e.class?"next-page":""}}},v=m,C=(a("f322"),a("2877")),k=Object(C["a"])(v,i,n,!1,null,"41aa7e46",null);e["default"]=k.exports},"72e5":function(t,e,a){},"823b":function(t,e,a){},9588:function(t,e,a){},"9a80":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{class:t.className,style:{height:t.height,width:t.width}})},n=[],o=(a("d81d"),a("b0c0"),a("313e")),r=a.n(o),c=a("f42c");a("817d");var s={mixins:[c["a"]],props:{className:{type:String,default:"chart"},title:String,width:{type:String,default:"100%"},height:{type:String,default:"250px"},lineData:{type:Object,default:function(){return null}}},watch:{lineData:{handler:function(t){this.initChart()},deep:!0}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var t;this.chart||(this.chart=r.a.init(this.$el,"macarons"));var e=this.lineData?this.lineData.xAxisData:[],a=[];null!==(t=this.lineData)&&void 0!==t&&t.data&&(a=this.lineData.data.map((function(t,e){var a={name:t.name,data:t.value,type:"line",smooth:!0,smoothMonotone:"x",cursor:"pointer",showSymbol:!1};return a})));var i={textStyle:{fontFamily:"Din-Light"},color:["#123dac","#73e2e2","#ff7e85","#9b52ff","#fac524","#46caff","#a1e867","#10b2b2","#ec87f7","#f4905a","#00baba","#facf24","#e89d67","#23c6c6","#fa8699","#40b7fc","#006d75","#595959","#f4764f","#a640fc","#fda23f","#2d7ae4","#5092ff","#9351ed","#8a89fe","#df89e8","#2797ff","#6ad089","#7c92e8 "],title:{text:this.title,textStyle:{fontSize:12}},tooltip:{backgroundColor:"#fff",trigger:"axis",axisPointer:{type:"none"},textStyle:{color:"#565656",lineHeight:28},confine:!0,padding:12,extraCssText:"box-shadow: 0px 2px 8px 0px #cacaca;border-radius: 4px;opacity: 0.9;max-height: 100%;",formatter:{_custom:{type:"function",display:"<span>ƒ</span> (params)"}}},grid:{left:"7%",right:"5%",top:"15%",bottom:"23%"},dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}],xAxis:{type:"category",boundaryGap:!0,data:e,axisLabel:{color:"#a0a9bc",formatter:function(t,a){return 0===a||a===e.length-1?"":t}},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{name:this.lineData.name,nameTextStyle:{color:"#242e42",fontWeight:"bold",fontSize:14,lineHeight:30},type:"value",axisLabel:{color:"#a0a9bc",margin:10,verticalAlign:"bottom",width:180,overflow:"truncate",ellipsis:"..."},splitLine:{lineStyle:{type:"dashed"}},minInterval:1,axisLine:{show:!1},axisTick:{show:!1}},series:a};this.chart.setOption(i,!0)}}},l=s,u=a("2877"),d=Object(u["a"])(l,i,n,!1,null,"11061ae1",null);e["default"]=d.exports},a494:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"g-page"},[e("search-form",{attrs:{searchConfig:t.searchModel},on:{onSearch:t.onSearch}}),e("tableView",{attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,isPage:t.tableConfig.isPage,total:t.tableConfig.pagination.totalCount,rowKey:"id",currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},changePage:t.changePage,operate:t.getIndex}}),t.visible?e("DialogThemeStatus",{attrs:{rowData:t.rowData,refresh:t.getList},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}}):t._e()],1)},n=[],o=a("5530"),r=(a("14d9"),a("d3b7"),a("159b"),function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:"主题状态详情",visible:t.visible,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[t._l(t.statusList,(function(a,i){return e("el-tag",{key:i,staticClass:"mr-20",attrs:{effect:"dark",size:"large",type:1==a.active?"success":"danger"}},[t._v(t._s(a.topicName))])})),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],2)}),c=[],s=a("ec41"),l={name:"dialog-theme-status",components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:function(){return{}}},refresh:{type:Function,required:!0,default:function(){}}},data:function(){return{}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("change",!1)}},statusList:function(){var t=Object(s["a"])(this.rowData,"topicStatusList");return null!==t&&void 0!==t?t:[]}},watch:{},created:function(){},mounted:function(){},methods:{clickCancel:function(){this.$emit("change",!1)}}},u=l,d=a("2877"),g=Object(d["a"])(u,r,c,!1,null,"7eeef029",null),f=g.exports,p=a("4714"),h=a("ff51"),b=a("1b62"),m=a("ed08"),v=b["a"].CommonSelectCreaterMix,C={name:"consumer-index",components:{DialogThemeStatus:f},mixins:[v("csMixKafkaCluster")],props:{},data:function(){var t=this,e=(this.$createElement,this);return{searchModel:{searchData:{groupId:"",clusterId:""},searchItem:[{type:"select",label:"集群",prop:"clusterId",get options(){return e.csMixKafkaCluster}},{type:"input",label:"组ID",prop:"groupId"}],rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}]}},visible:!1,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,totalCount:0},tableData:[],columns:[{prop:"groupId",label:"组ID"},{prop:"topicCount",label:"关联主题数",align:"right"},{prop:"activeTopicCount",label:"活动主题数",align:"right"},{prop:"consumerCount",label:"客户端数",align:"center",render:function(e,a){var i=a.row;return e("el-button",{attrs:{type:"text"},on:{click:function(){return t.clickClientNumber(i)}}},[i.consumerCount])}},{prop:"createDate",label:"创建时间",align:"center",format:function(t){return Object(m["d"])(t)}}],operate:{width:220,list:[{label:"主题状态详情",id:"edit"},{label:"删除",id:"delete"}]}},rowData:null}},computed:{},watch:{},created:function(){},mounted:function(){var t=this.$route.query.id,e=void 0===t?null:t;e&&(this.searchModel.searchData.clusterId=null!==e&&void 0!==e?e:"",this.getList())},methods:{onSearch:function(t){t?this.tableConfig.tableData=[]:(this.tableConfig.pagination.pageNo=1,this.getList())},getList:function(){var t=this,e=Object(o["a"])(Object(o["a"])({},this.tableConfig.pagination),{},{requestObject:this.searchModel.searchData});this.tableConfig.loading=!0,Object(p["b"])(e).then((function(e){var a=Object(s["a"])(e,"data.data");Object(h["a"])(a)&&(a.forEach((function(t){t.id=Object(s["a"])(t,"kafkaGroup.id"),t.consumerCount=Object(s["a"])(t,"kafkaGroup.consumerCount"),t.createDate=Object(s["a"])(t,"kafkaGroup.createDate"),t.groupId=Object(s["a"])(t,"kafkaGroup.groupId"),t.clusterId=Object(s["a"])(t,"kafkaGroup.clusterId")})),t.tableConfig.tableData=a),t.tableConfig.pagination.totalCount=Object(s["a"])(e,"data.totalCount")||0})).catch((function(t){})).finally((function(){t.tableConfig.loading=!1}))},getIndex:function(t){var e=this,a=(t.index,t.row),i=t.operate;"delete"===i.id?this.$confirm("确定要删除【".concat(a.groupId,"】吗?"),{type:"warning"}).then((function(){var t={clusterId:a.clusterId,groupId:a.groupId};Object(p["a"])(t).then((function(t){200===t.code&&(e.$message.success("删除成功"),e.getList())})).catch((function(t){}))})).catch((function(t){})):"edit"===i.id&&(this.rowData=a,this.visible=!0)},openAdd:function(){this.rowData=null,this.visible=!0},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()},clickClientNumber:function(t){var e=Object(s["a"])(t,"kafkaGroup.groupId"),a=Object(s["a"])(t,"kafkaGroup.clusterId");this.$router.push({path:"/kafka/clusterMonitoring/consumer-client",query:{groupId:e,clusterId:a}})}}},k=C,y=Object(d["a"])(k,i,n,!1,null,"1abc5726",null);e["default"]=y.exports},b186:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("tableView",{ref:"tableView",attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,isPage:t.tableConfig.isPage,total:t.tableConfig.pagination.total,currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize,isExpand:!0,rowKey:"id"},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},getExpandChange:t.expandRow,changePage:t.changePage},scopedSlots:t._u([{key:"expand",fn:function(a){var i=a.row;return[e("div",{staticClass:"pl-20"},[Array.isArray(i.list)?e("table",{staticClass:"custom-table w-100"},[e("thead",[i.list.length>0?e("tr",{staticClass:"p-5"},[e("th",[t._v("时间范围")]),t._l(i.list,(function(a,i){return e("th",{key:i,attrs:{align:"center"}},[t._v(" "+t._s(a.indexName)+" ")])}))],2):e("tr",{staticClass:"p-5"},[e("th",{attrs:{align:"center"}},[t._v("时间范围")]),e("th",[t._v("消息接入速率")]),e("th",[t._v("流量接入速率")]),e("th",[t._v("流量接出速率")]),e("th",[t._v("请求拒绝速率")]),e("th",[t._v("副本接入速率")]),e("th",[t._v("副本接出速率")])])]),i.list.length>0?e("tbody",[e("tr",[e("td",[t._v("1分钟")]),t._l(i.list,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v(" "+t._s(a.oneMinuteRate||0)+" ")])}))],2),e("tr",[e("td",[t._v("5分钟")]),t._l(i.list,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v(" "+t._s(a.fiveMinuteRate||0)+" ")])}))],2),e("tr",[e("td",[t._v("15分钟")]),t._l(i.list,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v(" "+t._s(a.fifteenMinuteRate||0)+" ")])}))],2)]):e("tbody",[e("tr",[e("td",[t._v("1分钟")]),t._l(6,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v("0")])}))],2),e("tr",[e("td",[t._v("5分钟")]),t._l(6,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v("0")])}))],2),e("tr",[e("td",[t._v("15分钟")]),t._l(6,(function(a,i){return e("td",{key:i,staticClass:"p-5"},[t._v("0")])}))],2)])]):t._e()])]}}])})],1)},n=[],o=(a("d81d"),a("b0c0"),a("d3b7"),a("159b"),a("ec41")),r=a("9fe7"),c=a("064a"),s=a("1b62"),l=s["a"].CommonSelectCreaterMix,u={components:{},props:{clusterId:String,activePage:String},mixins:[l(["csMixKafkaCluster"])],data:function(){var t=this;return{rowData:null,showDialog:!1,get clusterList(){return t.csMixKafkaCluster},tableConfig:{isPage:!0,loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"name",label:"主题名"},{prop:"logSize",label:"日志大小"},{prop:"capacity",label:"容量"},{prop:"topicLag",label:"阻塞数"}]}}},created:function(){},watch:{clusterId:{handler:function(){this.getList()},immediate:!0}},methods:{expandRow:function(t){var e=this,a=t.row,i=t.expandedRows;i.length>0&&Object(c["b"])({type:this.activePage,clusterId:this.clusterId,relationKey:[a.name]}).then((function(t){var i=Object(o["a"])(t,"data");e.tableConfig.tableData.forEach((function(t){t.id===a.id&&e.$set(t,"list",i)}))}))},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()},getList:function(){var t=this;if(this.clusterId){this.tableConfig.loading=!0;var e=this.tableConfig.pagination,a=e.pageNo,i=e.pageSize,n={pageNo:a,pageSize:i,requestObject:{clusterId:this.clusterId}};Object(r["d"])(n).then((function(e){var a,i=Object(o["a"])(e,"data.data");t.tableConfig.tableData=i.map((function(t){return t.list=[],t})),t.tableConfig.pagination.total=null!==(a=Object(o["a"])(e,"data.totalCount"))&&void 0!==a?a:0})).finally((function(){t.tableConfig.loading=!1}))}}}},d=u,g=(a("23d2"),a("2877")),f=Object(g["a"])(d,i,n,!1,null,"50f9b859",null);e["default"]=f.exports},b659:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-traffic"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.currentFlowLoad,expression:"currentFlowLoad"}],staticStyle:{height:"300px"}},[t.barData.yData.length>0?e("BarChart",{attrs:{"chart-data":t.barData}}):e("el-empty")],1),e("el-divider"),e("el-card",[e("div",{staticClass:"flex-inline-between",staticStyle:{"font-size":"14px"}},[e("span",[t._v("消息总量")]),e("span",[e("span",[t._v(t._s(1==t.activePage?"Broker：":"Topic："))]),e("el-select",{staticStyle:{width:"500px"},attrs:{multiple:"",placeholder:"请选择","multiple-limit":4},on:{change:t.changeBrokerCount},model:{value:t.checkedBrokerCount,callback:function(e){t.checkedBrokerCount=e},expression:"checkedBrokerCount"}},t._l(t.checkBrokerList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.relationKey,value:t.relationKey}})})),1)],1)]),e("PageBrokerLineCharts",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingCount,expression:"loadingCount"}],style:{height:"300px",width:"100%"},attrs:{"line-data":t.historyMsgCount}})],1),e("el-card",{staticClass:"mt-20"},[e("div",{staticClass:"flex-inline-between",staticStyle:{"font-size":"14px"}},[e("span",[t._v("实时消息量")]),e("span",[e("span",[t._v(t._s(1==t.activePage?"Broker：":"Topic："))]),e("el-select",{staticStyle:{width:"500px"},attrs:{multiple:"",placeholder:"请选择","multiple-limit":4},on:{change:t.changeBrokerCurrent},model:{value:t.checkedBrokerCurrent,callback:function(e){t.checkedBrokerCurrent=e},expression:"checkedBrokerCurrent"}},t._l(t.checkBrokerList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.relationKey,value:t.relationKey}})})),1)],1)]),e("PageBrokerLineCharts",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingCurrent,expression:"loadingCurrent"}],style:{height:"300px",width:"100%"},attrs:{"line-data":t.historyMsgCurrent}})],1)],1)},n=[],o=(a("99af"),a("d81d"),a("14d9"),a("b0c0"),a("b64b"),a("d3b7"),a("159b"),a("34c7")),r=a("9a80"),c=a("6481"),s=a("9fe7"),l=a("d7d7"),u=a("ec41"),d=a("ff51"),g={components:{BarChart:o["a"],PageBrokerLineCharts:r["default"]},props:{show:Boolean,clusterId:String,activePage:String},data:function(){return{currentFlowLoad:!1,barData:{name:"流量排行",xData:[],yData:[]},checkBrokerList:[],loadingCount:!1,checkedBrokerCount:[],historyMsgCount:{xAxisData:[],data:[{name:"",value:[]}]},checkedBrokerCurrent:[],loadingCurrent:!1,historyMsgCurrent:{xAxisData:[],data:[{name:"",value:[]}]}}},computed:{baseParams:function(){return{clusterId:this.clusterId,activePage:this.activePage}}},watch:{baseParams:{handler:function(){this.getBroker(),this.getTopCharts()},deep:!0,immediate:!0}},created:function(){},mounted:function(){},methods:{getTopCharts:function(){var t=this;if(this.clusterId){var e={clusterId:this.clusterId,type:this.activePage};Object(c["b"])(e).then((function(e){var a=Object(u["a"])(e,"data"),i=[],n=[];a.forEach((function(e){var a="";"1"===t.activePage?a="broker":"2"===t.activePage&&(a="topic"),i.push("".concat(a,"-").concat(e.relationKey)),n.push(e.totalSize)})),t.barData.xData=i,t.barData.yData=n}))}},getBroker:function(){if(this.clusterId){this.clusterId,this.activePage;this.checkBrokerList=[],this.checkedBrokerCount=[],this.checkedBrokerCurrent=[],"1"===this.activePage?this.getBrokerSelectOptions(this.clusterId):this.getTopicSelectOptions(this.clusterId)}},getBrokerSelectOptions:function(t){var e=this;Object(l["e"])(t).then((function(t){var a=Object(d["a"])(null===t||void 0===t?void 0:t.data)?t.data:[];e.checkBrokerList=a.map((function(t){return{relationKey:t.nodeId,id:t.id}})),a.length>0&&(e.checkedBrokerCount=[e.checkBrokerList[0].relationKey],e.checkedBrokerCurrent=[e.checkBrokerList[0].relationKey],e.getHistoryMsgCount(),e.getHistoryMsgCurrent())})).catch((function(t){}))},getTopicSelectOptions:function(t){var e=this;Object(s["c"])(t).then((function(t){var a=Object(d["a"])(null===t||void 0===t?void 0:t.data)?t.data:[];e.checkBrokerList=a.map((function(t){return{relationKey:t.name,id:t.id}})),a.length>0&&(e.checkedBrokerCount=[e.checkBrokerList[0].relationKey],e.checkedBrokerCurrent=[e.checkBrokerList[0].relationKey],e.getHistoryMsgCount(),e.getHistoryMsgCurrent())})).catch((function(t){}))},getHistoryMsgCount:function(){var t=this;if(this.clusterId&&!(!this.checkedBrokerCount.length>0)){var e={clusterId:this.clusterId,relationKey:this.checkedBrokerCount,type:this.activePage};this.loadingCount=!0,Object(c["a"])(e).then((function(e){var a=Object(u["a"])(e,"data"),i=[],n=[];Object.keys(a).forEach((function(t,e){var o=a[t].map((function(t){return 0===e&&n.push(t.recordTime),t.totalSize}));i.push({name:t,value:o})}));var o={xAxisData:n,data:i};t.historyMsgCount=o})).catch((function(t){})).finally((function(){t.loadingCount=!1}))}},getHistoryMsgCurrent:function(){var t=this;if(this.clusterId&&!(!this.checkedBrokerCurrent.length>0)){var e={clusterId:this.clusterId,relationKey:this.checkedBrokerCurrent,type:this.activePage};this.loadingCurrent=!0,Object(c["a"])(e).then((function(e){var a=Object(u["a"])(e,"data"),i=[],n=[];Object.keys(a).forEach((function(t,e){var o=a[t].map((function(t){return 0===e&&n.push(t.recordTime),t.currentSize}));i.push({name:t,value:o})}));var o={xAxisData:n,data:i};t.historyMsgCurrent=o})).catch((function(t){})).finally((function(){t.loadingCurrent=!1}))}},changeBrokerCount:function(){this.getHistoryMsgCount()},changeBrokerCurrent:function(){this.getHistoryMsgCurrent()}}},f=g,p=(a("3562"),a("2877")),h=Object(p["a"])(f,i,n,!1,null,"42e00382",null);e["default"]=h.exports},c271:function(t,e,a){},cfe7:function(t,e,a){"use strict";a("823b")},d991:function(t,e,a){"use strict";a("c271")},e69c:function(t,e,a){},f322:function(t,e,a){"use strict";a("72e5")},fc18:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("el-dialog-limit",{attrs:{title:"消费者明细",visible:t.visible,size:"medium","append-to-body":!0,"close-on-click-modal":!1},on:{close:t.clickCancel}},[e("tableView",{attrs:{loading:t.tableConfig.loading,operateObj:t.tableConfig.operate,columns:t.tableConfig.columns,tableData:t.tableConfig.tableData,isPage:t.tableConfig.isPage,total:t.tableConfig.pagination.totalCount,rowKey:"id",currentPage:t.tableConfig.pagination.pageNo,pageSize:t.tableConfig.pagination.pageSize},on:{"update:currentPage":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:current-page":function(e){return t.$set(t.tableConfig.pagination,"pageNo",e)},"update:pageSize":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},"update:page-size":function(e){return t.$set(t.tableConfig.pagination,"pageSize",e)},changePage:t.changePage}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.clickCancel}},[t._v("取消")])],1)],1)},n=[],o=a("5530"),r=(a("d3b7"),a("ec41")),c=a("ff51"),s=a("d08c"),l={name:"consumer-client-detail",components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:function(){return{}}},refresh:{type:Function,required:!0,default:function(){}}},data:function(){return{tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,totalCount:0},tableData:[],columns:[{prop:"consumerId",label:"客户端id"},{prop:"consumerHost",label:"客户端host",width:200},{prop:"topicName",label:"主题名称",width:120},{prop:"partitionId",label:"分区ID",width:120}]}}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("change",!1)}},groupId:function(){return this.$route.query.groupId},clusterId:function(){return this.$route.query.clusterId}},watch:{},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var t=this,e=Object(o["a"])(Object(o["a"])({},this.tableConfig.pagination),{},{requestObject:{clusterId:this.clusterId,groupId:this.groupId,consumerId:this.rowData.consumerId}});this.tableConfig.loading=!0,Object(s["b"])(e).then((function(e){var a=Object(r["a"])(e,"data.data");t.tableConfig.tableData=Object(c["a"])(a)?a:[],t.tableConfig.pagination.totalCount=Object(r["a"])(e,"data.totalCount")||0})).catch((function(t){})).finally((function(){t.tableConfig.loading=!1}))},changePage:function(t,e){t&&(this.tableConfig.pagination.pageNo=t),e&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=e),this.getList()},clickCancel:function(){this.$emit("change",!1)}}},u=l,d=a("2877"),g=Object(d["a"])(u,i,n,!1,null,"089fcccc",null);e["default"]=g.exports}}]);