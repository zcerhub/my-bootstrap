(window["jsonpPaas4"]=window["jsonpPaas4"]||[]).push([["app~ef620777"],{"04dd":function(e,t,a){},"04fb":function(e,t,a){},"0b47":function(e,t,a){},1473:function(e,t,a){"use strict";a("214f")},"1d5f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:"节点"+e.otherParams.clusterNodeName,visible:e.show,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":e.labelPosition,"label-width":"180px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{prop:"key"}},[t("template",{slot:"label"},[t("span",[e._v("slowlog-log-slower-than")]),t("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 如果在Redis实例的数据节点中执行一个命令，执行时间超过了slowlog-log-slower-than参数设置的阈值（单位为微秒），则会被记录到慢查询中。该参数的默认值为10000，即10ms，当Redis命令执行时间超过10ms，则生成慢查询。 ")]),t("i",{staticClass:"el-icon-info table-msg"})])],1),t("el-input",{attrs:{size:"small"},model:{value:e.form.slowlogLogSlowerThan,callback:function(t){e.$set(e.form,"slowlogLogSlowerThan",t)},expression:"form.slowlogLogSlowerThan"}})],2),t("el-form-item",{attrs:{prop:"counter"}},[t("template",{slot:"label"},[t("span",[e._v("slowlog-max-len")]),t("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" Redis记录的慢查询个数由slowlog-max-len参数的值决定，默认值为128个。当慢查询个数超过128时，会将旧的慢查询删除，记录新的慢查询。 ")]),t("i",{staticClass:"el-icon-info table-msg"})])],1),t("el-input",{attrs:{size:"small"},model:{value:e.form.slowlogMaxLen,callback:function(t){e.$set(e.form,"slowlogMaxLen",t)},expression:"form.slowlogMaxLen"}})],2),t("el-form-item",{attrs:{prop:"counter",label:"同步修改集群其它节点"}},[t("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.flag,callback:function(t){e.flag=t},expression:"flag"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},i=[],o=(a("14d9"),a("b64b"),a("d3b7"),a("159b"),a("3882")),s=a("ed08"),r={name:"hotKeyDeatil",components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},otherParams:{type:Object,default:null},refresh:Function},data:function(){return{labelPosition:"right",flag:"1",form:{slowlogLogSlowerThan:"",slowlogMaxLen:""},rules:{},loading:!1}},computed:{},watch:{},created:function(){},mounted:function(){var e=this,t=Object(s["c"])(this.rowData);Object.keys(this.form).forEach((function(a){e.form[a]=t[a]}))},methods:{clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this,t=[],a=Object(s["b"])(this.form);Object.keys(a).forEach((function(e){t.push({configKey:e,configValue:a[e]})}));var n={clusterId:this.otherParams.clusterId,clusterNodeId:this.otherParams.clusterNodeId,nodeType:this.otherParams.nodeType,flag:this.flag,redisConfigList:t};this.loading=!0,Object(o["n"])(n).then((function(t){200===t.code&&(e.$message.success("设置成功"),e.$emit("change",!1))})).finally((function(){e.loading=!1}))}}},l=r,c=a("2877"),u=Object(c["a"])(l,n,i,!1,null,"5a9f8832",null);t["default"]=u.exports},"214f":function(e,t,a){},2317:function(e,t,a){"use strict";a("04dd")},"246d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("comp-table",{ref:"compTable",attrs:{tableModel:e.tableModel,formModel:e.formModel,searchModel:e.searchModel},on:{submitHandle:e.submitInfo,editHandle:e.editInfo,delInfo:e.delInfo}})],1)},i=[],o=(a("d3b7"),a("25f0"),{filters:{},components:{},data:function(){return{tableModel:{tableData:[{cluster:"cluster1",user:"user1",partition:"北京银行支付系统",command:"无"},{cluster:"cluster1",user:"user2",partition:"杭州银行理财系统",command:"无"}],rowData:[{prop:"cluster",label:"集群名称"},{prop:"user",label:"用户名称"},{prop:"partition",label:"分区名称"},{prop:"command",label:"禁止命令"}],operateData:[{label:"修改",type:"edit",url:""},{label:"删除",type:"delete",url:""}],pagination:[]},formModel:{formData:{organization:"",provence:"",machineRoom:"",cluster:"",user:"",partition:"",command:""},formLabelWidth:"80px",formFilds:[{label:"组织",prop:"organization",type:"select",options:[{label:"文思海辉",value:"wshh"}]},{label:"省市",prop:"provence",type:"select",options:[{label:"陕西省西安市",value:"sx"}]},{label:"机房",prop:"machineRoom",type:"select",options:[{label:"城北",value:"cb"}]},{label:"集群名",prop:"cluster",type:"select",options:[{label:"cluster1",value:"cluster1"}]},{label:"用户名",prop:"user",type:"select",options:[{label:"user1",value:"user1"}]},{label:"分区",prop:"partition",type:"select",options:[{label:"北京银行支付系统",value:"bj"}]},{label:"禁止命令",prop:"command",type:"select",options:[]}],btnData:[{type:"submit",style:"primary",label:"确定"},{type:"cancle",label:"取消",style:""}],rules:{}},searchModel:{btnGroup:[{label:"新增",type:"add",style:"primary"}],formModel:{organization:""},searchFild:[{label:"组织",prop:"organization",type:"select",options:[{label:"文思海辉",value:"wshh"}]},{label:"省市",prop:"provence",type:"select",options:[{label:"陕西省西安市",value:"sx"}]},{label:"机房",prop:"machineRoom",type:"select",options:[{label:"城北",value:"cb"}]}]}}},mounted:function(){},methods:{getList:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;getList().then((function(t){e.tableModel.tableData=t.data}))})),submitInfo:function(e){},editInfo:function(e){},delInfo:function(e){}}}),s=o,r=a("2877"),l=Object(r["a"])(s,n,i,!1,null,"6e16e9d8",null);t["default"]=l.exports},"2ea4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("search-form",{attrs:{searchConfig:e.searchModel},on:{onSearch:e.onSearch}}),t("tableView",{ref:"tableView",attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,total:e.tableConfig.pagination.total,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage,operate:e.getIndex}}),e.showDialog?t("BigKeyEdit",{attrs:{rowData:e.rowData,refresh:e.getList},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e()],1)},i=[],o=a("5530"),s=(a("99af"),a("4de4"),a("7db0"),a("d81d"),a("d3b7"),a("6748")),r=a("0168"),l=a("58c6"),c=a("743a"),u=a("ff51"),d=a("ec41"),f=a("cfcc"),p=a("1b62"),h=p["a"].CommonSelectCreaterMix,g={filters:{},components:{headersearch:c["default"],BigKeyEdit:l["default"]},mixins:[h(["csMixCacheCluster"])],data:function(){var e=this,t=(this.$createElement,this);return{showDialog:!1,rowData:null,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"key",label:"Key",align:"center"},{prop:"type",label:"类型",align:"center",render:function(e,t){var a=t.row,n=Object(f["f"])(a.type,"clusterKeyOptions",["value","type"]);return e("el-tag",{attrs:{type:n,effect:"dark"},style:"width:50px"},[a.type])}},{prop:"size",label:"大小",align:"center",render:function(e,t){var a=t.row,n=f["c"].find((function(e){return e.value==a.type}));return e("span",[a.size+n.label])}}],operate:{width:220,list:[{label:"编辑",id:"details"},{label:"删除",id:"delete"}]}},nodeList:[],clusterList:[],searchModel:{searchData:{clusterId:"",clusterNodeId:"",value:""},searchItem:[{type:"select",label:"集群",prop:"clusterId",get options(){return t.csMixCacheCluster},change:function(t){t?(e.getNodeList(t),e.searchModel.searchData.clusterNodeId=""):e.nodeList=[]},width:"250px"},{type:"select",label:"节点",prop:"clusterNodeId",get options(){return t.nodeList},width:"250px"}],rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}],clusterNodeId:[{required:!0,message:"请选择节点",trigger:"change"}]}}}},mounted:function(){},methods:{getNodeList:function(e){var t=this;Object(r["d"])(e).then((function(e){var a=[];if(Object(u["a"])(null===e||void 0===e?void 0:e.data)){var n=e.data.filter((function(e){return 0===e.nodeType}));a=n.map((function(e){var t=Object(f["f"])(String(e.nodeType),"nodeTypeOptions");return{label:"".concat(e.hostIp,":").concat(e.port,"(").concat(t,")"),value:e.id}}))}t.nodeList=a})).catch((function(e){}))},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},onSearch:function(e){e?this.nodeList=[]:(this.tableConfig.pagination.currentPage=1,this.getList())},getList:function(){var e=this,t=Object(o["a"])({},this.searchModel.searchData);this.tableConfig.loading=!0,Object(s["c"])(t).then((function(t){var a=Object(d["a"])(t,"data");if(Object(u["a"])(null===t||void 0===t?void 0:t.data)){var n=e.tableConfig.pagination.pageNo,i=e.tableConfig.pagination.pageSize;e.tableConfig.tableData=a.filter((function(e,t){return t<n*i&&t>=i*(n-1)})),e.tableConfig.pagination.total=a.length}else e.tableConfig.pagination.total=0,e.tableConfig.tableData=[]})).finally((function(){e.tableConfig.loading=!1}))},getIndex:function(e){var t=this,a=(e.index,e.row),n=e.operate;"delete"===n.id?this.$confirm("确定要删除【".concat(a.key,"】吗?"),{type:"warning"}).then((function(){var e={clusterId:a.clusterId,key:a.key};Object(s["a"])(e).then((function(e){200===e.code?(t.$message.success("删除成功"),t.getList()):t.$message.error(e.msg)})).catch((function(e){}))})).catch((function(e){})):"details"===n.id&&(this.rowData=a,this.showDialog=!0)}}},m=g,b=a("2877"),v=Object(b["a"])(m,n,i,!1,null,"0ca36214",null);t["default"]=v.exports},"369a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("search-form",{attrs:{searchConfig:e.searchModel},on:{onSearch:e.onSearch,thresholdSetting:e.thresholdSetting}}),t("el-alert",{attrs:{title:"热Key分析需要将缓存实例参数配置maxmemory-policy设置为allkeys-lfu或volatile-lfu。热key分析对实例性能有一定的影响，建议不要在业务高峰期进行。",type:"warning","show-icon":""}}),t("tableView",{ref:"tableView",attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,total:e.tableConfig.pagination.total,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage,operate:e.getIndex}}),e.showDialog?t("hotKeyDeatil",{attrs:{rowData:e.rowData,refresh:e.getList},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e(),e.showSettingDialog?t("ThresholdSetting",{attrs:{rowData:e.rowData,otherParams:e.settingData,refresh:e.getList},model:{value:e.showSettingDialog,callback:function(t){e.showSettingDialog=t},expression:"showSettingDialog"}}):e._e()],1)},i=[],o=a("5530"),s=(a("99af"),a("4de4"),a("d81d"),a("d3b7"),a("e9c3")),r=a("0168"),l=a("e15c"),c=a("743a"),u=a("ec41"),d=a("ff51"),f=a("cfcc"),p=a("890d"),h=a("1b62"),g=h["a"].CommonSelectCreaterMix,m={filters:{},components:{headersearch:c["default"],hotKeyDeatil:l["default"],ThresholdSetting:p["default"]},mixins:[g(["csMixCacheCluster"])],data:function(){var e=this,t=(this.$createElement,this);return{showSettingDialog:!1,showDialog:!1,rowData:null,settingData:{clusterId:"",clusterNodeId:"",clusterNodeName:""},tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"key",label:"Key",align:"center"},{prop:"counter",label:"访问频率",align:"center",renderHeader:function(e,t){return e("span",["访问频率",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"访问频率是指在一定时间内的访问次数，且访问次数会在每个整点分钟削减一次，直至为0该条数据就查询不到了。",placement:"top"}},[e("i",{class:"el-icon-question ml-5",style:"color:#999"})])])}}],operate:{width:220,list:[{label:"详情",id:"details"},{label:"删除",id:"delete"}]}},nodeList:[],clusterList:[],searchModel:{searchData:{clusterId:"",clusterNodeId:"",value:""},searchItem:[{type:"select",label:"集群",prop:"clusterId",get options(){return t.csMixCacheCluster},change:function(t){t?(e.getNodeList(t),e.searchModel.searchData.clusterNodeId=""):e.nodeList=[]},width:"250px"},{type:"select",label:"节点",prop:"clusterNodeId",get options(){return t.nodeList},change:function(t){t&&e.getInitRedisConfig(t)},width:"250px"},{type:"button",label:"",prop:"",buttonContext:"阈值设置",eventName:"thresholdSetting"}],rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}],clusterNodeId:[{required:!0,message:"请选择节点",trigger:"change"}]}}}},mounted:function(){},methods:{getInitRedisConfig:function(e){var t=this;Object(r["b"])({clusterNodeId:e,clusterId:this.searchModel.searchData.clusterId}).then((function(e){t.rowData=Object(u["a"])(e,"data")}))},thresholdSetting:function(){this.searchModel.searchData.clusterNodeId?(this.settingData.clusterId=this.searchModel.searchData.clusterId,this.settingData.clusterNodeId=this.searchModel.searchData.clusterNodeId,this.settingData.clusterNodeName=Object(f["f"])(this.searchModel.searchData.clusterNodeId,this.nodeList),this.settingData.nodeType=Object(f["f"])(this.searchModel.searchData.clusterNodeId,this.nodeList,["value","nodeType"]),this.showSettingDialog=!0):this.$message.info("请选择集群节点")},getNodeList:function(e){var t=this;Object(r["d"])(e).then((function(e){var a=[];if(Object(d["a"])(null===e||void 0===e?void 0:e.data)){var n=e.data.filter((function(e){return 0===e.nodeType}));a=n.map((function(e){var t=Object(f["f"])(String(e.nodeType),"nodeTypeOptions");return{label:"".concat(e.hostIp,":").concat(e.port,"(").concat(t,")"),value:e.id,nodeType:e.nodeType}}))}t.nodeList=a})).catch((function(e){}))},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},onSearch:function(e){e?this.nodeList=[]:(this.tableConfig.pagination.currentPage=1,this.getList())},getList:function(){var e=this,t=Object(o["a"])({},this.searchModel.searchData);this.tableConfig.loading=!0,Object(s["b"])(t).then((function(t){var a=Object(u["a"])(t,"data");if(Object(d["a"])(null===t||void 0===t?void 0:t.data)){var n=e.tableConfig.pagination.pageNo,i=e.tableConfig.pagination.pageSize;e.tableConfig.tableData=a.filter((function(e,t){return t<n*i&&t>=i*(n-1)})),e.tableConfig.pagination.total=a.length}else e.tableConfig.pagination.total=0,e.tableConfig.tableData=[]})).finally((function(){e.tableConfig.loading=!1}))},getIndex:function(e){var t=this,a=(e.index,e.row),n=e.operate;"delete"===n.id?this.$confirm("确定要删除【".concat(a.key,"】吗?"),{type:"warning"}).then((function(){var e={clusterId:a.clusterId,key:a.key};Object(s["a"])(e).then((function(e){200===e.code?(t.$message.success("删除成功"),t.getList()):t.$message.error(e.msg)})).catch((function(e){}))})).catch((function(e){})):"details"===n.id&&(this.rowData=a,this.showDialog=!0)}}},b=m,v=a("2877"),y=Object(v["a"])(b,n,i,!1,null,"0f6f2622",null);t["default"]=y.exports},4737:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("search-form",{attrs:{searchConfig:e.searchModel},on:{onSearch:e.onSearch}}),t("tableView",{ref:"tableView",attrs:{loading:e.tableConfig.loading,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,total:e.tableConfig.pagination.total,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage}})],1)},i=[],o=a("5530"),s=(a("d3b7"),a("172f")),r=a("743a"),l=a("ff51"),c=a("ec41"),u={filters:{},components:{headersearch:r["default"]},data:function(){return{showDialog:!1,rowData:null,tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"operatorUserName",label:"用户",width:"200px"},{prop:"operateIp",label:"访问IP",width:"200px"},{prop:"requestMethod",label:"功能",width:"200px"},{prop:"description",label:"描述"},{prop:"createDate",label:"操作时间"}]},searchModel:{searchData:{userName:"",functions:""},searchItem:[{type:"input",label:"用户",prop:"operatorUserName"},{type:"input",label:"功能",prop:"requestMethod"}],rules:{}}}},mounted:function(){this.getList()},methods:{changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},onSearch:function(){this.tableConfig.pagination.currentPage=1,this.getList()},getList:function(){var e=this,t={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:Object(o["a"])({},this.searchModel.searchData)};this.tableConfig.loading=!0,Object(s["a"])(t).then((function(t){Object(l["a"])(null===t||void 0===t?void 0:t.data.data)&&(e.tableConfig.tableData=t.data.data),e.tableConfig.pagination.total=Object(c["a"])(t,"data.totalCount")||0})).finally((function(){e.tableConfig.loading=!1}))}}},d=u,f=a("2877"),p=Object(f["a"])(d,n,i,!1,null,"a4ea69a0",null);t["default"]=p.exports},5605:function(e,t,a){"use strict";a("0b47")},"58c6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:"编辑",visible:e.show,size:"medium","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.form,rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:"string"===e.dataType?24:8}},[t("el-form-item",{attrs:{label:"key",prop:"key"}},[t("span",[e._v(e._s(e.form.key))])])],1),t("el-col",{attrs:{span:"string"===e.dataType?24:8}},[t("el-form-item",{attrs:{label:"type",prop:"type"}},[t("el-tag",{attrs:{type:e.tagType,effect:"dark"}},[e._v(" "+e._s(e.form.type)+" ")])],1)],1),t("el-col",{attrs:{span:"string"===e.dataType?24:8}},[t("el-form-item",{attrs:{label:"size",prop:"size"}},[t("span",[e._v(e._s(e.form.size))])])],1)],1),e.dataType?t("el-form-item",{attrs:{label:"value",prop:"value"}},[t("BigKeyTable",{attrs:{dataType:e.dataType,data:e.form.value,rowData:e.rowData,refresh:e.getValueOne}})],1):e._e()],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},i=[],o=(a("99af"),a("7db0"),a("b64b"),a("d3b7"),a("159b"),a("6748")),s=a("cfcc"),r=a("ec41"),l=a("c6b9");function c(e){var t={id:"",key:"",type:"",size:"",value:null};return e&&Object.keys(t).forEach((function(a){t[a]=e[a]})),t}var u={name:"big-key-edit",components:{BigKeyTable:l["default"]},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function},data:function(){return{clusterKeyOptions:s["c"],labelPosition:"right",form:c(),rules:{}}},computed:{isEdit:function(){var e;return Boolean(null===(e=this.rowData)||void 0===e?void 0:e.clusterId)},dataType:function(){var e,t;return null!==(e=null===(t=this.rowData)||void 0===t?void 0:t.type)&&void 0!==e?e:""},tagType:function(){return Object(s["f"])(this.dataType,"clusterKeyOptions",["value","type"])}},watch:{},created:function(){},mounted:function(){var e=this;if(this.isEdit){Object.keys(this.form).forEach((function(t){e.form[t]=e.rowData[t]}));var t=s["c"].find((function(t){return t.value==e.rowData.type}));this.form.size="".concat(this.rowData.size).concat(t.label),this.getValueOne()}},methods:{getValueOne:function(){var e=this;Object(o["b"])({clusterId:this.rowData.clusterId,key:this.rowData.key,clusterNodeId:this.rowData.clusterNodeId}).then((function(t){e.form.value=Object(r["a"])(t,"data.value")}))},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){this.$emit("change",!1)}}},d=u,f=a("2877"),p=Object(f["a"])(d,n,i,!1,null,"2e1d1644",null);t["default"]=p.exports},"5bc36":function(e,t,a){"use strict";a("04fb")},6596:function(e,t,a){},6978:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{ref:"formRef",attrs:{model:e.formData,rules:e.rules}},[t("el-form-item",{attrs:{label:"集群/节点",prop:"clusterId"}},[t("el-cascader",{staticStyle:{width:"400px"},attrs:{props:e.props,placeholder:"请选择集群和节点"},on:{change:e.changeCluster},model:{value:e.formData.ids,callback:function(t){e.$set(e.formData,"ids",t)},expression:"formData.ids"}}),t("el-button",{staticStyle:{float:"right","margin-right":"30px"},attrs:{type:"primary"},on:{click:e.openCommand}},[e._v("支持的命令")])],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"clusterNodeId"}})],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"terminal"}),t("el-dialog-limit",{attrs:{title:"命令",visible:e.visible,size:"small","append-to-body":!0},on:{close:e.clickConfirm}},[t("el-form",{ref:"formRef",attrs:{model:e.formData,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"常规命令:"}},[t("span",[e._v("type,del,keys,exists,flushall,rename,randomkey,expire")])]),t("el-form-item",{attrs:{label:"String命令:"}},[t("span",[e._v("get,set,mset,mget,incr,strlen,getset")])]),t("el-form-item",{attrs:{label:"Hash命令:"}},[t("span",[e._v("hget,hmget,hgetall,hkeys,hset,hmset,hdel,hexists,hlen,hvals")])]),t("el-form-item",{attrs:{label:"List命令:"}},[t("span",[e._v("lindex,llen,lrange,lpush,rpush,lset,lrem,linsert,rpop,lpop")])]),t("el-form-item",{attrs:{label:"Set命令:"}},[t("span",[e._v("scard,sadd,smembers,srandmember,srem,spop,sismember")])]),t("el-form-item",{attrs:{label:"Zset命令:"}},[t("span",[e._v("zcard,zscore,zcount,zrange,zadd,zrem,zrank,zrevrange,zincrby")])])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.clickConfirm}},[e._v("确定")])],1)],1)],1)},i=[],o=(a("99af"),a("d81d"),a("e9c4"),a("d3b7"),a("0168")),s=a("9a5f"),r=a("ff51"),l=a("8121"),c=a("e8b2"),u=a("d4ec"),d=a("bee2"),f=a("ade3"),p=(a("2ca0"),a("abb2"),a("fcf3")),h=a("47d0"),g="[32m",m="[33m",b="[0m",v=function(){function e(t){var a=t.options,n=t.dom,i=t.vm;Object(u["a"])(this,e),Object(f["a"])(this,"defaultOptions",{rendererType:"canvas",fontSize:14,disableStdin:!1,scrollback:30,tabStopWidth:4,cursorStyle:"bar",cursorBlink:!0,convertEol:!0}),this.options=a,this.dom=n,this.term=null,this.currentLine=[],this.value="",this.inputStr="",this.init(),this.vm=i}return Object(d["a"])(e,[{key:"init",value:function(){var e=Object.assign({},this.defaultOptions,this.options),t=new h["FitAddon"],a=new p["Terminal"](e);a.loadAddon(t),a.open(this.dom),t.fit(),a.focus(),this.term=a,a.write("\n  ".concat(g,"输入cls 或clear清屏 , 输入时请切换至英文").concat(b,"\n")),this.watchInput()}},{key:"nextLine",value:function(){this.term.write("\r\n~$ ")}},{key:"clear",value:function(){this.term.reset(),this.term.write("\n  ".concat(g,"输入cls 或clear清屏 , 输入时请切换至英文").concat(b,"\n")),this.nextLine(),this.term.focus()}},{key:"write",value:function(e){this.term.write("\n\n  ".concat(m).concat(e).concat(b,"\n")),this.term.write("\r\n~$ ")}},{key:"close",value:function(){this.term.dispose()}},{key:"getlineValue",value:function(){return this.value}},{key:"watchInput",value:function(){var e=this;this.term._initialized||(this.term._initialized=!0,this.nextLine(),this.term.onData((function(e){})),this.term.onKey((function(t){var a=t.key,n=t.domEvent,i=!n.altKey&&!n.altGraphKey&&!n.ctrlKey&&!n.metaKey;if("Enter"===n.code){var o=e.inputStr;"clear"===o||"cls"===o?e.clear():(e.value=o,e.vm.sendCommand(o)),e.inputStr=""}else if("Space"===n.code)e.inputStr+=a,e.term.write(a);else if("Backspace"===n.code){var s=e.inputStr.substr(0,e.inputStr.length-1);e.inputStr=s,e.term.write("[2K\r"),e.term.write("~$ "+e.inputStr)}else n.code.startsWith("Arrow")||i&&(e.inputStr+=a,e.term.write(a))})))}}])}(),y={name:"ComponentName",components:{},mixins:[],props:{},data:function(){return{loading:!1,visible:!1,formData:{ids:[],get clusterId(){return Object(r["a"])(this.ids)?this.ids[0]:""},get clusterNodeId(){return Object(r["a"])(this.ids)?this.ids[1]:""}},rules:{clusterId:[{required:!0,message:"请选择集群和节点",trigger:"change"}],clusterNodeId:[{required:!0,message:"请选择集群和节点",trigger:"change"}]},props:{lazy:!0,lazyLoad:function(e,t){var a=e.level;0===a?Object(o["c"])().then((function(e){var a=Object(r["a"])(null===e||void 0===e?void 0:e.data)?e.data:[],n=a.map((function(e){return{label:e.clusterName,value:e.id}}));t(n)})):1===a&&Object(o["d"])(e.value).then((function(e){var a=Object(r["a"])(null===e||void 0===e?void 0:e.data)?e.data:[],n=a.map((function(e){return{label:"".concat(e.hostIp,":").concat(e.port),value:e.id,leaf:!0}}));t(n)})).catch((function(e){}))}},search:{name:""},connecting:!1,exterobj:"",instance:null}},computed:{},created:function(){},mounted:function(){this.instance=new v({options:{},dom:this.$refs.terminal,vm:this})},destroyed:function(){this.instance&&this.instance.close(),this.instance=null},methods:{openCommand:function(){this.visible=!0},clickConfirm:function(){this.visible=!1},sendCommand:function(e){var t=this;e&&this.$refs.formRef.validate((function(a){if(a){var n={clusterId:t.formData.clusterId,clusterNodeId:t.formData.clusterNodeId,command:e};t.loading=!0,Object(s["a"])(n).then((function(e){var a="";Object(l["a"])(e.data)?a=e.data:(Object(c["a"])(e,"data")||Object(r["a"])(e.data))&&(a=JSON.stringify(e.data,null,2)),t.instance.write(a)})).catch((function(e){t.instance.nextLine()})).finally((function(){t.loading=!1}))}}))},clickConnnect:function(){this.connecting=!this.connecting},changeCluster:function(e){this.instance.clear()}}},C=y,w=a("2877"),k=Object(w["a"])(C,n,i,!1,null,"d1f94f60",null);t["default"]=k.exports},"797e":function(e,t,a){"use strict";a("eb0f")},8427:function(e,t,a){"use strict";a.r(t);a("498a");var n=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:"密码修改",visible:e.show,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":e.labelPosition,"label-width":"100px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[t("el-input",{attrs:{disabled:"",placeholder:"请输入名称"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName","string"===typeof t?t.trim():t)},expression:"form.userName"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"userPassword"}},[t("el-input",{attrs:{"show-password":!0,type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:e.form.userPassword,callback:function(t){e.$set(e.form,"userPassword","string"===typeof t?t.trim():t)},expression:"form.userPassword"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},i=[],o=a("c7eb"),s=a("5530"),r=a("1da1"),l=(a("b64b"),a("d3b7"),a("159b"),a("0faf")),c=a("bc59");function u(e){var t={id:"",userName:"",userPassword:""};return e&&Object.keys(t).forEach((function(a){Object(c["a"])(e,a)&&(t[a]=e[a])})),t}var d={name:"AddAndEdit",components:{},model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function},data:function(){return{labelPosition:"right",form:u(),rules:{userPassword:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},computed:{isEdit:function(){var e;return Boolean(null===(e=this.rowData)||void 0===e?void 0:e.id)}},watch:{},created:function(){},mounted:function(){this.isEdit&&(this.form=u(this.rowData),this.form.userPassword="")},methods:{clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this;this.$refs.formRef.validate(function(){var t=Object(r["a"])(Object(o["a"])().mark((function t(a){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a&&(n=Object(s["a"])({},e.form),Object(l["f"])(n).then((function(t){200===t.code&&(e.$message({type:"success",message:"修改成功"}),e.$emit("change",!1),e.refresh())})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},f=d,p=(a("dcd0"),a("2877")),h=Object(p["a"])(f,n,i,!1,null,"f1d58b54",null);t["default"]=h.exports},"890d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:"节点"+e.otherParams.clusterNodeName,visible:e.show,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":e.labelPosition,"label-width":"180px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{prop:"key"}},[t("template",{slot:"label"},[t("span",[e._v("lfu-decay-time")]),t("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 衰减因子 访问频率为衰减因子为1的情况下，N分钟没有访问，就要减N ")]),t("i",{staticClass:"el-icon-info table-msg"})])],1),t("el-input",{attrs:{size:"small"},model:{value:e.form.lfuDecayTime,callback:function(t){e.$set(e.form,"lfuDecayTime",t)},expression:"form.lfuDecayTime"}})],2),t("el-form-item",{attrs:{prop:"counter"}},[t("template",{slot:"label"},[t("span",[e._v("lfu-log-factor")]),t("el-tooltip",{attrs:{effect:"dark",placement:"top-start"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("概率因子")]),t("i",{staticClass:"el-icon-info table-msg"})])],1),t("el-input",{attrs:{size:"small"},model:{value:e.form.lfuLogFactor,callback:function(t){e.$set(e.form,"lfuLogFactor",t)},expression:"form.lfuLogFactor"}})],2),t("el-form-item",{attrs:{prop:"counter",label:"同步修改集群其它节点"}},[t("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.flag,callback:function(t){e.flag=t},expression:"flag"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},i=[],o=(a("14d9"),a("b64b"),a("d3b7"),a("159b"),a("3882")),s=a("0168"),r=a("ec41"),l=a("ed08"),c={name:"hotKeyDeatil",components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},otherParams:{type:Object,default:null},refresh:Function},data:function(){return{loading:!1,labelPosition:"right",flag:"1",form:{lfuDecayTime:"",lfuLogFactor:""},rules:{}}},computed:{},watch:{},created:function(){},mounted:function(){var e=this,t=Object(l["c"])(this.rowData);Object.keys(this.form).forEach((function(a){e.form[a]=t[a]}))},methods:{getInitRedisConfig:function(){var e=this;Object(s["b"])({clusterNodeId:this.otherParams.clusterNodeId,clusterId:this.otherParams.clusterId}).then((function(t){e.rowData=Object(r["a"])(t,"data")}))},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this,t=[],a=Object(l["b"])(this.form);Object.keys(a).forEach((function(e){t.push({configKey:e,configValue:a[e]})}));var n={clusterId:this.otherParams.clusterId,clusterNodeId:this.otherParams.clusterNodeId,flag:this.flag,redisConfigList:t,nodeType:this.otherParams.nodeType};this.loading=!0,Object(o["n"])(n).then((function(t){200===t.code&&(e.$message.success("设置成功"),e.getInitRedisConfig(),e.$emit("change",!1))})).finally((function(){e.loading=!1})),this.refresh()}}},u=c,d=a("2877"),f=Object(d["a"])(u,n,i,!1,null,"f431e77e",null);t["default"]=f.exports},"8ea3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("comp-table",{ref:"compTable",attrs:{tableModel:e.tableModel,formModel:e.formModel,searchModel:e.searchModel},on:{submitHandle:e.submitInfo,editHandle:e.editInfo,delInfo:e.delInfo}})],1)},i=[],o=(a("d3b7"),a("25f0"),{filters:{},components:{},data:function(){return{tableModel:{tableData:[{partitionName:"北京银行支付系统",keyprefix:"dsdedsd"},{partitionName:"北京银行支付系统",keyprefix:"dsdedsd"}],rowData:[{prop:"partitionName",label:"分区名"},{prop:"keyprefix",label:"key前缀"}],operateData:[{label:"修改",type:"edit",url:""},{label:"删除",type:"delete",url:""}],pagination:[]},formModel:{formData:{partitionName:"",keyprefix:""},formLabelWidth:"80px",formFilds:[{label:"分区名",prop:"partitionName",type:"input"},{label:"key前缀",prop:"keyprefix",type:"input"}],btnData:[{type:"submit",style:"primary",label:"确定"},{type:"cancle",label:"取消",style:""}],rules:{}},searchModel:{btnGroup:[{label:"新增",type:"add",style:"primary"}],formModel:{},searchFild:[]}}},mounted:function(){},methods:{getList:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;getList().then((function(t){e.tableModel.tableData=t.data}))})),submitInfo:function(e){},editInfo:function(e){},delInfo:function(e){}}}),s=o,r=a("2877"),l=Object(r["a"])(s,n,i,!1,null,"1d64c3ba",null);t["default"]=l.exports},"9ab9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("search-form",{attrs:{searchConfig:e.searchModel},on:{onSearch:e.onSearch,thresholdSetting:e.thresholdSetting}}),t("tableView",{ref:"tableView",attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,total:e.tableConfig.pagination.total,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage}}),e.showDialog?t("ThresholdSetting",{attrs:{rowData:e.rowData,otherParams:e.clusterParams,refresh:e.getList},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e()],1)},i=[],o=a("5530"),s=(a("99af"),a("4de4"),a("d81d"),a("d3b7"),a("74c5")),r=a("cfcc"),l=a("0168"),c=a("ec41"),u=a("ff51"),d=a("1d5f"),f=a("1b62"),p=f["a"].CommonSelectCreaterMix,h={filters:{},components:{ThresholdSetting:d["default"]},mixins:[p(["csMixCacheCluster"])],data:function(){var e=this,t=this;return{clusterList:[],nodeList:[],showDialog:!1,rowData:null,clusterParams:{clusterId:"",clusterNodeId:"",clusterNodeName:"",nodeType:""},tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"node",label:"节点",align:"center"},{prop:"type",label:"类型",align:"center"},{prop:"command",label:"命令",align:"center"},{prop:"executionTime",label:"执行时长",align:"center"},{prop:"dateTime",label:"执行时间",align:"center"}],operate:{width:220,list:[]}},searchModel:{searchData:{clusterId:"",clusterNodeId:""},searchItem:[{type:"select",label:"集群",prop:"clusterId",get options(){return t.csMixCacheCluster},change:function(t){t?(e.getNodeList(t),e.searchModel.searchData.clusterNodeId=""):e.nodeList=[]}},{type:"select",label:"节点",prop:"clusterNodeId",get options(){return t.nodeList},change:function(t){t&&e.getInitRedisConfig(t)}},{type:"button",label:"",prop:"",buttonContext:"阈值设置",eventName:"thresholdSetting"}],rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}],clusterNodeId:[{required:!0,message:"请选择节点",trigger:"change"}]}}}},mounted:function(){},methods:{getInitRedisConfig:function(e){var t=this;Object(l["b"])({clusterNodeId:e,clusterId:this.searchModel.searchData.clusterId}).then((function(e){t.rowData=Object(c["a"])(e,"data")}))},thresholdSetting:function(){this.searchModel.searchData.clusterNodeId?(this.showDialog=!0,this.clusterParams.clusterId=this.searchModel.searchData.clusterId,this.clusterParams.clusterNodeId=this.searchModel.searchData.clusterNodeId,this.clusterParams.clusterNodeName=Object(r["f"])(this.searchModel.searchData.clusterNodeId,this.nodeList),this.clusterParams.nodeType=Object(r["f"])(this.searchModel.searchData.clusterNodeId,this.nodeList,["value","nodeType"])):this.$message.info("请选择集群节点")},getNodeList:function(e){var t=this;Object(l["d"])(e).then((function(e){var a=[];if(Object(u["a"])(null===e||void 0===e?void 0:e.data)){var n=e.data.filter((function(e){return 0===e.nodeType}));a=n.map((function(e){var t=Object(r["f"])(String(e.nodeType),"nodeTypeOptions");return{label:"".concat(e.hostIp,":").concat(e.port,"(").concat(t,")"),value:e.id,nodeType:e.nodeType}}))}t.nodeList=a})).catch((function(e){}))},onSearch:function(e){e?this.nodeList=[]:(this.tableConfig.pagination.pageNo=1,this.getList())},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},getList:function(){var e=this,t=Object(o["a"])({},this.searchModel.searchData);Object(s["a"])(t).then((function(t){var a=Object(c["a"])(t,"data");if(Object(u["a"])(null===t||void 0===t?void 0:t.data)){var n=e.tableConfig.pagination.pageNo,i=e.tableConfig.pagination.pageSize;e.tableConfig.tableData=a.filter((function(e,t){return t<n*i&&t>=i*(n-1)})),e.tableConfig.pagination.total=a.length}else e.tableConfig.pagination.total=0,e.tableConfig.tableData=[]}))}}},g=h,m=a("2877"),b=Object(m["a"])(g,n,i,!1,null,"780e2599",null);t["default"]=b.exports},a781:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-container"},[t("div",{staticClass:"name-container"},[t("search-form",{attrs:{searchConfig:e.searchConfig},on:{onSearch:e.onSearch}}),t("button-list",{attrs:{data:e.buttonList}}),t("tableView",{ref:"tableView",attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,total:e.tableConfig.pagination.totalCount,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage,operate:e.getIndex}}),e.showDialog?t("AddAndEdit",{attrs:{rowData:e.rowData,refresh:e.getList},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}}):e._e(),e.showPasswordDialog?t("PasswordEdit",{attrs:{rowData:e.rowData,refresh:e.getList},model:{value:e.showPasswordDialog,callback:function(t){e.showPasswordDialog=t},expression:"showPasswordDialog"}}):e._e()],1)])},i=[],o=(a("d81d"),a("d3b7"),a("498a"),function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:e.isEdit?"编辑":"新增",visible:e.show,size:"medium","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.form,rules:e.rules}},[t("el-row",{attrs:{gutter:30}},[t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{label:"集群名称",prop:"clusterId"}},[t("el-select",{staticClass:"w-100",attrs:{disabled:e.isEdit,placeholder:"请选择"},model:{value:e.form.clusterId,callback:function(t){e.$set(e.form,"clusterId",t)},expression:"form.clusterId"}},e._l(e.clusterOptions,(function(e){return t("el-option",{key:e.id,attrs:{label:e.clusterName,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[t("el-input",{attrs:{disabled:e.isEdit,placeholder:"请输入名称"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName","string"===typeof t?t.trim():t)},expression:"form.userName"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"userPassword"}},[t("el-input",{attrs:{type:"password","show-password":!0,autocomplete:"off",placeholder:"请输入名称"},model:{value:e.form.userPassword,callback:function(t){e.$set(e.form,"userPassword","string"===typeof t?t.trim():t)},expression:"form.userPassword"}})],1),t("el-form-item",{attrs:{label:"状态",prop:"userStatus"}},[t("el-radio-group",{model:{value:e.form.userStatus,callback:function(t){e.$set(e.form,"userStatus",t)},expression:"form.userStatus"}},e._l(e.cacheUserStatusOptions,(function(a){return t("el-radio",{key:a.value,attrs:{label:a.value}},[e._v(e._s(a.label))])})),1)],1),t("el-form-item",{attrs:{label:"条件key",prop:"cacheKey"}},[t("el-input",{attrs:{placeholder:"请输入KEY"},model:{value:e.form.cacheKey,callback:function(t){e.$set(e.form,"cacheKey","string"===typeof t?t.trim():t)},expression:"form.cacheKey"}})],1)],1),t("el-col",{attrs:{span:13}},[t("el-form-item",{attrs:{label:"","label-width":"0px",prop:"checkedAuthOptions"}},[t("div",{staticClass:"check-group"},[t("div",[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("所有权限类型")])],1),t("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.form.checkedAuthOptions,callback:function(t){e.$set(e.form,"checkedAuthOptions",t)},expression:"form.checkedAuthOptions"}},e._l(e.cacheAuthOptions,(function(a){return t("el-checkbox",{key:a,attrs:{label:a}},[e._v(" "+e._s(a)+" ")])})),1)],1)])],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)}),s=[],r=a("5530"),l=(a("a15b"),a("b64b"),a("159b"),a("0faf")),c=a("cfcc"),u=a("5c8a"),d=a("bc59"),f=a("8121"),p="+@all",h={name:"AddAndEdit",components:{},model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function},data:function(){return{loading:!1,cacheUserStatusOptions:c["b"],passVisible:!1,clusterOptions:[],checkAll:!1,cacheAuthOptions:Object(u["a"])(c["a"]),labelPosition:"right",form:g(),rules:{clusterId:[{required:!0,message:"请选择集群",trigger:"change"}],userName:[{required:!0,message:"请输入用户名",trigger:"change"}],userPassword:[{required:!0,message:"请输入密码",trigger:"change"}],checkedAuthOptions:[{type:"array",required:!0,message:"请选择权限类型",trigger:"change"}],cacheKey:[{required:!1,message:"请填写条件key",trigger:"change"}]}}},computed:{isEdit:function(){var e;return Boolean(null===(e=this.rowData)||void 0===e?void 0:e.id)},isIndeterminate:function(){var e=this.form.checkedAuthOptions,t=e.length>0,a=e.length<c["a"].length;return t&&a}},watch:{},created:function(){},mounted:function(){this.isEdit&&(this.form=g(this.rowData),this.rowData.commands==p&&(this.checkAll=!0)),this.getUserCluster()},methods:{getUserCluster:function(){var e=this;Object(l["c"])().then((function(t){e.clusterOptions=t.data}))},handleCheckAllChange:function(e){this.form.checkedAuthOptions=e?c["a"]:[]},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===c["a"].length},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},clickConfirm:function(){var e=this;this.$refs.formRef.validate((function(t){if(t){var a=e.form.checkedAuthOptions.map((function(e){return"+@".concat(e)})).join(","),n=Object(r["a"])(Object(r["a"])({},e.form),{},{commands:e.checkAll?p:a});delete n.checkedAuthOptions,e.loading=!0,e.isEdit?Object(l["e"])(n).then((function(t){e.$message({type:"success",message:t.msg}),e.$emit("change",!1),e.refresh()})).finally((function(){e.loading=!1})):(delete n.id,Object(l["a"])(n).then((function(t){e.$message({type:"success",message:t.msg}),e.$emit("change",!1),e.refresh()})).finally((function(){e.loading=!1})))}}))}}};function g(e){var t={id:"",clusterId:"",userName:"",userPassword:"",userStatus:"1",cacheKey:"",checkedAuthOptions:[]};return e&&Object.keys(t).forEach((function(a){"checkedAuthOptions"==a?t[a]=m(e.commands):Object(d["a"])(e,a)&&(t[a]=e[a])})),t}function m(e){return Object(f["a"])(e)?e===p?Object(u["a"])(c["a"]):e.split(",").map((function(e){return e.split("+@")[1]})):[]}var b=h,v=(a("1473"),a("2877")),y=Object(v["a"])(b,o,s,!1,null,"ec7b747a",null),C=y.exports,w=a("8427"),k=a("ff51"),O=a("ec41"),D={filters:{},components:{AddAndEdit:C,PasswordEdit:w["default"]},data:function(){this.$createElement;var e=this;return{clusterList:[],showDialog:!1,showPasswordDialog:!1,buttonList:[{label:"新增",type:"add",click:this.addInfo}],tableConfig:{loading:!1,pagination:{pageNo:1,pageSize:10,total:0},tableData:[],columns:[{prop:"clusterName",label:"集群名称",align:"center"},{prop:"userName",label:"用户名",align:"center"},{prop:"userStatus",label:"状态",align:"center",render:function(e,t){var a=t.row;return e("span",["1"===a.userStatus?"启用":"停用"])}},{prop:"cacheKey",label:"key",align:"center"}],operate:{width:220,list:[{label:"编辑",id:"edit"},{label:"密码修改",id:"editPassword"},{label:"删除",id:"delete"}]}},searchConfig:{searchData:{clusterId:"",userName:"",userStatus:""},searchItem:[{type:"select",label:"集群名称",prop:"clusterId",get options(){return e.clusterList}},{type:"input",label:"用户名",prop:"userName"},{type:"select",label:"状态",prop:"userStatus",options:c["b"]}],rules:{}}}},mounted:function(){this.getList(),this.getUserCluster()},methods:{getUserCluster:function(){var e=this;Object(l["c"])().then((function(t){var a=[];Object(k["a"])(null===t||void 0===t?void 0:t.data)&&(a=t.data.map((function(e){return{label:e.clusterName,value:e.id}}))),e.clusterList=a}))},getList:function(){var e=this,t={pageNo:this.tableConfig.pagination.pageNo,pageSize:this.tableConfig.pagination.pageSize,requestObject:this.searchConfig.searchData};this.tableConfig.loading=!0,Object(l["d"])(t).then((function(t){var a,n=Object(O["a"])(t,"data.data");e.tableConfig.tableData=Object(k["a"])(n)?n:[],e.tableConfig.pagination.totalCount=null!==(a=Object(O["a"])(t,"data.totalCount"))&&void 0!==a?a:0})).finally((function(){e.tableConfig.loading=!1}))},addInfo:function(){this.showDialog=!0,this.rowData=null},onSearch:function(){this.tableConfig.pagination.pageNo=1,this.getList()},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},getIndex:function(e){var t=this,a=(e.index,e.row),n=e.operate;"delete"===n.id?this.$confirm("确定要删除【".concat(a.userName,"】吗?"),{type:"warning"}).then((function(){Object(l["b"])(a.id).then((function(e){t.$message.success("删除成功"),t.getList()})).catch((function(e){}))})).catch((function(e){})):"edit"===n.id?(this.rowData=a,this.showDialog=!0):"editPassword"===n.id&&(this.rowData=a,this.showPasswordDialog=!0)}}},j=D,x=Object(v["a"])(j,n,i,!1,null,"bb42682a",null);t["default"]=x.exports},ace9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{class:e.className,style:{height:e.height,width:e.width}})},i=[],o=a("313e"),s=a.n(o),r=a("f42c"),l=a("a1a3");a("817d");var c={mixins:[r["a"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},options:{type:Object,default:function(){return{}}}},data:function(){return{chart:null,initOptions:{color:["#67C23A","#F56C6C","#1d70f5"],title:{top:20,textStyle:{fontWeight:"normal",fontSize:12},left:"4%"},tooltip:{trigger:"axis"},legend:{data:[]},grid:{left:"5%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},series:[]}}},computed:{currentOptions:function(){return Object(l["a"])(this.initOptions,this.options)}},watch:{options:{handler:function(e,t){this.chart&&(this.chart.setOption(this.currentOptions),this.chart.resize())},deep:!0,immediate:!0}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=s.a.init(this.$el,"macarons"),this.chart.setOption(this.currentOptions)}}},u=c,d=a("2877"),f=Object(d["a"])(u,n,i,!1,null,null,null);t["default"]=f.exports},bb48:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-row",e._l(e.list,(function(a,n){return t("el-col",{key:n,attrs:{span:6}},[t("div",{staticClass:"top-box"},[a.icon?t("i",{staticClass:"top-icon",class:a.icon}):e._e(),t("img",{attrs:{src:a.src,alt:"",width:"35"}}),t("ul",[t("li",{staticClass:"top-item-value",style:{color:a.color}},[e._v(" "+e._s(e.topData[a.value])+" ")]),t("li",{staticClass:"top-item-label"},[e._v(e._s(a.label))])])])])})),1),e.clusterList.length>0?t("el-row",{attrs:{gutter:15}},e._l(e.clusterList,(function(a){return t("el-col",{key:a.id,staticClass:"mb-20",attrs:{span:6}},[t("div",{staticClass:"item-card"},[0===a.clusterMonitorStatus?t("el-tag",{staticClass:"item-card-status",attrs:{type:"success",effect:"dark"}},[e._v("正常")]):1===a.clusterMonitorStatus?t("el-tag",{staticClass:"item-card-status",attrs:{type:"danger",effect:"dark"}},[e._v("异常")]):2===a.clusterMonitorStatus||null===a.clusterMonitorStatus?t("el-tag",{staticClass:"item-card-status",attrs:{type:"warning",effect:"dark"}},[e._v("告警")]):t("el-tag",{staticClass:"item-card-status",attrs:{type:"info",effect:"dark"}},[e._v("未知")]),t("header",[t("span",{staticClass:"item-title",attrs:{title:a.clusterName}},[e._v(e._s(a.clusterName))])]),t("el-descriptions",{staticStyle:{padding:"15px"},attrs:{column:1,labelStyle:{width:"80px",color:"#999"}}},[t("el-descriptions-item",{attrs:{label:"集群模式"}},[e._v(e._s(e._f("F_cache_clusterTypeOptions")(a.clusterType))+" ")]),t("el-descriptions-item",{attrs:{label:"主节点"}},[e._v(e._s(a.masterNodes))]),t("el-descriptions-item",{attrs:{label:"节点总数"}},[e._v(e._s(a.totalNodes))]),t("el-descriptions-item",{attrs:{label:"运行节点数"}},[e._v(e._s(a.runNodeNum))]),t("el-descriptions-item",{attrs:{label:"Redis版本"}},[e._v(e._s(a.redisVersion)+" ")]),t("el-descriptions-item",{attrs:{label:"总连接数"}},[e._v(e._s(a.totalClient)+" ")]),0==a.clusterType||2==a.clusterType?t("el-descriptions-item",{attrs:{label:"总机器数"}},[e._v(e._s(a.totalHost)+" ")]):e._e(),0==a.clusterType||2==a.clusterType?t("el-descriptions-item",{attrs:{label:"总内存大小"}},[e._v(e._s(a.totalMoney)+" ")]):e._e()],1)],1)])})),1):t("el-empty")],1)},i=[],o=a("c7eb"),s=a("b85c"),r=a("1da1"),l=(a("14d9"),a("b64b"),a("d3b7"),a("159b"),a("c265")),c=a("ec41"),u=a("2eb5"),d=a("bc59"),f=a("c88b"),p={name:"cache-cluster-monitor",components:{},mixins:[],props:{},data:function(){return{list:[{label:"Redis集群",src:a("e796"),value:"jqs",color:"#409eff"},{label:"正常集群",src:a("e18b"),value:"zcjq",color:"#67c23a"},{label:"异常集群",src:a("1fe8"),value:"ycjq",color:"#f56c6c"},{label:"告警集群",src:a("84b1"),value:"gjjq",color:"#e6a23c"}],topData:h(),clusterList:[],loading:!1}},computed:{},watch:{},created:function(){this.getData()},mounted:function(){},methods:{getData:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,n,i,r,d,f;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(l["a"])().finally((function(){e.loading=!1}));case 3:a=t.sent,n=Object(c["a"])(a,"data.clusterList",[]),i=Object(s["a"])(n);try{for(i.s();!(r=i.n()).done;)d=r.value,Object(u["a"])(d.runNodeNum)&&(d.runNodeNum="-")}catch(o){i.e(o)}finally{i.f()}e.clusterList=n,f=Object(c["a"])(a,"data.ctd"),e.topData=h(f);case 10:case"end":return t.stop()}}),t)})))()},routelink:function(e){this.$router.push({path:"/cache-cluster-monitor/node-monitor",query:{id:e.id,clusterName:e.clusterName}})}}};function h(e){var t={gjjq:"-",jqs:"-",ycjq:"-",zcjq:"-"};if(e){Object.keys(t).forEach((function(a){Object(d["a"])(e,a)&&!Object(u["a"])(e[a])&&(t[a]=e[a])}));var a=e.jqs-e.zcjq-e.ycjq;Object(f["a"])(a)&&(t.gjjq=a)}return t}var g=p,m=(a("797e"),a("2877")),b=Object(m["a"])(g,n,i,!1,null,"fdb04ce6",null);t["default"]=b.exports},c6b9:function(e,t,a){"use strict";a.r(t);a("498a");var n=function(){var e=this,t=e._self._c;return t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[e.indexTile?t("el-table-column",{attrs:{align:"center",label:e.indexTile,width:"80",prop:"key"}}):e._e(),t("el-table-column",{attrs:{label:"值"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[n.edit?[t("el-input",{staticClass:"edit-input",attrs:{type:"textarea",autosize:""},model:{value:n.value,callback:function(t){e.$set(n,"value","string"===typeof t?t.trim():t)},expression:"row.value"}}),t("el-button",{staticClass:"cancel-btn",attrs:{type:"text"},on:{click:function(t){return e.cancelEdit(n)}}},[e._v(" 取消 ")])]:t("span",[e._v(e._s(n.oldValue))])]}}])}),t("el-table-column",{attrs:{align:"center",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.row;return[n.edit?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.confirmEdit(n)}}},[e._v(" 保存 ")]):t("el-button",{attrs:{type:"text"},on:{click:function(e){n.edit=!n.edit}}},[e._v(" 编辑 ")]),"string"!==e.dataType?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.clickDelete(n)}}},[e._v(" 删除 ")]):e._e()]}}])})],1)},i=[],o=(a("caad"),a("d81d"),a("4fad"),a("0168")),s=a("ff51"),r=a("e8b2"),l=a("070e"),c={name:"big-key-table",filters:{},props:{dataType:{type:String,default:""},data:[Array,Object,String],rowData:{type:Object,default:null},refresh:Function},data:function(){return{list:[],listLoading:!1}},computed:{indexTile:function(){return["list","zset"].includes(this.dataType)?"序号":"hash"===this.dataType?"键":"set"===this.dataType?"":null}},watch:{data:{handler:function(e){this.list=[],this.convert_data(e)},immediate:!0,deep:!0}},created:function(){},mounted:function(){},methods:{convert_data:function(e){var t=this.dataType,a=[];"list"===t&&Object(s["a"])(e)?a=e.map((function(e,t){return{key:t,value:e,edit:!1,oldValue:e}})):"zset"===t&&Object(s["a"])(e)?a=e.map((function(e,t){return{key:e.score,value:e.element,edit:!1,oldValue:e.element}})):"hash"===t&&Object(r["a"])(e)?a=Object.entries(e).map((function(e){return{key:e[0],value:e[1],edit:!1,oldValue:e[1]}})):"set"===t&&Object(s["a"])(e)?a=e.map((function(e,t){return{key:t,value:e,edit:!1,oldValue:e}})):"string"===t&&(a=[{key:0,value:e,edit:!1,oldValue:e}]),this.list=a},cancelEdit:function(e){e.value=e.oldValue,e.edit=!1},confirmEdit:function(e){var t=this;this.$confirm("确定要保存吗?",{type:"warning"}).then((function(){e.edit=!1;var a=Object(l["a"])(t.rowData,["clusterId","clusterNodeId","key","type"]);a.oldValue=e.oldValue,a.newValue=e.value,["list","hash","zset"].includes(t.dataType)&&(a.field=e.key),Object(o["e"])(a).then((function(e){200===e.code&&(t.$message.success("保存成功"),t.refresh())})).catch((function(e){}))})).catch((function(e){}))},clickDelete:function(e){var t=this;this.$confirm("确定要删除【".concat(e.value,"】吗?"),{type:"warning"}).then((function(){var a=Object(l["a"])(t.rowData,["clusterId","clusterNodeId","key","type"]);a.oldValue=e.oldValue,["list","hash"].includes(t.dataType)&&(a.field=e.key),Object(o["a"])(a).then((function(e){200===e.code&&(t.$message.success("删除成功"),t.refresh())})).catch((function(e){}))})).catch((function(e){}))}}},u=c,d=(a("5bc36"),a("2877")),f=Object(d["a"])(u,n,i,!1,null,"2be0df79",null);t["default"]=f.exports},dca7:function(e,t,a){"use strict";a.r(t);a("99af");var n=function(){var e=this,t=e._self._c;return t("div",[t("header",{staticClass:"title-cluster-name mb-20"},[t("el-form",{ref:"formRef",attrs:{model:e.formData,rules:e.rules}},[t("el-form-item",{attrs:{label:"集群/节点",prop:"clusterId"}},[t("el-cascader",{ref:"clusterRef",staticStyle:{width:"400px"},attrs:{props:e.props,placeholder:"请选择集群和节点"},on:{change:e.changeCluster},model:{value:e.formData.ids,callback:function(t){e.$set(e.formData,"ids",t)},expression:"formData.ids"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"clusterNodeId"}})],1)],1),e.formData.clusterNodeId?t("main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("el-row",e._l(e.topList,(function(a,n){return t("el-col",{key:n,attrs:{span:6}},[t("header-line",[e._v(e._s(a.title))]),t("div",{staticClass:"top-box"},[a.iconClass?t("svg-icon",{staticClass:"top-icon",attrs:{iconClass:a.iconClass}}):e._e(),a.list?t("ul",{staticClass:"item-list-ul"},e._l(a.list,(function(i,o){return t("li",{key:"".concat(n,"-").concat(o)},[t("span",{staticClass:"item-list-label"},[e._v(e._s(i.title))]),t("span",{staticClass:"item-list-value"},[e._v(e._s(e.nodeInfo[a.valueKey][i.valueKey]))])])})),0):t("ul",{staticClass:"item-value"},[t("li",[e._v(e._s(e.nodeInfo[a.valueKey]))])])],1)],1)})),1),t("header-line",[e._v("内存占用")]),t("NodeMonitorCharts",{attrs:{options:e.chartMemory}}),t("header-line",[e._v("客户端连接数")]),t("NodeMonitorCharts",{attrs:{options:e.chartConnect}}),t("header-line",[e._v("命中数/未命中数 ")]),t("NodeMonitorCharts",{attrs:{options:e.chartHit}})],1):t("el-empty",{attrs:{description:""}})],1)},i=[],o=a("d4ec"),s=a("bee2"),r=a("ade3"),l=a("5530"),c=(a("d81d"),a("14d9"),a("b64b"),a("d3b7"),a("159b"),a("c265")),u=a("0168"),d=a("ace9"),f=a("ff51"),p=a("e8b2"),h=a("bc59"),g={name:"cache-node-monitor",components:{NodeMonitorCharts:d["default"]},mixins:[],props:{},data:function(){return Object(r["a"])({formData:{ids:[],get clusterId(){return Object(f["a"])(this.ids)?this.ids[0]:""},get clusterNodeId(){return Object(f["a"])(this.ids)?this.ids[1]:""}},rules:{clusterId:[{required:!0,message:"请选择集群和节点",trigger:"change"}],clusterNodeId:[{required:!0,message:"请选择集群和节点",trigger:"change"}]},props:{lazy:!0,lazyLoad:function(e,t){var a=e.level;0===a?Object(u["c"])().then((function(e){var a=Object(f["a"])(null===e||void 0===e?void 0:e.data)?e.data:[],n=a.map((function(e){return{label:e.clusterName,value:e.id,leaf:!1}}));t(n)})):1===a&&Object(u["d"])(e.value).then((function(e){var a=Object(f["a"])(null===e||void 0===e?void 0:e.data)?e.data:[],n=a.map((function(e){return Object(l["a"])(Object(l["a"])({},e),{},{label:"".concat(e.hostIp,":").concat(e.port),value:e.id,leaf:!0})}));t(n)})).catch((function(e){}))}},loading:!1,topList:[{title:"内存峰值",iconClass:"clusterConfiguration",valueKey:"nmdto",list:[{title:"内存消耗峰值",valueKey:"peakMemory"},{title:"最大配置内存",valueKey:"osMemory"},{title:"操作系统内存",valueKey:"configMemory"}]},{title:"主从同步失败率",iconClass:"clusterConfiguration",valueKey:"nmfsdto",list:[{title:"主从同步成功次数",valueKey:"syncPartialOk",color:"green"},{title:"主从同步失败次数",valueKey:"syncPartialErr",color:"red"}]},{title:"执行命令总数",iconClass:"clusterConfiguration",valueKey:"commandTotal"},{title:"Key总数",iconClass:"clusterConfiguration",valueKey:"evictedKeys"}],chartMemory:{title:{text:"M"},xAxis:{data:[]},series:[{name:"内存占用",type:"line",data:[],smooth:!1}]},chartConnect:{title:{text:""},xAxis:{data:[]},series:[{name:"客户端连接数",type:"line",data:[],smooth:!1}]},chartHit:{title:{text:""},xAxis:{data:[]},legend:{data:["命中数","未命中数"]},series:[Object(r["a"])(Object(r["a"])({name:"命中数",type:"line",data:[]},"data",[]),"smooth",!1),Object(r["a"])(Object(r["a"])({name:"未命中数",type:"line",data:[]},"data",[]),"smooth",!1)]},nodeId:"",clusterNodeList:[],nodeInfo:m()},"loading",!1)},computed:{},watch:{},created:function(){},mounted:function(){},methods:{changeCluster:function(e){var t=this,a=this.$refs.clusterRef.getCheckedNodes(!0),n=null;a&&a.length>0&&(n=a[0].data),n&&Object(p["a"])(n)&&(this.loading=!0,Object(c["b"])(n).then((function(e){var a;t.nodeInfo=m(e.data);var n=new b(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.nodeMonitorList);t.chartMemory.xAxis.data=n.chartMemoryGet.x,t.chartMemory.series[0].data=n.chartMemoryGet.y,t.chartConnect.xAxis.data=n.chartConnect.x,t.chartConnect.series[0].data=n.chartConnect.y,t.chartHit.xAxis.data=n.chartHit.x,t.chartHit.series[0].data=n.chartHit.hit,t.chartHit.series[1].data=n.chartHit.hitMiss})).catch((function(e){t.nodeInfo=m();var a=new b;t.chartMemory.xAxis.data=a.chartMemoryGet.x,t.chartMemory.series[0].data=a.chartMemoryGet.y,t.chartConnect.xAxis.data=a.chartConnect.x,t.chartConnect.series[0].data=a.chartConnect.y,t.chartHit.xAxis.data=a.chartHit.x,t.chartHit.series[0].data=a.chartHit.hit,t.chartHit.series[1].data=a.chartHit.hitMiss})).finally((function(){t.loading=!1})))},clickBack:function(){this.$router.push("/cache-cluster-monitor/index")}}};function m(e){var t="-",a={nmdto:{peakMemory:t,osMemory:t,configMemory:t},nmfsdto:{syncFull:t,syncPartialOk:t,syncPartialErr:t},commandTotal:t,expiredKeys:t,evictedKeys:t,nodeMonitorList:null};return e&&Object.keys(a).forEach((function(n){Object(p["a"])(a[n])?Object.keys(a[n]).forEach((function(i){var o;Object(h["a"])(e,"".concat(n,".").concat(i))&&(a[n][i]=null!==(o=e[n][i])&&void 0!==o?o:t)})):Object(h["a"])(e,n)&&(a[n]=e[n])})),a}var b=function(){function e(t){Object(o["a"])(this,e),this.data=Array.isArray(t)?t:[]}return Object(s["a"])(e,[{key:"chartMemoryGet",get:function(){var e=[],t=[];return this.data.forEach((function(a){e.push(a.time),t.push(a.momery)})),{x:e,y:t}}},{key:"chartConnect",get:function(){var e=[],t=[];return this.data.forEach((function(a){e.push(a.time),t.push(a.qps)})),{x:e,y:t}}},{key:"chartHit",get:function(){var e=[],t=[],a=[];return this.data.forEach((function(n){e.push(n.time),t.push(n.hit),a.push(n.hitMiss)})),{x:e,hit:t,hitMiss:a}}}])}(),v=g,y=(a("5605"),a("2877")),C=Object(y["a"])(v,n,i,!1,null,"4f12be7a",null);t["default"]=C.exports},dcd0:function(e,t,a){"use strict";a("6596")},e15c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("el-dialog-limit",{attrs:{title:"详情",visible:e.show,size:"small","append-to-body":!0,"close-on-click-modal":!1},on:{close:e.clickCancel}},[t("el-form",{ref:"formRef",staticClass:"cluster-form",attrs:{"label-position":e.labelPosition,"label-width":"120px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:"key",prop:"key"}},[t("span",[e._v(e._s(e.form.key))])]),t("el-form-item",{attrs:{label:"type",prop:"type"}},[t("span",[e._v(e._s(e.form.type))])]),t("el-form-item",{attrs:{label:"访问频率",prop:"counter"}},[t("span",[e._v(e._s(e.form.counter))])])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.clickConfirm}},[e._v("确定")]),t("el-button",{on:{click:e.clickCancel}},[e._v("取消")])],1)],1)},i=[],o=(a("b64b"),a("d3b7"),a("159b"),a("6748")),s=a("ec41");function r(e){var t={id:"",key:"",type:"",counter:"",value:null};return e&&Object.keys(t).forEach((function(a){t[a]=e[a]})),t}var l={name:"hotKeyDeatil",components:{},mixins:[],model:{prop:"show",event:"change"},props:{show:Boolean,rowData:{type:Object,default:null},refresh:Function},data:function(){return{labelPosition:"right",form:r(),rules:{}}},computed:{isEdit:function(){var e;return Boolean(null===(e=this.rowData)||void 0===e?void 0:e.clusterId)}},watch:{},created:function(){},mounted:function(){var e=this;this.isEdit&&(Object.keys(this.form).forEach((function(t){e.form[t]=e.rowData[t]})),this.getValueOne())},methods:{getValueOne:function(){var e=this;Object(o["b"])({clusterId:this.rowData.clusterId,clusterNodeId:this.rowData.clusterNodeId,key:this.rowData.key}).then((function(t){if(200===t.code){var a=Object(s["a"])(t,"data.type"),n=Object(s["a"])(t,"data.value");e.form.type=a,e.form.value=n}}))},clickCancel:function(){this.$refs.formRef.resetFields(),this.$emit("change",!1)},confirmTest:function(){var e=this;ApiAddConnecte(this.formDataFile).then((function(t){200===t.code?(e.$message({type:"success",message:"已联通"}),e.rowData?(e.formDataFile.set("id",e.rowData.id),ApiEdit(e.formDataFile).then((function(t){200===t.code&&(e.$message({type:"success",message:t.msg}),e.$emit("change",!1),e.refresh())})).catch((function(e){}))):ApiAdd(e.formDataFile).then((function(t){200===t.code&&(e.$message({type:"success",message:t.msg}),e.$emit("change",!1),e.refresh())})).catch((function(e){}))):e.$message.error(t.msg)}))},clickConfirm:function(){this.$emit("change",!1)}}},c=l,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,"152db1b0",null);t["default"]=d.exports},eb0f:function(e,t,a){},fa6d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"g-page"},[t("el-form",{ref:"formRef",attrs:{model:e.formData,rules:e.rules,inline:!0}},[t("el-form-item",{attrs:{label:"集群/节点",prop:"clusterId"}},[t("el-cascader",{ref:"clusterRef",staticStyle:{width:"400px"},attrs:{props:e.props,placeholder:"请选择集群和节点"},on:{change:e.changeCluster},model:{value:e.formData.ids,callback:function(t){e.$set(e.formData,"ids",t)},expression:"formData.ids"}})],1),t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"clusterNodeId"}}),t("el-form-item",{attrs:{label:""}},[t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.changeCluster}},[e._v("刷新")])],1)],1),t("tableView",{attrs:{loading:e.tableConfig.loading,operateObj:e.tableConfig.operate,columns:e.tableConfig.columns,tableData:e.tableConfig.tableData,isPage:e.tableConfig.isPage,total:e.tableConfig.pagination.totalCount,rowKey:"id",currentPage:e.tableConfig.pagination.pageNo,pageSize:e.tableConfig.pagination.pageSize},on:{"update:currentPage":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:current-page":function(t){return e.$set(e.tableConfig.pagination,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.tableConfig.pagination,"pageSize",t)},changePage:e.changePage}})],1)},i=[],o=a("5530"),s=(a("99af"),a("d81d"),a("d3b7"),a("5377"),a("0168")),r=a("c265"),l=a("ff51"),c=a("ec41"),u=a("cfcc"),d={name:"manage-account",components:{},mixins:[],props:{},data:function(){this.$createElement;return{formData:{ids:[],get clusterId(){return Object(l["a"])(this.ids)?this.ids[0]:""},get clusterNodeId(){return Object(l["a"])(this.ids)?this.ids[1]:""}},rules:{clusterId:[{required:!0,message:"请选择集群和节点",trigger:"change"}],clusterNodeId:[{required:!0,message:"请选择集群和节点",trigger:"change"}]},props:{lazy:!0,lazyLoad:function(e,t){var a=e.level;0===a?Object(s["c"])().then((function(e){var a=Object(l["a"])(null===e||void 0===e?void 0:e.data)?e.data:[],n=a.map((function(e){return{label:e.clusterName,value:e.id}}));t(n)})):1===a&&Object(s["d"])(e.value).then((function(e){var a=Object(l["a"])(null===e||void 0===e?void 0:e.data)?e.data:[],n=a.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{label:"".concat(e.hostIp,":").concat(e.port),value:e.id,leaf:!0})}));t(n)})).catch((function(e){}))}},visible:!1,tableConfig:{isPage:!1,loading:!1,pagination:{pageNo:1,pageSize:10,totalCount:0},tableData:[],columns:[{prop:"addr",label:" 客户端",fixed:"left",renderHeader:function(e,t){return e("span",["客户端",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"客户端的地址和端口。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:200},{label:"链接名",prop:"name"},{prop:"fd",label:"文件描述符",renderHeader:function(e,t){return e("span",["文件描述符",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"套接字所使用的文件描述符。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"age",label:"已连接(秒)",render:function(e,t){var a=t.row;return e("span",[a.age,"秒"])},renderHeader:function(e,t){return e("span",["已连接",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"以秒计算的已连接时长。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"idle",label:"空闲",render:function(e,t){var a=t.row;return e("span",[a.idle,"秒"])},renderHeader:function(e,t){return e("span",["空闲",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"以秒计算的空闲时长。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"flags",label:"客户端flag",render:function(e,t){var a=t.row,n=Object(u["f"])(a.flags,"clientFlagsOptions");return n?e("el-tooltip",{attrs:{effect:"dark",content:n,placement:"right"}},[e("el-tag",{attrs:{size:"small",effect:"plain"}},[a.flags])]):e("span",[a.flags])},renderHeader:function(e,t){return e("span",["客户端flag",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"客户端 flag 可以由不同部分组成，不同的代码表示不同的含义，具体含义请移到代码旁查看。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"db",label:"数据库",renderHeader:function(e,t){return e("span",["数据库",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"该客户端正在使用的数据库 ID。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"sub",label:"订阅频道数",renderHeader:function(e,t){return e("span",["订阅频道数",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"已订阅频道的数量。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"psub",label:"订阅模式数",renderHeader:function(e,t){return e("span",["订阅模式数",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"已订阅模式的数量。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"multi",label:" 事务执行数",renderHeader:function(e,t){return e("span",["事务执行数",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"在事务中被执行的命令数量。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"qbuf",label:" 查询缓冲区",renderHeader:function(e,t){return e("span",["查询缓冲区",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"查询缓冲区的长度（字节为单位， 0 表示没有分配查询缓冲区）。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"qbuf-free",label:" 查询缓冲剩余",renderHeader:function(e,t){return e("span",["查询缓冲剩余",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"查询缓冲区剩余空间的长度（字节为单位， 0 表示没有剩余空间）。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:120},{prop:"obl",label:" 输出缓冲",renderHeader:function(e,t){return e("span",["输出缓冲",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"输出缓冲区的长度（字节为单位， 0 表示没有分配输出缓冲区）。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"oll",label:" 输出对象数",renderHeader:function(e,t){return e("span",["输出对象数",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"输出列表包含的对象数量（当输出缓冲区没有剩余空间时，命令回复会以字符串对象的形式被入队到这个队列里）。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"omem",label:" 输出内存",renderHeader:function(e,t){return e("span",["输出内存",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"输出缓冲区和输出列表占用的内存总量。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:100},{prop:"events",label:" 文件描述符事件",render:function(e,t){var a=t.row,n=Object(u["f"])(a.events,"fileDescriptEventOptions");return n?e("el-tooltip",{attrs:{effect:"dark",content:n,placement:"right"}},[e("el-tag",{attrs:{size:"small",effect:"plain"}},[a.events])]):e("span",[a.events])},renderHeader:function(e,t){return e("span",["文件描述符事件",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"文件描述符事件有两种，r与w，具体含义请移到代码旁查看。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:130},{prop:"cmd",label:" 最近执行命令",fixed:"right",renderHeader:function(e,t){return e("span",["最近执行命令",e("el-tooltip",{class:"item",attrs:{effect:"dark",content:"最近一次执行的命令。",placement:"top"}},[e("i",{class:"el-icon-question ml-5"})])])},width:120}]}}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{getList:function(){var e=this;this.tableConfig.loading=!0;var t={id:this.formData.clusterNodeId};this.tableConfig.tableData=[],Object(r["c"])(t).then((function(t){var a=Object(c["a"])(t,"data");Object(l["a"])(a)&&(e.tableConfig.tableData=a)})).catch((function(e){})).finally((function(){e.tableConfig.loading=!1}))},changePage:function(e,t){e&&(this.tableConfig.pagination.pageNo=e),t&&(this.tableConfig.pagination.pageNo=1,this.tableConfig.pagination.pageSize=t),this.getList()},changeCluster:function(){var e=this;this.$refs.formRef.validate((function(t){t&&e.getList()}))}}},f=d,p=(a("2317"),a("2877")),h=Object(p["a"])(f,n,i,!1,null,"bd52512e",null);t["default"]=h.exports}}]);